<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Manage Eventing Functions and Settings | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/cloud/clusters/eventing-service/manage-functions.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="cloud">
<meta name="dcterms.identifier" content="master">
<meta name="page-url" content="/cloud/clusters/eventing-service/manage-functions.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/CapellaGA/docs/public/modules/clusters/pages/eventing-service/manage-functions.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../index.html">Couchbase Capella</a></li>
<li class="crumb">Data Management</li>
<li class="crumb"><a href="eventing-service.html">Eventing Service</a></li>
<li class="crumb"><a href="manage-functions.html">Manage Functions</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Manage Eventing Functions and Settings</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
You can manage Eventing functions through the Capella UI for Couchbase hosted clusters.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eventing-lifecycle"><a class="anchor" href="#eventing-lifecycle"></a>The Eventing Lifecycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a quick introduction to managing the Eventing Service. We will create a default Eventing Handler and subsequently
exercise the Eventing Handler&#8217;s functionality and operations across its typical lifecycle.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-01-pic-lifecycle.png" alt="Eventing Lifecycle">
</div>
</div>
<div class="paragraph">
<p>In order to show the basic life cycle of an Eventing Function, we need a source bucket and a metadata bucket.
For the source bucket, we will use the beer-sample sample document set.
You must have a metadata bucket, typically called metadata, to be used solely by Eventing.
Refer to <a href="#add-function-prerequisites">Prerequisites</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-eventing"><a class="anchor" href="#accessing-eventing"></a>Accessing the Eventing Service in the Capella UI</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Eventing in Capella is only supported by Couchbase hosted clusters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a cluster is running the <a href="eventing-service.html" class="xref page">Eventing Service</a>, Eventing Functions can be accessed and managed from within a cluster by clicking <span class="menuseq"><b class="menu">Tools</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Eventing</b></span>.
A list of all existing Eventing Functions is shown in table format.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-05-access-evt-summary-tab.png" alt="The Functions summary.">
</div>
</div>
<div class="sect2">
<h3 id="functions-summary"><a class="anchor" href="#functions-summary"></a>Functions Summary</h3>
<div class="paragraph">
<p>If there are any Functions saved on the cluster, they are displayed in the Functions summary in the cluster&#8217;s <strong>Tools &gt; Eventing</strong> tab.</p>
</div>
<div class="paragraph">
<p>The Functions summary lists all existing Eventing Functions in a table format, with sortable columns and a row for each Function.</p>
</div>
<div class="paragraph">
<p>The Functions summary displays the following information about each Eventing Function:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Function Name</dt>
<dd>
<p>The name of the Function.</p>
</dd>
<dt class="hdlist1">Source Bucket</dt>
<dd>
<p>The source bucket of the events or mutations.</p>
</dd>
<dt class="hdlist1">Source Scope</dt>
<dd>
<p>The source scope of the events or mutations.</p>
</dd>
<dt class="hdlist1">Source Collection</dt>
<dd>
<p>The source collection of the events or mutations.</p>
</dd>
<dt class="hdlist1">Status</dt>
<dd>
<p>The status of the Function.</p>
<div class="paragraph">
<p>The status can be either in a stable state of <em>Deployed</em>, <em>Undeployed</em>, and <em>Paused</em> or in a transitory state of <em>Deploying</em>, <em>Undeploying</em>, and <em>Pausing</em>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>A <strong>More options</strong> button (<span class="icon"><i class="fa fa-ellipsis-v"></i></span>) is displayed at the end of each row, which can be used to <a href="#export">export</a>, <a href="#deploy-function">deploy</a>, <a href="#edit-settings">edit settings</a>, <a href="#edit-javascript">edit JavaScript</a>, <a href="#delete-function">delete</a>, and more.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-function-prerequisites"><a class="anchor" href="#add-function-prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Eventing system requires at least two (2) isolated buckets&#8212;&#8203;a source bucket and a metadata bucket.
The source bucket is the source of the events or mutations and the second is a scratchpad for the Eventing Service (this can be shared across Functions).
The following directions allow you to get all the prerequisites in place to complete the actions on this page using sample data.</p>
</div>
<div class="paragraph">
<div class="title">Source Bucket</div>
<p>For example purposes, the source bucket (the source of the Eventing mutations) will use the sample dataset <code>beer-sample</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the cluster&#8217;s <span class="menuseq"><b class="menu">Tools</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Import</b></span> tab.</p>
<div class="paragraph">
<p>The <strong>Import</strong> tab will be displayed.</p>
</div>
</li>
<li>
<p>Within the <strong>Beer Sample</strong> section, click <b class="button">Import</b> to load this dataset.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-08-prereq-import-beer-tab.png" alt="Load Beer Sample">
</div>
</div>
<div class="paragraph">
<p>The <code>beer-sample</code> bucket with sample data will appear in the buckets list.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Metadata Bucket</div>
<p>The metadata bucket is an Eventing Service scratchpad area that can be shared between multiple Eventing Functions.
For example purposes, the metadata bucket uses the settings defined in the steps below.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the cluster&#8217;s <strong>Buckets</strong> tab.</p>
</li>
<li>
<p>Click <b class="button">Create Bucket</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Create Bucket</strong> flyout.</p>
</div>
</li>
<li>
<p>Fill in the <strong>Bucket Name</strong> field with the name <code>metadata</code>.
Click <strong>Next</strong>.</p>
<div class="paragraph">
<p>The Memory section is now shown.</p>
</div>
</li>
<li>
<p>In the Memory section, ensure that a minimum size of 100MB is set.
Click <strong>Next</strong>.</p>
<div class="paragraph">
<p>The Backup section is now shown.</p>
</div>
</li>
<li>
<p>In the Backup section, leave the default settings unchanged or adjust them as needed.
Click <strong>Next</strong>.</p>
<div class="paragraph">
<p>The Settings section is now shown.</p>
</div>
</li>
<li>
<p>In the Settings section, leave the default settings unchanged.
Click <b class="button">Create Bucket</b></p>
<div class="paragraph">
<p>The new bucket will appear in the buckets list</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-function"><a class="anchor" href="#add-function"></a>Add New Function</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These directions will configure a Function to use the <a href="#add-function-prerequisites">prerequisite</a> buckets created above.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The <code>beer-sample</code> bucket as an event source.</p>
</li>
<li>
<p>The <code>metadata</code> bucket as a common scratchpad for all Eventing Functions.</p>
</li>
</ul>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the cluster&#8217;s <strong>Tools &gt; Eventing</strong> tab, click <b class="button">Add Function</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Add New Function</strong> fly-out menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-12-add-func-tab.png" alt="The 'New Function' fly-out menu." width="500">
</div>
</div>
</li>
<li>
<p>Configure the details in the <strong>Add New Function</strong> fly-out menu.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>In the <strong>Name</strong> field, enter a unique name for the Eventing Function you are creating.
The Function name can only start with characters in range A-Z, a-z, 0-9 and can only contain characters in range A-Z, a-z, 0-9, underscore, and hyphen.</p>
</li>
<li>
<p>Click the <strong>Source Bucket</strong> drop-down menu and select a bucket currently defined on the cluster.
For more information on creating buckets, refer to <a href="../data-service/manage-buckets.html" class="xref page">Manage Buckets</a>.</p>
</li>
<li>
<p>Click the <strong>Source Scope</strong> drop-down menu and select a scope.
By default, this is set to the <code>_default</code> scope and does not need to be changed for this exercise.
For information on creating scopes, refer to <a href="../data-service/scopes-collections.html" class="xref page">Manage Scopes and Collections</a></p>
</li>
<li>
<p>Click the <strong>Source Collection</strong> drop-down menu and choose a collection defined on the cluster.
By default, this will be set to the <code>_default</code> collection and does not need to be changed for this exercise.
For more information on creating collections, refer to <a href="../data-service/scopes-collections.html" class="xref page">Manage Scopes and Collections</a></p>
</li>
<li>
<p>Click the <strong>Metadata Bucket</strong> drop-down menu and select the Eventing <a href="#server:eventing:eventing-Terminologies.adoc#buckets" class="xref unresolved">metadata bucket</a> currently defined on the cluster. You can choose the same bucket as the source bucket, but the collection must differ.
Refer to the <a href="#server:eventing:eventing-Terminologies.adoc#buckets" class="xref unresolved">Couchbase Server documentation</a> for more information about creating and using a metadata bucket for the Eventing Service.</p>
</li>
<li>
<p>Click the <strong>Metadata Scope</strong> drop-down menu and select a scope.
By default, this is set to the <code>_default</code> scope and does not need to be changed for this exercise. You can choose the same scope as the source scope, but the collection must differ.</p>
</li>
<li>
<p>Click the <strong>Metadata Collection</strong> drop-down menu and choose a collection defined on the cluster.
By default, this will be set to the <code>_default</code> collection and does not need to be changed for this exercise. If you chose the same bucket and scope as the source, you must choose a different collection.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, you may enter a description of the Function you are creating.</p>
</li>
<li>
<p><strong>N1QL Consistency</strong>: The default consistency level of N1QL statements in the handler.
The options in the drop-down menu are <code>None</code> (the default) and <code>Request</code>.</p>
</li>
<li>
<p><strong>Workers</strong>: The number of worker threads per node to be allocated to the Function to process events.
The default is <code>3</code> (the minimum is <code>1</code> maximum is <code>64</code>).</p>
</li>
<li>
<p><strong>Script Timeout</strong>: The number of seconds that should elapse before the script times out and is terminated.
The default is <code>60</code>.</p>
</li>
<li>
<p><strong>Deployment Feed Boundary</strong>: The <a href="#server:eventing:eventing-Terminologies.adoc#feed-boundary" class="xref unresolved">Feed Boundary</a> determines whether documents previously in existence need to be included in the Function’s activities.
When the Feed Boundary is set to <code>Everything</code>, the Function is invoked on all mutations available in the cluster.
This is opposed to setting the Feed Boundary to <code>From Now</code>, where the Function is only invoked on future instances of data mutation post Function deployment).
For the purpose of this exercise, set the Deployment Feed Boundary to <code>Everything</code>.</p>
</li>
<li>
<p><strong>Timer Context Max Size</strong>: Limits the size of the context for any Timer created by the Function.
The default is <code>1024</code>.</p>
</li>
<li>
<p><strong>Language Compatability</strong>: The language version of the handler for backward compatibility.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Add any needed Bucket bindings or URL bindings.</p>
<div class="paragraph">
<p>A binding is a construct that allows separating environment-specific variables (example: bucket names, external endpoint URLs, credentials) from the handler source code.
It provides a level of indirection between environment-specific artifacts to symbolic names, to help move a handler definition from development to production environments without changing code.
Binding names must be valid JavaScript identifiers and must not conflict with any built-in types.</p>
</div>
<div class="paragraph">
<p>An Eventing Function can have no binding, one binding, or several bindings.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bucket Bindings</strong></p>
<div class="paragraph">
<p>Bucket bindings allow JavaScript handlers to access Couchbase KV buckets.
The buckets are then accessible by the bound name as a JavaScript map in the global space of the handler.</p>
</div>
<div class="paragraph">
<p>You can add bucket bindings via the <strong>Bucket</strong> choice by entering an alias name, choosing an access level (<code>Read</code> or <code>Read and Write</code>), and choosing a bucket, scope, and collection.</p>
</div>
</li>
<li>
<p><strong>URL Bindings</strong></p>
<div class="paragraph">
<p>These bindings are utilized by the cURL language construct to access external resources. The binding specifies the endpoint, the protocol (HTTP/HTTPS), and credentials if necessary.
Cookie support can be enabled via the binding if desired when accessing trusted remote nodes. When a URL binding limits access through to be the URL specified or descendants of it.
The target of a URL binding should not be a node that belongs to the Couchbase cluster.</p>
</div>
<div class="paragraph">
<p>You can add URL bindings via the 'URL' choice and then entering the following: alias, URL, allow cookies setting, and security settings to validate SSL certificate and an auth type of (No Auth, Basic, Bearer, and Digest).</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Example of a completed <strong>Add New Function</strong> fly-out menu.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-13-add-func-tab.png" alt="The 'New Function' fly-out menu." width="500">
</div>
</div>
</li>
<li>
<p>Bindings</p>
<div class="paragraph">
<p>A binding is a construct that allows separating environment-specific variables (example: bucket names, external endpoint URLs, credentials) from the handler source code.</p>
</div>
<div class="paragraph">
<p>At the bottom of the Settings fly-out, click <strong>Add</strong> for each needed binding and then configure them appropriately.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the following example bindings are not used in this example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Example Bucket Bindings</strong></p>
</div>
<div class="paragraph">
<p>Bucket bindings allow JavaScript handlers to access Couchbase KV buckets.
The buckets are then accessible by the bound name as a JavaScript map in the global space of the handler.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-14-add-func-bucket-bindings.png" alt="Bucket Bindings">
</div>
</div>
<div class="paragraph">
<p><strong>Example cURL Binding</strong></p>
</div>
<div class="paragraph">
<p>These bindings are utilized by the cURL language construct to access external resources.
The binding specifies the endpoint, the protocol (HTTP/HTTPS), and credentials if necessary.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-15-add-func-url-bindings.png" alt="Bucket Bindings" width="500">
</div>
</div>
</li>
<li>
<p>Click <b class="button">Save</b> to save the current settings and proceed to the <strong>Code Editor</strong> fly-out menu.</p>
</li>
<li>
<p>Add your JavaScript code to the <strong>Code Editor</strong> fly-out menu.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-16-add-func-editor-default-tab.png" alt="The 'Code Editor' fly-out menu." width="500">
</div>
</div>
<div class="paragraph">
<p>The <strong>Code Editor</strong> fly-out menu contains valid placeholder code that just logs mutations.
You may leave the code unchanged if it fits your needs.
In this example, we&#8217;ve modified the placeholder code slightly to include a description of the mutation with the log.</p>
</div>
</li>
<li>
<p>Once you&#8217;re satisfied with the Function&#8217;s JavaScript code, you can click <b class="button">Save</b> to save the Function in an undeployed state.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy-function"><a class="anchor" href="#deploy-function"></a>Deploy a Function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you create or import an Eventing Function, it is initially saved in an undeployed state.
The Functions summary shows all functions on the cluster, along with their respective deployment status.</p>
</div>
<div class="paragraph">
<p>This operation activates an Eventing Function (or handler). Several validations are performed, and only valid handlers can be deployed.
The JavaScript source code of an activated handler cannot be edited.</p>
</div>
<div class="paragraph">
<p>Unless a handler is in the <em>Deployed</em> state, it will not receive or process any events (or mutations).
Deployment creates necessary metadata, spawns worker processes, calculates initial partitions, and initiates checkpointing of processed stream data.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Deploy</strong> from the <strong>Function&#8217;s pop-up menu</strong></p>
<div class="paragraph">
<p>To deploy an existing Function, start by finding the specific Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Deploy</strong> to deploy the Function.</p>
</div>
</li>
<li>
<p>Click <b class="button">Deploy</b> in the <strong>Confirm Deploy Function</strong> fly-out menu.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-18-deploy-confirm-tab.png" alt="Confirm Deploy" width="573">
</div>
</div>
<div class="paragraph">
<p>The Function will now enter the <em>Deployed</em> state and in several seconds will transition to the <em>Deployed</em> state and start processing events (or mutations).</p>
</div>
<div class="paragraph">
<p>The Functions summary now lists the function as deployed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-19-deploy-evt-summary-tab.png" alt="Deployed Function">
</div>
</div>
<div class="paragraph">
<p>The deployed Eventing Function is now processing mutations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-20-pic-running.png" alt="Running Function">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="undeploy-function"><a class="anchor" href="#undeploy-function"></a>Undeploy a Function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This operation deactivates an Eventing Function (or handler).
The JavaScript source code of a deactivated handler can be edited.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Undeploy</strong> from the <strong>Function&#8217;s pop-up menu</strong></p>
<div class="paragraph">
<p>To undeploy an existing Function, start by finding the specific Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Undeploy</strong> to undeploy the Function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Undeploy</strong> option will not appear until the Function is deployed.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <b class="button">Confirm</b> to undeploy <strong>Confirm Undeploy Function</strong> fly-out menu.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-22-undeploy-confirm-tab.png" alt="Undeploy, confirm." width="573">
</div>
</div>
<div class="paragraph">
<p>The Function will now enter the <code>Undeploying</code> state and in several seconds will transition to the <em>Undeployed</em> state and cease processing events (or mutations).</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pause-function"><a class="anchor" href="#pause-function"></a>Pause a Function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This operation pauses and checkpoints an Eventing Function (or handler).
The JavaScript source code of a deactivated handler can be edited.
The checkpoint saves the point in the processing stream such that when the Function is later resumed no mutations will be missed.
Handlers in the <em>Paused</em> state can be either Resumed or Undeployed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select <strong>Pause</strong> from the <strong>Function&#8217;s pop-up menu</strong></p>
<div class="paragraph">
<p>To pause an existing Function, start by finding the specific Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Pause</strong> to pause the Function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Pause</strong> option will not appear until the Function is deployed.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <b class="button">Confirm</b> to complete the action.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-24-pause-confirm-tab.png" alt="Confirm Pause" width="573">
</div>
</div>
<div class="paragraph">
<p>The Function will now enter the <em>Pausing</em> state and in several seconds will transition to the <em>Paused</em> state and cease processing events (or mutations).</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resume-function"><a class="anchor" href="#resume-function"></a>Resume a Function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This operation is similar to Deploy but reactivates an Eventing Function (or handler) and continues processing of a Function that was previously Paused.
Several validations are performed, and only valid handlers can be resumed. The JavaScript source code of an activated handler cannot be edited.
Unlike Deploy this operation will start from a previously saved checkpoint from the pause operation to ensure that no mutations are missed.
On a resume, the backlog of mutations that occurred when the Function was in the paused state will now be processed.
In addition, the backlog of timers that came due while the Function was paused will now also fire as soon as possible (ensuring that no timers are lost).
Depending on the system activity and how long the Function was paused, clearing the backlog of mutations may take some time before Handler moves on to
current mutations and timers.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Resume</strong> from the <strong>Function&#8217;s pop-up menu</strong></p>
<div class="paragraph">
<p>To resume an existing Function, start by finding the specific Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Resume</strong> to resume the Function.</p>
</div>
</li>
<li>
<p>Click <b class="button">Confirm</b> to deploy <strong>Confirm Resume Function</strong> fly-out menu.</p>
<div class="paragraph">
<p>The Function will now enter the <em>Deploying</em> state (there is no <em>Resuming</em> state) and in several seconds will transition to the <em>Deployed</em> state and start processing events (or mutations).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-26-resume-confirm-tab.png" alt="Confirm Resume" width="573">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployment-statistics"><a class="anchor" href="#deployment-statistics"></a>Deployment Statistics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eventing Statistics, for each deployed Function, can be viewed in the Capella UI, the available deployment statistics are:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Success - displays the number of processed Functions.</p>
</li>
<li>
<p>Backlog - displays the number of mutations to be processed by a Function.</p>
</li>
<li>
<p>Timeout - displays the number of Functions that have encountered a timeout condition.</p>
</li>
<li>
<p>Failure - displays the number of failures while processing the Function handler code.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To display the statistics for a deployed Function, start by finding the specific Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row. Click the menu item labeled <strong>Deployment Statistics</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Deployment Statistics</strong> option will not appear until the Function is deployed.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The resulting <strong>Deployment Statistics</strong> fly-out will show the current deployment statistics for the Function.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-28-show-stats-fly-out.png" alt="Deployed Function">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="function-logs"><a class="anchor" href="#function-logs"></a>Function Logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each <em>deployed</em> Function has its own application log.
Application logs allow you to identify and capture various business logic-related activities and errors via user-defined messages specific to each Function.</p>
</div>
<div class="paragraph">
<p>The information that goes to these log files is solely dependent on the logic of the Function via <code>log(&#8230;&#8203;)</code> statements put inside the individual Function handler&#8217;s JavaScript code.
As such, there is no logging level for application logs.</p>
</div>
<div class="paragraph">
<p>Application logs are primarily used for the development and debugging of business logic.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To display the application for a deployed Function, start by finding the specific Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row. Click the menu item labeled <strong>Logs</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Logs</strong> option will not appear until the Function is deployed.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The resulting <strong>Logs</strong> fly-out will show the current application log for the Function.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-30-show-logs-fly-out.png" alt="Deployed Function">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="edit-settings"><a class="anchor" href="#edit-settings"></a>Edit Settings</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only a subset of settings can be edited when a Function is in a deployed state.
To be able to edit the most amount of settings, first put the Function in a <em>paused</em> or <em>undeployed</em> state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To modify a specific Function&#8217;s settings, start by finding the Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Edit Settings</strong>.</p>
<div class="paragraph">
<p>Only a subset of the Function&#8217;s settings are available for modification after the Function is created.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Source Bucket</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Source Scope</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Source Collection</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Metadata Bucket</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Metadata Scope</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Metadata Collection</strong>: <em>Cannot be modified</em></p>
</li>
<li>
<p><strong>Description</strong>: Can be modified at any time</p>
</li>
<li>
<p><strong>N1QL Consistency</strong>: Can be modified at any time</p>
</li>
<li>
<p><strong>Workers</strong>: Can be modified at any time</p>
</li>
<li>
<p><strong>Script Timeout</strong>: Can be modified at any time</p>
</li>
<li>
<p><strong>Deployment Feed Boundary</strong>: Can only be modified when the Function is in an <em>undeployed</em> or <em>paused</em> state</p>
</li>
<li>
<p><strong>Timer Context Max Size</strong>: Can only be modified when the Function is in an <em>undeployed</em> or <em>paused</em> state</p>
</li>
<li>
<p><strong>Language Compatibility</strong>: Can only be modified when the Function is in an <em>undeployed</em> or <em>paused</em> state</p>
</li>
</ul>
</div>
</li>
<li>
<p>To modify any of the above settings that require the Function to be in an <em>undeployed</em> or <em>paused</em> state, you will first need to undeploy or pause the Function by invoking the appropriate action from that pop-up menu at the right of the Function&#8217;s row.</p>
</li>
<li>
<p>Once you&#8217;re satisfied with the modifications you&#8217;ve made to the Function&#8217;s settings, click <b class="button">Save</b> to commit the changes.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-32-edit-settings-fly-out.png" alt="Save Settings">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="edit-javascript"><a class="anchor" href="#edit-javascript"></a>Edit JavaScript</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can only edit a Function&#8217;s JavaScript when it is in a <em>Paused</em> or <em>Undeployed</em> state.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To modify a specific Function&#8217;s JavaScript code, start by finding the Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Edit JavaScript</strong>.</p>
</li>
<li>
<p>You may now use fly-out editor to modify and change your business logic.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-34-edit-javascript-fly-out-tab.png" alt="Save JavaScript">
</div>
</div>
</li>
<li>
<p>Once you&#8217;re satisfied with the modifications you&#8217;ve made to the Function&#8217;s JavaScript code, make sure to click <b class="button">Save</b> to commit the changes.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="delete-function"><a class="anchor" href="#delete-function"></a>Delete Function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you can delete a specific Function, you must first ensure that it is undeployed.
Only Functions that are undeployed can be deleted.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To delete a specific Function&#8217;s settings, start by finding the Function in the Functions summary list, and then invoking the pop-up menu at the right of the Function&#8217;s row select the menu item labeled <strong>Delete</strong>.</p>
</li>
<li>
<p>Click <b class="button">Confirm</b>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/eventing/mgmt-func-36-delete-confirm-tab.png" alt="Confirm Delete" width="573">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Capella","components":["cloud"],"url":"/cloud/index.html","latestVersions":{"cloud":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
