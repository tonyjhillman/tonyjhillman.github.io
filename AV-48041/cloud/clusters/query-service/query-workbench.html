<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Query Workbench | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/cloud/clusters/query-service/query-workbench.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="cloud">
<meta name="dcterms.identifier" content="master">
<meta name="page-url" content="/cloud/clusters/query-service/query-workbench.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/CapellaGA/docs/public/modules/clusters/pages/query-service/query-workbench.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../index.html">Couchbase Capella</a></li>
<li class="crumb">Data Management</li>
<li class="crumb"><a href="query-service.html">Query Service</a></li>
<li class="crumb"><a href="query-workbench.html">Query Workbench</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Query Workbench</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The Query Workbench provides a rich graphical user interface to perform query development.
</blockquote>
</div>
<div class="paragraph">
<p>Using the Query Workbench, you can conveniently explore data, create, edit, run, and save N1QL queries, view and save query results, and explore the document structures in a bucket - all in a single window.</p>
</div>
<div class="paragraph">
<p>Features of the Query Workbench include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A single, integrated visual interface to perform query development and testing.</p>
</li>
<li>
<p>Easy viewing and editing of complex queries by providing features such as multi-line formatting, copy-and-paste, syntax coloring, auto completion of N1QL keywords and bucket and field names, and easy cursor movement.</p>
</li>
<li>
<p>View the structure of the documents in a bucket by using the N1QL <a href="#server:n1ql:n1ql-language-reference/infer.adoc" class="xref unresolved">INFER</a> command.
You no longer have to select the documents at random and guess the structure of the document.</p>
</li>
<li>
<p>Display query results in multiple formats: JSON, table, and tree.
You can also save the query results to a file on disk.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Query Workbench is only available on clusters that are running the <a href="query-service.html" class="xref page">Query Service</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-the-query-workbench"><a class="anchor" href="#accessing-the-query-workbench"></a>Accessing the Query Workbench</h2>
<div class="sectionbody">
<div id="permissions-required" class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Permissions Required</div>
<div class="paragraph">
<p>To access the Query Workbench and execute queries that <em>read</em> documents, you must have the <a href="../../projects/project-roles.html#project-cluster-data-reader" class="xref page"><code>Cluster Data Reader</code></a> project role. To execute queries that <em>read</em> and <em>modify</em> documents, you must have the <a href="../../projects/project-roles.html#project-owner-role" class="xref page"><code>Project Owner</code></a> or <a href="../../projects/project-roles.html#project-cluster-data-reader-writer" class="xref page"><code>Cluster Data / Reader</code></a> role.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a cluster is running the <a href="query-service.html" class="xref page">Query Service</a>, the Query Workbench can be accessed under the cluster&#8217;s <strong>Tools &gt; Query Workbench</strong> tab.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/cluster-query-workbench.png" alt="<span class=&quot;menuseq&quot;><b class=&quot;menu&quot;>The cluster&#8217;s 'Advanced</b>&#160;<i class=&quot;fa fa-angle-right caret&quot;></i> <b class=&quot;menuitem&quot;>Query Workbench' tab.</b></span>"></span></p>
</div>
<div class="paragraph">
<p>The Query Workbench consists of three working areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#n1ql-editor">Query Editor</a></p>
</li>
<li>
<p><a href="#results">Query Results and Plans</a></p>
</li>
<li>
<p><a href="#insights-sidebar">Data / Bucket Insights</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="n1ql-editor"><a class="anchor" href="#n1ql-editor"></a>Using the Query Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Query Editor is where you build and run queries, and view query execution plans.
Enter a query into the Query Editor, and then run the query by clicking <b class="button">Execute</b>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also execute queries by typing a semi-colon (<code>;</code>) at the end of the query and hitting <kbd>Enter</kbd>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Query Editor provides the following additional features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Syntax coloring</strong>&#8201;&#8212;&#8201;For easy viewing, N1QL keywords, numbers and string literals are differently colored.</p>
</li>
<li>
<p><strong>Support for N1QL INFER statements</strong>&#8201;&#8212;&#8201;The tool supports the N1QL <a href="#server:n1ql:n1ql-language-reference/infer.adoc" class="xref unresolved">INFER</a> statement.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specify-bucket-and-scope-context"><a class="anchor" href="#specify-bucket-and-scope-context"></a>Specify Bucket and Scope Context</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_couchbase-7-0"></a>Couchbase 7.0+</p>
</li>
<li>
<p><a id="tabset1_couchbase-6-6"></a>Couchbase 6.6</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_couchbase-7-0">
<div class="paragraph">
<p>You can specify the bucket and scope query context using the drop-down menus near the top left of the Query Editor.
When the query context is set to a specified bucket and scope, you can write queries using just the collection name and do not need to specify the keyspace path.</p>
</div>
<div class="paragraph">
<p>For example, here&#8217;s how a query would look without specifying a bucket and scope in the Query Editor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-N1QL hljs" data-lang="N1QL">SELECT * FROM `travel-sample`.`inventory`.`airline`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you then specify the bucket as <code>travel-sample</code> and the scope as <code>inventory</code>, the query can be simplified to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-N1QL hljs" data-lang="N1QL">SELECT * FROM `airline`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To specify the query context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Near the top left of the Query Editor, open the <strong>bucket</strong> drop-down menu and choose a bucket.</p>
</li>
<li>
<p>With a bucket now selected, the <strong>scope</strong> drop-down menu is enabled with the <code>_default</code> scope selected.
Using this drop-down, you can choose a different scope within the current bucket.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To remove the query context, open the <strong>bucket</strong> drop-down and choose <code>Select a bucket</code>.</p>
</div>
<div class="paragraph">
<p>For more information on scopes and collections, refer to
<a href="#server:learn:data/scopes-and-collections.adoc" class="xref unresolved">Scopes and Collections</a>.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_couchbase-6-6">
<div class="paragraph">
<p>If you are using Couchbase Server 6.6 in Capella, you are unable to specify scope and bucket context.
This feature relies on scopes and collections introduced in <a href="#server:introduction:whats-new.adoc" class="xref unresolved">Couchbase Server 7.0</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-a-query"><a class="anchor" href="#run-a-query"></a>Run a Query</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After entering a query, you can execute the query either by typing a semicolon (<code>;</code>) and pressing <kbd>Enter</kbd>, or by clicking the <b class="button">Execute</b> button.
When the query is running, the <b class="button">Execute</b> button changes to <b class="button">Cancel</b>, which allows you to cancel the running query.
When you cancel a running query, it stops the activity on the cluster side as well.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <b class="button">Cancel</b> button does not cancel index creation statements.
The index creation continues on the server side even though it appears to have been canceled from the Query Workbench.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-a-transaction"><a class="anchor" href="#run-a-transaction"></a>Run a Transaction</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_couchbase-7-0"></a>Couchbase 7.0+</p>
</li>
<li>
<p><a id="tabset2_couchbase-6-6"></a>Couchbase 6.6</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_couchbase-7-0">
<div class="paragraph">
<p>The Query Editor can be used to run a Couchbase transaction.
A transaction is a group of operations that are either committed to the database together or are all undone from the database if there&#8217;s a failure.
For a complete overview of Couchbase transaction, see <a href="#server:learn:data/transactions.adoc" class="xref unresolved">Transactions</a>.</p>
</div>
<div class="paragraph">
<p>You can use the Query Editor to run a single statement as a transaction.
To do this, enter the statement into the Query Editor and click <b class="button">Transaction</b>.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_couchbase-6-6">
<div class="paragraph">
<p>If you are using Couchbase Server 6.6 in Capella, you are unable to run a Couchbase transaction using the Query Editor.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-advisor"><a class="anchor" href="#index-advisor"></a>Index Advisor</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_couchbase-7-0"></a>Couchbase 7.0+</p>
</li>
<li>
<p><a id="tabset3_couchbase-6-6"></a>Couchbase 6.6</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_couchbase-7-0">
<div class="paragraph">
<p>The <a href="#server:n1ql:n1ql-language-reference/advise.adoc" class="xref unresolved">ADVISE</a> command generates index advice that optimizes response time for a query.
You can use this command with <a href="#server:n1ql:n1ql-language-reference/selectintro.adoc" class="xref unresolved">SELECT</a>, <a href="#server:n1ql:n1ql-language-reference/merge.adoc" class="xref unresolved">MERGE</a>, <a href="#server:n1ql:n1ql-language-reference/update.adoc" class="xref unresolved">UPDATE</a>, or <a href="#server:n1ql:n1ql-language-reference/delete.adoc" class="xref unresolved">DELETE</a> queries.
To display index advice for a query entered into the Query Editor, click <b class="button">Advise</b>.</p>
</div>
<div class="paragraph">
<p>Query Workbench will then show any suggested indexes in the Query Results area using JSON format.
This will not prepend <a href="#server:n1ql:n1ql-language-reference/advise.adoc" class="xref unresolved">ADVISE</a> to the current query in the Query Editor</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_couchbase-6-6">
<div class="paragraph">
<p>The Advise button is not available with clusters using Couchbase Server 6.6 in Capella.</p>
</div>
<div class="paragraph">
<p>You can still manually prepend the <a href="#server:n1ql:n1ql-language-reference/advise.adoc" class="xref unresolved">ADVISE</a> command to a query in the Query Editor and run it to get results.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="results"><a class="anchor" href="#results"></a>Viewing the Query Results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you execute a query, the results are displayed in the <strong>Query Results</strong> area.
Since large result sets can take a long time to display, it&#8217;s recommended that you use the <a href="#server:n1ql:n1ql-language-reference/limit.adoc" class="xref unresolved">LIMIT</a> clause as part of your query when appropriate.</p>
</div>
<div class="paragraph">
<p>The figures in this section display the result of the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT * FROM `travel-sample` WHERE type="airport" LIMIT 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a query finishes, metrics for that query are displayed between the <strong>Query Editor</strong> and the <strong>Query Results</strong> areas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-query-metrics.png" alt="The executed query with its metrics highlighted." width="500">
</div>
</div>
<div class="paragraph">
<p>The following query metrics are displayed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Status</strong>&#8201;&#8212;&#8201;Shows the status of the query.
The values can be: success, failed, or HTTP codes.</p>
</li>
<li>
<p><strong>Last Run</strong>&#8201;&#8212;&#8201;The time at which the query was last executed.</p>
</li>
<li>
<p><strong>Round-trip time (RTT)</strong>&#8201;&#8212;&#8201;The total time it took to send the request and receive the response from the server.</p>
</li>
<li>
<p><strong>Elapsed</strong>&#8201;&#8212;&#8201;The time taken by the server to process the request.</p>
</li>
<li>
<p><strong>Execution</strong>&#8201;&#8212;&#8201;The time taken by the server to execute the query.</p>
</li>
<li>
<p><strong>Docs</strong>&#8201;&#8212;&#8201;The number of documents returned.</p>
</li>
<li>
<p><strong>Mutation Count</strong>&#8201;&#8212;&#8201;The number of documents deleted or changed by the query.
This appears only for <a href="#server:n1ql:n1ql-language-reference/update.adoc" class="xref unresolved">UPDATE</a> and <a href="#server:n1ql:n1ql-language-reference/delete.adoc" class="xref unresolved">DELETE</a> queries instead of Result Count.</p>
</li>
<li>
<p><strong>Size</strong>&#8201;&#8212;&#8201;The total size, in bytes, of the documents returned.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="json-format"><a class="anchor" href="#json-format"></a>JSON Format</h3>
<div class="paragraph">
<p>The <strong>JSON</strong> tab formats the results to make the data easy to read.
You can also expand and collapse objects and array values using the small arrow icons next to the line numbers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you clicked <b class="button">Execute</b>, the results of the query are shown.
If you clicked <b class="button">Explain</b>, the results are the same as <a href="#results-plan-text">Plan Text</a> format.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-result-json.png" alt="The Query Results area with the 'JSON' tab selected." width="500">
</div>
</div>
</div>
<div class="sect2">
<h3 id="table-format"><a class="anchor" href="#table-format"></a>Table Format</h3>
<div class="paragraph">
<p>The <strong>Table</strong> tab presents the results in a tabular format.
The tool converts the JSON documents to HTML tables, and presents sub-objects or sub-arrays as sub-tables.
This format works well for queries that return an array of objects, like <code>select `beer-sample`.* from `beer-sample`;</code>.
You can hover the mouse pointer over a data value to see the path to that value in a tool tip.
You can sort a column by clicking the column header.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-result-table.png" alt="The Query Results area with the 'Table' tab selected." width="500">
</div>
</div>
</div>
<div class="sect2">
<h3 id="plans"><a class="anchor" href="#plans"></a>Plans</h3>
<div class="paragraph">
<p>Each time a query is executed, an <a href="#server:n1ql:n1ql-language-reference/explain.adoc" class="xref unresolved">EXPLAIN</a> command is automatically run in the background to retrieve the query plan for that query.
You may also generate the query plan by clicking <b class="button">Explain</b>.</p>
</div>
<div class="paragraph">
<p>There are two ways to display the query plan: <a href="#results-plan">Plan</a> (graphical) and <a href="#results-plan-text">Plan Text</a>.</p>
</div>
<div class="sect3">
<h4 id="results-plan"><a class="anchor" href="#results-plan"></a>Plan</h4>
<div class="paragraph">
<p>The <strong>Plan</strong> tab presents the query in a graphical format.</p>
</div>
<div class="paragraph">
<p>At the top, it shows a summary which also shows lists of the buckets, indexes, and fields used by the query.</p>
</div>
<div class="paragraph">
<p>At the bottom is a data-flow diagram of query operators, with the initial scans at the right, and the final output on the left.</p>
</div>
<div class="paragraph">
<p>Potentially expensive operators are highlighted.</p>
</div>
<div class="paragraph">
<p>The data flow generally follows these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scan</p>
</li>
<li>
<p>Fetch</p>
</li>
<li>
<p>Filter</p>
</li>
<li>
<p>Projection (part 1)</p>
</li>
<li>
<p>Order</p>
</li>
<li>
<p>Projection (part 2)</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Projection is split into two parts (one before Order and one after Order), but Query Workbench shows only the first part.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-result-plan.png" alt="The Query Results area with the 'Plan' tab selected." width="500">
</div>
</div>
<div class="paragraph">
<p>Hovering over any unit of the plan shows more details of it.
In this example query:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Unit name</th>
<th class="tableblock halign-left valign-top">Information shown when hovered over</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>{'#operator':'Order':'sort_terms':
[{'expr':'(`travel-sample`.`name`)'}]}</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>{'#operator':'InitialProject':'result_terms':
[{'expr':'self','star':true}]}</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>{'#operator':'Filter','condition':'(((`travel-sample`.`type`) = \'landmark\') and
((`travel-sample`.`city`) = \'San Francisco\'))'}</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>{'#operator':'Fetch','keyspace':'travel-sample','namespace':'default'}</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IntersectScan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(none)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IndexScan2 (above)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>{'#operator':'IndexScan2','index':'def_city','index_id':'d51323973a9c8458','index_projection':
{'primary_key':true},'keyspace':'travel-sample','namespace':'default','spans':
[{'exact':true,'range':[{'high':'\San Francisco\'','inclusion':3,'low':'\'San Francisco\''}]}],'using':'gsi'}</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IndexScan2 (below)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>{'#operator':'IndexScan2','index':'def_city','index_id':'a11b1af8651888cf','index_projection':
{'primary_key':true},'keyspace':'travel-sample','namespace':'default','spans':
[{'exact':true,'range':[{'high':'\'landmark'\'','inclusion':3,'low':'\'landmark\''}]}],'using':'gsi'}</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In general, the preference of scan is</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Covering Index</p>
</li>
<li>
<p>Index Scan</p>
</li>
<li>
<p>Intersect Scan</p>
</li>
<li>
<p>Union Scan, and finally</p>
</li>
<li>
<p>Fetch</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="results-plan-text"><a class="anchor" href="#results-plan-text"></a>Plan Text</h3>
<div class="paragraph">
<p>The <strong>Plan Text</strong> tab shows the <a href="#server:n1ql:n1ql-language-reference/explain.adoc" class="xref unresolved">EXPLAIN</a> query execution plan in JSON format.</p>
</div>
<div class="paragraph">
<p>If you clicked <b class="button">Execute</b>, a detailed query execution plan is shown, which includes information about how long each step in the plan took to execute.
If you clicked <b class="button">Explain</b>, the intended query execution plan is shown (minus the details that would be included if you actually executed the query).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-result-plan-text.png" alt="The Query Results area with the 'Plan Text' tab selected." width="500">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="view-query-history"><a class="anchor" href="#view-query-history"></a>View Query History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Query Workbench maintains a history of all the queries executed.</p>
</div>
<div class="paragraph">
<p>If you edit a previous query and execute it, the new query is stored at the end of the history.
The history is persistent across browser sessions.
The query history only saves queries; due to limited browser storage it does not save query results.
Thus, when you restart the browser or reload the page, you can see your old queries, but you must re-execute the queries if you want to see their results.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Clearing the browser history clears the history maintained by the Query Editor as well.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Clicking <b class="button">History</b> opens the <strong>Query History</strong> fly-out menu:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-query-history-flyout.png" alt="The 'Query History' fly-out menu." width="500">
</div>
</div>
<div class="paragraph">
<p>You can scroll through the entire query history, and click on an individual query to be taken to that particular point in the history.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Search history</strong>&#8201;&#8212;&#8201;You can search the query history by entering text in the <strong>Filter Queries</strong> search box.
All matching queries are displayed.</p>
</li>
<li>
<p><strong>Delete a specific entry</strong>&#8201;&#8212;&#8201;Click the Trash icon next to a particular query to delete it from the history.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This can be useful if you want a more manicured history when you <a href="#export-query">export the history</a> for future use.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Delete all entries</strong>&#8201;&#8212;&#8201;Click <strong>Clear</strong> to delete the entire query history.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="import-query"><a class="anchor" href="#import-query"></a>Import Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can load a new query history into the Query Workbench from a JSON file.
This can be the <a href="#export-query">exported query history</a> from a different cluster.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Importing query history will overwrite your current query history.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the cluster&#8217;s <strong>Tools &gt; Query Workbench</strong> tab, click <b class="button">History</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Query History</strong> fly-out menu.</p>
</div>
</li>
<li>
<p>Click <b class="button">Import</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Import Query History</strong> fly-out menu.</p>
</div>
</li>
<li>
<p>Click <b class="button">Import JSON</b> and select a local <code>.json</code> file that you wish to import.</p>
</li>
<li>
<p>Click <b class="button">Save</b>.</p>
<div class="paragraph">
<p>The preexisting query history is overwritten with the query history of the imported file.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="export-query"><a class="anchor" href="#export-query"></a>Export Query History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can export the current query history to a JSON file.
This file can be <a href="#import-query">imported</a> onto other clusters.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the cluster&#8217;s <strong>Tools &gt; Query Workbench</strong> tab, click <b class="button">History</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Query History</strong> fly-out menu.</p>
</div>
</li>
<li>
<p>Click <b class="button">Export</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Export Query History</strong> fly-out menu.</p>
</div>
</li>
<li>
<p>(Optional) Use the <strong>File Name</strong> field to specify a name for the exported file.</p>
</li>
<li>
<p>Click <b class="button">Export</b>.</p>
<div class="paragraph">
<p>The fly-out menu closes and the file is downloaded onto your computer.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query-settings"><a class="anchor" href="#query-settings"></a>Modify Query Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can specify various settings for the Query Workbench by clicking <strong>Settings</strong> near the top-left corner of the Query Editor.
This opens the <strong>Query Settings</strong> fly-out menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-settings.png" alt="The 'Query Settings' fly-out menu, showing the workbench settings." width="500">
</div>
</div>
<div class="paragraph">
<p>Configure the following settings and click <b class="button">Submit</b> to save the configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The timeout parameter (specified in seconds) can be used to limit the running time of a query,
up to a maximum of 1800 seconds</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scan Consistency</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This is a cbq-engine option.
Select one of the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Not Bounded</strong></p>
</li>
<li>
<p><strong>Request Plus</strong></p>
</li>
<li>
<p><strong>Statement Plus</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, refer to <a href="#server:settings:query-settings.adoc#scan_consistency" class="xref unresolved">Settings and Parameters</a> in the Couchbase Server documentation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Named Parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For the prepared queries, this option allows you to specify any number of named parameters.
Click the <b class="button">+</b> button to add new named parameters, and the <b class="button">-</b> button to remove the parameters.
Named parameters must start with the dollar sign ($) for use in prepared queries.
Otherwise, they are interpreted as parameters to the Query REST API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Positional Parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For the prepared queries, this option allows you to specify values for $1, $2, and so on up to as many positional parameters as you have.
Click the <b class="button">+</b> button to add new positional parameters, and the <b class="button">-</b> button to remove the parameters.
The parameters are automatically labelled as "$1", "$2", and so on.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="insights-sidebar"><a class="anchor" href="#insights-sidebar"></a>Data / Bucket Insights</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_couchbase-7-0"></a>Couchbase 7.0+</p>
</li>
<li>
<p><a id="tabset4_couchbase-6-6"></a>Couchbase 6.6</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_couchbase-7-0">
<div class="paragraph">
<p>The <strong>Data Insights</strong> area displays the buckets, scopes, and collections in the current cluster.
These keyspaces are shown in a hierarchy that you can expand or collapse.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To expand a heading within the hierarchy, click the heading, or click the rightward-pointing arrowhead before the heading.</p>
</li>
<li>
<p>To collapse a heading within the hierarchy, click the heading again, or click the downward-pointing arrowhead before the heading.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Buckets appear at the top level of the hierarchy. When you expand a bucket, the scopes within that bucket appear below it.
Similarly, when you expand a scope, the collections within that scope appear below it.
The number of collections within the bucket is displayed to the right of the bucket heading.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-data-insights.png" alt="The 'Data Insights' panel." width="399">
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_couchbase-6-6">
<div class="paragraph">
<p>The <strong>Bucket Insights</strong> area displays all installed buckets in the cluster.
By default, when the Query Workbench is first loaded, it retrieves a list of available buckets from the cluster.
The <strong>Bucket Insights</strong> area is automatically refreshed when buckets or indexes are added or removed, but you can manually refresh it using the refresh button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/query-workbench-bucket-insights.png" alt="The 'Bucket Insights' panel." width="399">
</div>
</div>
<div class="paragraph">
<p>The buckets are grouped into the following categories based on the indexes created for the bucket:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Queryable Buckets</strong>&#8201;&#8212;&#8201;Contain a primary index or a primary index and secondary indexes.</p>
</li>
<li>
<p><strong>Queryable on Indexed Fields</strong>&#8201;&#8212;&#8201;Do not contain a primary index, but have one or more secondary indexes.</p>
</li>
<li>
<p><strong>Non-Indexed Buckets</strong>&#8201;&#8212;&#8201;Do not contain any indexes.
These buckets do not support queries.
You must first define an index before querying these buckets.</p>
<div class="paragraph">
<p>You can expand any bucket to view the schema for that bucket: field names, types, and if you hover the mouse pointer over a field name, you can see example values for that field.
Bucket analysis is based on the N1QL <a href="#server:n1ql:n1ql-language-reference/infer.adoc" class="xref unresolved">INFER</a> statement, which you can run manually to get more detailed results.
This command infers a schema for a bucket by examining a random sample of documents.
Because the command is based on a random sample, the results may vary slightly from run to run.
The default sample size is 1000 documents.
The syntax of the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">INFER bucket-name [ WITH options ];</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code class="var">options</code> is a JSON object, specifying values for one or more of <code class="var">sample_size</code>, <code class="var">similarity_metric</code>, <code class="var">num_sample_values</code>, or <code class="var">dictionary_threshold</code>.</p>
</div>
<div class="paragraph">
<p>For example, to increase the sample size to 3000, you could use the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">INFER `travel-sample` WITH {"sample_size":3000};</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Capella","components":["cloud"],"url":"/cloud/index.html","latestVersions":{"cloud":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
