<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Configure On-the-Wire Security | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Establish and retrieve cluster-wide settings for the use of encryption and cipher-suites.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/rest-api/rest-setting-security.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/rest-api/pages/rest-setting-security.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="rest-intro.html">REST API Reference</a></li>
<li class="crumb"><a href="rest-security.html">Security API</a></li>
<li class="crumb"><a href="rest-setting-security.html">Configure On-the-Wire Security</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Configure On-the-Wire Security</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Establish and retrieve cluster-wide settings for the use of encryption and cipher-suites.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http-method-and-uri"><a class="anchor" href="#http-method-and-uri"></a>HTTP Method and URI</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>GET /settings/security/[service-name]

POST /settings/security/[service-name]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Allows settings to be established for the use of encryption.
This includes the encryption <em>level</em>, for node-to-node encryption within the cluster;
UI disablement over insecure connections; TLS minimum version; and a list of accepted cipher suites.
Additionally, secure communication by means of TLS can be <em>enforced</em> across the cluster.</p>
</div>
<div class="paragraph">
<p>Note that information on setting an HTTP Secure Transport Header with the REST API is provided in <a href="rest-setting-hsts.html" class="xref page">Configure HSTS</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="curl-syntax"><a class="anchor" href="#curl-syntax"></a>Curl Syntax</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>curl -X GET -u &lt;administrator&gt;:&lt;password&gt;
  http://&lt;ip-address-or-domain-name&gt;:8091/settings/security/[service-name]

curl -X POST -u &lt;administrator&gt;:&lt;password&gt;
  http://&lt;ip-address-or-domain-name&gt;:8091/settings/security/[service-name]
  -d disableUIOverHttp=&lt;true|false&gt;
  -d disableUIOverHttps=&lt;true|false&gt;
  -d disableWWWAuthenticate=&lt;true|false&gt;
  -d responseHeaders=&lt;list-of-response-headers&gt;
  -d allowedHosts=&lt;list-of-naming-conventions&gt;
  -d allowNonLocalCACertUpload=&lt;true|false&gt;
  -d clusterEncryptionLevel=&lt;all|control|strict&gt;
  -d tlsMinVersion=&lt;tlsv1|tlsv1.1|tlsv1.2|tlsv1.3&gt;
  -d honorCipherOrder=&lt;true|false&gt;
  -d cipherSuites=&lt;list-of-accepted-cipher-suites&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax for the <code>GET</code> and <code>POST</code> methods includes the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>service-name</code>.
If provided, determines the service to which settings are either written with <code>POST</code>, or read with <code>GET</code>.
The value of <code>service-name</code> can be any one of the following: <code>data</code> (Data Service), <code>fullTextSearch</code> (Search Service), <code>index</code> (Index Service), <code>eventing</code> (Eventing Service), <code>query</code> (Query Service), <code>analytics</code> (Analytics Service), <code>backup</code> (Backup Service), <code>clusterManager</code> (Cluster Manager).
If no <code>service-name</code> is provided, <em>global</em> settings are written or read.</p>
</li>
<li>
<p><code>disableUIOverHttp</code>.
Whether access to Couchbase Web Console should be disabled over http.
Default is <code>false</code>, meaning that the console can be accessed over http.
This parameter can only be set globally.</p>
</li>
<li>
<p><code>disableUIOverHttps</code>.
Whether access to Couchbase Web Console should be disabled over https.
Default is <code>false</code>, meaning that the console can be accessed over https.
This parameter can only be set globally.</p>
</li>
<li>
<p><code>disableWWWAuthenticate</code>.
Whether to disable Couchbase Server&#8217;s responding to unauthenticated requests with <em>WWW-Authenticate</em>.
Default is <code>false</code>, meaning that Couchbase Server responds to unauthenticated requests with <em>WWW-Authenticate</em>.
This parameter can only be set globally.</p>
</li>
<li>
<p><code>responseHeaders</code>.
A list of response headers.</p>
</li>
<li>
<p><code>allowedHosts</code>.
Specifies a list of naming conventions that must be met by the name of any node that is to be added or joined to the cluster.
This parameter, which is available only in 7.1.1+, is described separately, in <a href="rest-specify-node-addition-conventions.html" class="xref page">Restrict Node-Addition</a>.
This parameter can only be set globally.</p>
</li>
<li>
<p><code>allowNonLocalCACertUpload</code>.
Whether the <code>POST</code> method and <code>/controller/uploadClusterCA</code> URI (which are deprecated in 7.1) can be used to upload CA certificates from a node other than localhost.
Value can be <code>true</code> or <code>false</code> (the default).
For information, see <a href="deprecated-security-apis/upload-retrieve-root-cert.html" class="xref page">Upload and Retrieve the Root Certificate</a>.
This parameter can only be set globally.</p>
</li>
<li>
<p><code>clusterEncryptionLevel</code>.
Controls the level of encryption imposed on cluster-communications.
This can only be set after cluster encryption has been enabled (see <a href="../manage/manage-nodes/apply-node-to-node-encryption.html" class="xref page">Manage Node-to-Node Encryption</a>) and can only be set globally.
Its value can be any of the following:</p>
<div class="ulist">
<ul>
<li>
<p><code>control</code>, meaning that server-management information passed between nodes is passed in encrypted form.</p>
</li>
<li>
<p><code>all</code>, meaning that all information passed between nodes, including data handled by services, is passed in encrypted form.</p>
</li>
<li>
<p><code>strict</code>, meaning <code>all</code> with only encrypted communication permitted between nodes and between the cluster and external clients.
Note that after <code>strict</code> has been specified, communication that occurs entirely on a single node using the <em>loopback</em> interface (whereby the machine is identified as either <code>::1</code> or <code>127.0.0.1</code>) is still permitted in non-encrypted form.</p>
<div class="paragraph">
<p>Before applying <code>strict</code>, see <a href="#enforcing-tls">Enforcing TLS</a>, below.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>tlsMinVersion</code>.
Specifies the minimum TLS version accepted by the cluster.
Can be <code>tlsv1</code>, <code>tlsv1.1</code>, <code>tlsv1.2</code>, or <code>tlsv1.3</code>.
The default is <code>tlsv1.2</code>.</p>
<div class="paragraph">
<p>This parameter can be set either globally or per service.
A value of <code>tlsv1.3</code> <em>cannot</em> be applied either globally or to the Cluster Manager.</p>
</div>
</li>
<li>
<p><code>honorCipherOrder</code>.
Specifies whether the server uses its own cipher-suite preference, rather than the client&#8217;s.
The cluster&#8217;s list of accepted cipher-suites can be defined with the <code>cipherSuites</code> flag (see below).
The default value of <code>honorCipherOrder</code> is <code>true</code>: a setting of <code>false</code> is <em>not</em> recommended, since insecure.
This parameter can be set either globally, or per service.</p>
</li>
<li>
<p><code>cipherSuites</code>.
Specifies a list of the cipher suites to be used, in order of preference.
The argument must be a list of cipher-suites.</p>
<div class="paragraph">
<p>This parameter can be set either globally, or per service.
If the parameter is set for a given service, each listed cipher-suite must appear as a member of the array that is the value of the non-configurable <strong>supportedCipherSuites</strong> setting for the service.
If the parameter is set globally, each listed cipher-suite can be used by a given service only if it appears as a member of <strong>supportedCipherSuites</strong> for that service.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For an explanation of the relationships between per service and global settings, see <a href="../learn/security/on-the-wire-security.html" class="xref page">On-the-Wire Security</a>.</p>
</div>
<div class="sect2">
<h3 id="enforcing-tls"><a class="anchor" href="#enforcing-tls"></a>Enforcing TLS</h3>
<div class="paragraph">
<p>Before applying the <code>strict</code> value to the <code>clusterEncryptionLevel</code> parameter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pause all Eventing functions on the cluster.
(Resume them only after changes to node-to-node encryption and encryption-level been applied.)
See <a href="#cli:cbcli/couchbase-cli-eventing-function-setup.adoc" class="xref unresolved">eventing-function-setup</a>.</p>
</li>
<li>
<p>Ensure all client applications and scripts are able to connect with TLS.</p>
</li>
<li>
<p>Ensure node-to-node encryption is enabled (see <a href="../manage/manage-nodes/apply-node-to-node-encryption.html" class="xref page">Manage Node-to-Node Encryption</a>).</p>
</li>
<li>
<p>Ensure all XDCR replications are configured as fully secure (see <a href="../manage/manage-xdcr/enable-full-secure-replication.html" class="xref page">Enable Fully Secure Replications</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once <code>strict</code> has been applied to all nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Previously paused Eventing functions can be resumed.</p>
</li>
<li>
<p>The Eventing Service debugger port (9140) is not available (since non-TLS only).
See <a href="../install/install-ports.html" class="xref page">Couchbase Server Ports</a>.</p>
</li>
<li>
<p>The node cannot be added to a Version 6.0.x cluster.
See <a href="../install/upgrade-cluster-online.html#tls-address-family-restriction-and-node-addition" class="xref page">TLS, Address-Family Restriction, and Node Addition</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="responses"><a class="anchor" href="#responses"></a>Responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>GET</code> method, if successful, gives <code>200 OK</code>, and returns an object containing each configured parameter, with its current value.
The <code>POST</code> method, if successful, gives <code>200 OK</code>, and returns an empty array.</p>
</div>
<div class="paragraph">
<p>For both methods, an incorrect URI gives <code>404 Object Not Found</code>, with a <code>Not found</code> error message.
Use of improper credentials gives <code>401 Unauthorized</code>.
An improper port number returns an error message such as <code>Failed to connect</code>, or <code>Port number out of range</code>.</p>
</div>
<div class="paragraph">
<p>For the <code>POST</code> method, incorrectly specified parameters fail with <code>404 Bad Request</code>, and return an <code>error</code> object that lists the errors in an array.
For example, a call that incorrectly specifies every significant parameter-value returns an object such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "errors": [
    "honorCipherOrder - Accepted values are 'true' and 'false'.",
    "cipherSuites - Invalid format. Expecting a list of ciphers.",
    "tlsMinVersion - Supported TLS versions are tlsv1.3, tlsv1.2, tlsv1.1, tlsv1",
    "clusterEncryptionLevel - Cluster encryption level must be one of [\"control\",\"all\",\"strict\"]",,
    "disableUIOverHttps - Accepted values are 'true' and 'false'.",
    "disableUIOverHttp - Accepted values are 'true' and 'false'.",
    "disableWWWAuthenticate - Accepted values are 'true' and 'false'."
  ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note additionally that an attempt to establish a value for <code>clusterEncryptionLevel</code> prior to the enablement of node-to-node encryption returns the following error-message: <code>clusterEncryptionLevel - Can&#8217;t set cluster encryption level when cluster encryption is disabled.</code>
See <a href="../manage/manage-nodes/apply-node-to-node-encryption.html" class="xref page">Manage Node-to-Node Encryption</a>, for details on how to enable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The methods and the URI can be used as shown below.</p>
</div>
<div class="sect2">
<h3 id="establish-on-the-wire-settings-globally"><a class="anchor" href="#establish-on-the-wire-settings-globally"></a>Establish On-the-Wire Settings, Globally</h3>
<div class="paragraph">
<p>The following establishes a subset of on-the-wire settings globally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl  -u Administrator:password -v -X POST \
http://10.144.210.101:8091/settings/security \
-d disableUIOverHttp=true \
-d clusterEncryptionLevel=control \
-d tlsMinVersion=tlsv1.1 \
-d 'cipherSuites=["TLS_RSA_WITH_AES_128_CBC_SHA", "TLS_RSA_WITH_AES_256_CBC_SHA"]'</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>disableUIOverHttp</code> flag is given a value of <code>true</code>, indicating that access to Couchbase Web Console will be disabled over http.
The <code>disableUIOverHttps</code> flag is <em>not</em> specified, meaning that access to Couchbase Web Console will <em>not</em> be disabled over https, by default.
The <code>clusterEncryptionLevel</code> is specified as <code>control</code>, indicating that only server-management information is passed in encrypted form between cluster-nodes: note that this parameter can only be set after the <code>node-to-node-encryption</code> CLI command has been used to enable internal network-security for the cluster, as described in <a href="../manage/manage-nodes/apply-node-to-node-encryption.html" class="xref page">Manage Node-to-Node Encryption</a>.
The <code>tlsMinVersion</code> is specified as version 1.1.
The <code>honorCipherOrder</code> parameter is <em>not</em> specified, meaning that it retains its default value of <code>true</code>; which ensures that the cluster&#8217;s own cipher-suites preference is used, rather than the client&#8217;s.
The <code>cipherSuites</code> parameter is assigned a value that is a list of two cipher suites.</p>
</div>
<div class="paragraph">
<p>If successful, the call returns an empty array:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="retrieve-cluster-wide-settings"><a class="anchor" href="#retrieve-cluster-wide-settings"></a>Retrieve Cluster-Wide Settings</h3>
<div class="paragraph">
<p>The <code>GET /settings/security</code> method and URI retrieve cluster-wide settings for on-the-wire security, as shown below.
Note that the output is piped to the <a href="https://stedolan.github.io/jq/">jq</a> program, to enhance readability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl  -u Administrator:password -v -GET \
http://10.144.210.101:8091/settings/security | jq '.'</pre>
</div>
</div>
<div class="paragraph">
<p>If the call is successful, and some explicit settings have been made by the administrator, the output might appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "disableUIOverHttp": false,
  "disableUIOverHttps": false,
  "disableWWWAuthenticate": false,
  "responseHeaders": [],
  "tlsMinVersion": "tlsv1",
  "cipherSuites": [
    "TLS_RSA_WITH_AES_128_CBC_SHA",
    "TLS_RSA_WITH_AES_256_CBC_SHA"
  ],
  "honorCipherOrder": true,
  "allowNonLocalCACertUpload": false,
  "allowedHosts": [
    "*.test.ubuntu",
    "127.0.0.1"
  ],
  "data": {
    "cipherSuites": [
      "TLS_RSA_WITH_AES_128_CBC_SHA",
      "TLS_RSA_WITH_AES_256_CBC_SHA",
      "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"
    ],
    "tlsMinVersion": "tlsv1.2",
    "honorCipherOrder": true,
    "supportedCipherSuites": [
      "TLS_AES_256_GCM_SHA384",
      "TLS_CHACHA20_POLY1305_SHA256",
      "TLS_AES_128_GCM_SHA256",
      "TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384",
              .
              .
              .</pre>
</div>
</div>
<div class="paragraph">
<p>The global values of <code>disableUIOverHttp</code>, <code>disableUIOverHttps</code>, <code>tlsMinVersion</code>, and <code>honorCipherOrder</code> are thus displayed.
Note also that a global value for <code>cipherSuites</code> has also been established.</p>
</div>
<div class="paragraph">
<p>The return object contains, in addition to global settings, a subdocument for each service.
The truncated output shown here features values from the subdocument for the Data Service; which is shown to have its own values established for <code>cipherSuites</code>, <code>tlsMinVersion</code>, and <code>honorCipherOrder</code>.
The read-only value for <code>supportedCipherSuites</code> for the service is also displayed.</p>
</div>
</div>
<div class="sect2">
<h3 id="establish-per-service-settings"><a class="anchor" href="#establish-per-service-settings"></a>Establish Per Service On-the-Wire Settings</h3>
<div class="paragraph">
<p>The following call establishes global settings for <code>tlsMinVersion</code> and <code>supportedCipherSuites</code>, for the Data Service only:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl  -u Administrator:password -v -X POST \
http://10.144.210.101:8091/settings/security/data \
-d tlsMinVersion=tlsv1.1 \
-d 'cipherSuites=["TLS_RSA_WITH_AES_128_CBC_SHA","TLS_RSA_WITH_AES_256_CBC_SHA","TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"]'</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>data</code> path-parameter has been added to the URI, as the value of <code>service-name</code>, in order to specify the Data Service.
If the call is successful, an empty array is returned.</p>
</div>
<div class="paragraph">
<p>To verify the new settings for the Data Service, use the <code>GET</code> method, again adding <code>data</code> to the URI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl  -u Administrator:password -v -X GET \
http://10.144.210.101:8091/settings/security/data | jq '.'</pre>
</div>
</div>
<div class="paragraph">
<p>The returned output shows that the new settings have been successfully established:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "cipherSuites": [
    "TLS_RSA_WITH_AES_128_CBC_SHA",
    "TLS_RSA_WITH_AES_256_CBC_SHA",
    "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"
  ],
  "tlsMinVersion": "tlsv1.1",
  "honorCipherOrder": true,
  "supportedCipherSuites": [
    "TLS_AES_256_GCM_SHA384",
    "TLS_CHACHA20_POLY1305_SHA256",
              .
              .
              .</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information on managing on-the-wire security-settings with the CLI, see the reference page for the <a href="#cli:cbcli/couchbase-cli-setting-security.adoc" class="xref unresolved">setting-security</a> command.</p>
</div>
<div class="paragraph">
<p>Information on setting an HTTP Secure Transport Header with the REST API is provided in <a href="rest-setting-hsts.html" class="xref page">Configure HSTS</a>.</p>
</div>
<div class="paragraph">
<p>A conceptual overview of on-the-wire security is provided in <a href="../learn/security/on-the-wire-security.html" class="xref page">On-the-Wire Security</a>.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
