<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Geospatial GeoJSON Queries | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/fts/fts-supported-queries-geojson-spatial.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/fts/pages/fts-supported-queries-geojson-spatial.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb"><a href="fts-introduction.html">Search</a></li>
<li class="crumb"><a href="fts-supported-queries.html">Supported Queries</a></li>
<li class="crumb"><a href="fts-supported-queries-geospatial.html">Geo Spatial Queries</a></li>
<li class="crumb"><a href="fts-supported-queries-geojson-spatial.html">GeoJSON Queries</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Geospatial GeoJSON Queries</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<em>GeoJSON</em> queries return documents that contain location in either legacy Geopoint format or standard GeoJSON, thus providing more utility than that of legacy  point-distance, bounded-rectangle and bounded-polygon against the indexed Geopoint fields.
</blockquote>
</div>
<div class="paragraph">
<p><span class="status">Couchbase Server 7.1.2</span></p>
</div>
<div class="paragraph">
<p>For these queries the Search service supports higher dimensional spatial structures that enable the users to approximate a large variety of real life shapes like a postal or jurisdictional region boundaries, a route for a delivery vehicle or an airline career or the boundaries of various water bodies like a river, lake, stream etc..</p>
</div>
<div class="paragraph">
<p>GeoJSON is a geospatial data interchange format based on JavaScript Object Notation (JSON).
It defines several types of JSON objects and the manner in which they are combined to represent data about geographic features, their properties, and their spatial extents.
GeoJSON uses a geographic coordinate reference system, World Geodetic System 1984, and units of decimal degrees.</p>
</div>
<div class="paragraph">
<p>Internally the Search service supports the GeoJSON spatial data formats on <a href="https://s2geometry.io/devguide/s2cell_hierarchy.html">spherical geodesics</a> via S2 cells.
Furthermore the Search service adheres to the GeoJSON standard <a href="https://www.rfc-editor.org/rfc/rfc7946">RFC 7946</a> allows users to address query use cases like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Finding all the documents with any GeoJSON shapes that <strong>contains</strong> the spatial field of the query shape.</p>
</li>
<li>
<p>Finding all the documents with any GeoJSON shapes that are <strong>within</strong> the spatial field of the query shape.</p>
</li>
<li>
<p>Finding all the documents with any GeoJSON shapes that <strong>intersects</strong> the spatial field of the query shape.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The supported GeoJSON shapes in the Search service are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Point</strong> <em>(equivalent to a legacy Geopoint)</em></p>
</li>
<li>
<p><strong>LineString</strong></p>
</li>
<li>
<p><strong>Polygon</strong> <em>(equivalent to a legacy Polygon)</em></p>
</li>
<li>
<p><strong>MultiPoint</strong></p>
</li>
<li>
<p><strong>MultiLineString</strong></p>
</li>
<li>
<p><strong>MultiPolygon</strong></p>
</li>
<li>
<p><strong>GeometryCollection</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to the above shapes, Search also supports a couple of additional custom shapes to make the spatial approximations easier for users to utilize.  The two extra shapes supported are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Circle</strong> <em>(equivalent to a legacy Radius)</em></p>
</li>
<li>
<p><strong>Envelope</strong> <em>(equivalent to a legacy Rectangle)</em></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites-dataset"><a class="anchor" href="#prerequisites-dataset"></a>Prerequisites - Modify the travel-sample dataset</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>travel-sample</code> bucket, provided for test and development, DOES NOT contains any GeoJSON constructs in the documents (only legacy Geopoint information) as such you will need to modify the <code>travel-sample</code> data to work with GeoJSON.</p>
</div>
<div class="paragraph">
<p>A dataset modification can be easily accomplished via either</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding a new GeoJSON object(s) to your documents.</p>
</li>
<li>
<p>Converting Geopoints to GeoJSON Point types in your documents.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To run the examples in this documentation the first update method <strong>"Adding a new GeoJSON object(s) to your documents"</strong> is needed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Example documents that have a geo field (airports, hotels or landmarks) such as <code>airport_1254</code> in <code>travel-sample._default._default</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "airportname": "Calais Dunkerque",
  "city": "Calais",
  "country": "France",
  "faa": "CQF",
  "geo": {
    "alt": 12,
    "lat": 50.962097,
    "lon": 1.954764
  },
  "icao": "LFAC",
  "id": 1254,
  "type": "airport",
  "tz": "Europe/Paris"
}</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Adding a new GeoJSON object(s) (required for running the examples)</strong></p>
<div class="paragraph">
<p>Using SQL++ (or N1QL) in the Query Workbench we can quickly read the "geo" objects in <code>travel-sample._default._default</code> and generate and add a new geojson object to each document.   In addition the second statement will add a higher level GeoJSON (Couchbase addition to the spec) object representing a 10 mile radius around each airport (only for type=airport).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">UPDATE `travel-sample`._default._default
    SET geojson = { "type": "Point", "coordinates": [geo.lon, geo.lat] }
    WHERE geo IS NOT null;

UPDATE  `travel-sample`._default._default
    SET geoarea = { "coordinates": [geo.lon, geo.lat], "type": "circle", "radius": "10mi"}
    WHERE geo IS NOT null AND type="airport";</code></pre>
</div>
</div>
<div class="paragraph">
<p>After running the above conversion we would get updated documents for airports like (hotels and landmarks will not have a geoarea sub-object):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "airportname": "Calais Dunkerque",
  "city": "Calais",
  "country": "France",
  "faa": "CQF",
  "geo": {
    "alt": 12,
    "lat": 50.962097,
    "lon": 1.954764
  },
  "geoarea": {
    "coordinates": [
      1.954764,
      50.962097
    ],
    "radius": "10mi",
    "type": "circle"
  },
  "geojson": {
    "coordinates": [
      1.954764,
      50.962097
    ],
    "type": "Point"
  },
  "icao": "LFAC",
  "id": 1254,
  "type": "airport",
  "tz": "Europe/Paris"
}</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Converting Geopoints (for reference only, do not use for the examples)</strong></p>
<div class="paragraph">
<p>Using SQL++ (or N1QL) in the Query Workbench we can quickly convert all top level "geo" objects in <code>travel-sample._default._default</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">UPDATE `travel-sample`._default._default
    SET geo.type = "Point", geo.coordinates = [geo.lon, geo.lat] WHERE geo IS NOT null;

UPDATE `travel-sample`._default._default
    UNSET geo.lat, geo.lon WHERE geo IS NOT null;</code></pre>
</div>
</div>
<div class="paragraph">
<p>After running the above conversion we would get updated documents like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "airportname": "Calais Dunkerque",
  "city": "Calais",
  "country": "France",
  "faa": "CQF",
  "geo": {
    "alt": 12,
    "coordinates": [
      1.954764,
      50.962097
    ],
    "type": "Point"
  },
  "icao": "LFAC",
  "id": 1254,
  "type": "airport",
  "tz": "Europe/Paris"
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="geojson-syntax"><a class="anchor" href="#geojson-syntax"></a>GeoJSON Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As previously discussed the supported GeoJSON shapes in the Search service are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The search service follows strict GeoJSON syntax for the above seven (7) standard types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GeoJSON position arrays are either [longitude, latitude], or [longitude, latitude, altitude].</p>
<div class="ulist">
<ul>
<li>
<p><code>However the Search service only supports [longitude, latitude].</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Right-hand rule winding order as per RFC 7946 GeoJSON recommendations</p>
<div class="ulist">
<ul>
<li>
<p>LineString and Polygon geometries contain coordinates in an order: lines go in a certain direction, and polygon rings do too.</p>
</li>
<li>
<p>The direction of LineString often reflects the direction of something in real life: a GPS trace will go in the direction of movement, or a street in the direction of allowed traffic flows.</p>
</li>
<li>
<p>Polygon ring order is undefined in GeoJSON, but there’s a useful default to acquire: the right hand rule. Specifically this means that</p>
<div class="ulist">
<ul>
<li>
<p>The exterior ring should be counterclockwise.</p>
</li>
<li>
<p>Interior rings should be clockwise.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to the above shapes, Search also supports a two of additional custom shapes (Couchbase specific) to make the spatial approximations easier for users to utilize:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Circle, and Envelope</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The search service follows its own syntax for the above two (2) custom types (see below).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-geojson-data-types"><a class="anchor" href="#supported-geojson-data-types"></a>Supported GeoJSON Data Types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="point-rfc-7946-3-1-2"><a class="anchor" href="#point-rfc-7946-3-1-2"></a>Point (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.2">RFC 7946: 3.1.2</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON Point field in a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "Point",
 "coordinates": [75.05687713623047,22.53539059204079]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A point is a single geographic coordinate, such as the location of a building or the current position given by any Geolocation API.
Note : The standard only supports a single way of specifying the coordinates like an array format of longitude followed by latitude. i.e.: [lng, lat].</p>
</div>
</div>
<div class="sect2">
<h3 id="linestring-rfc-7946-3-1-4"><a class="anchor" href="#linestring-rfc-7946-3-1-4"></a>Linestring (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.4">RFC 7946: 3.1.4</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON Linestring field in a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "type": "LineString",
   "coordinates": [
[ 77.01416015625, 23.0797317624497],
[ 78.134765625, 20.385825381874263]
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A linestring defined by an array of two or more positions. By specifying only two points, the linestring will represent a straight line. Specifying more than two points creates an arbitrary path.</p>
</div>
</div>
<div class="sect2">
<h3 id="polygon-rfc-7946-3-1-6"><a class="anchor" href="#polygon-rfc-7946-3-1-6"></a>Polygon (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.6">RFC 7946: 3.1.6</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON Polygon field in a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "Polygon",
 "coordinates": [ [ [ 85.605, 57.207],
                    [ 86.396, 55.998],
                    [ 87.033, 56.716],
                    [ 85.605, 57.207]
                ] ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A polygon is defined by a list of a list of points. The first and last points in each (outer) list must be the same (i.e., the polygon must be closed). And the exterior coordinates have to be in Counter Clockwise Order in a polygon. (CCW)
Polygons with holes are also supported. The holes has to follow Clockwise Order for the boundary vertices.
For Polygons with a single ring, the ring cannot self-intersect
NOTE: The CCW order of vertices is strictly mandated for the geoshapes in the Couchbase Server release 7.1.2 and any violation of this requirement would result in unexpected search results.</p>
</div>
</div>
<div class="sect2">
<h3 id="multipoint-rfc-7946-3-1-3"><a class="anchor" href="#multipoint-rfc-7946-3-1-3"></a>MultiPoint (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.3">RFC 7946: 3.1.3</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON Multipoint field in a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "MultiPoint",
 "coordinates": [
    [ -115.8343505859375, 38.45789034424927],
    [ -115.81237792968749, 38.19502155795575],
    [ -120.80017089843749, 36.54053616262899],
    [ -120.67932128906249, 36.33725319397006]
 ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multilinestring-rfc-7946-3-1-5"><a class="anchor" href="#multilinestring-rfc-7946-3-1-5"></a>MultiLineString (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.5">RFC 7946: 3.1.5</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON MultiLineString field in a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "MultiLineString",
 "coordinates": [
    [ [ -118.31726074, 35.250105158],[ -117.509765624, 35.3756141] ],
    [ [ -118.6962890, 34.624167789],[ -118.317260742, 35.03899204] ],
    [ [ -117.9492187, 35.146862906], [ -117.6745605, 34.41144164] ]
]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multipolygon-rfc-7946-3-1-7"><a class="anchor" href="#multipolygon-rfc-7946-3-1-7"></a>MultiPolygon (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.7">RFC 7946: 3.1.7</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON MultiPolygon field in a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "MultiPolygon",
 "coordinates": [
    [ [ [ -73.958, 40.8003 ], [ -73.9498, 40.7968 ],
        [ -73.9737, 40.7648 ], [ -73.9814, 40.7681 ],
        [ -73.958, 40.8003 ] ] ],


    [ [ [ -73.958, 40.8003 ], [ -73.9498, 40.7968 ],
        [ -73.9737, 40.7648 ], [ -73.958, 40.8003 ] ] ]
 ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="geometrycollection-rfc-7946-3-1-8"><a class="anchor" href="#geometrycollection-rfc-7946-3-1-8"></a>GeometryCollection (<a href="https://www.rfc-editor.org/rfc/rfc7946#section-3.1.8">RFC 7946: 3.1.8</a>)</h3>
<div class="paragraph">
<p>The following specifies a GeoJSON GeometryCollection field in a document:
A GeometryCollection has a member with the name "geometries".  The value of "geometries" is an array.  Each element of this array is a GeoJSON Geometry object.    It is possible for this array to be empty.</p>
</div>
<div class="paragraph">
<p>Unlike the other geometry types described above, a GeometryCollection can be a heterogeneous composition of smaller Geometry objects.  For example, a Geometry object in the shape of a lowercase roman "i" can be composed of one point and one LineString.
Nested  GeometryCollections are invalid.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "GeometryCollection",
 "geometries": [
    {
      "type": "MultiPoint",
      "coordinates": [
         [ -73.9580, 40.8003 ],
         [ -73.9498, 40.7968 ],
         [ -73.9737, 40.7648 ],
         [ -73.9814, 40.7681 ]
      ]
    },
    {
      "type": "MultiLineString",
      "coordinates": [
         [ [ -73.96943, 40.78519 ], [ -73.96082, 40.78095 ] ],
         [ [ -73.96415, 40.79229 ], [ -73.95544, 40.78854 ] ],
         [ [ -73.97162, 40.78205 ], [ -73.96374, 40.77715 ] ],
         [ [ -73.97880, 40.77247 ], [ -73.97036, 40.76811 ] ]
      ]
    },
    {
      "type" : "Polygon",
      "coordinates" : [
    [ [ 0 , 0 ] , [ 3 , 6 ] , [ 6 , 1 ] , [ 0 , 0 ] ],
    [ [ 2 , 2 ] , [ 3 , 3 ] , [ 4 , 2 ] , [ 2 , 2 ] ]
    ]
   }
]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="envelope-couchbase-specific-extension"><a class="anchor" href="#envelope-couchbase-specific-extension"></a>Envelope (Couchbase specific extension)</h3>
<div class="paragraph">
<p>Envelope type, which consists of coordinates for upper left and lower right points of the shape to represent a bounding rectangle in the format: [[minLon, maxLat], [maxLon, minLat]].</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "type": "envelope",
    "coordinates": [
      [72.83, 18.979],
      [78.508, 17.4555]
    ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="circle-couchbase-specific-extension"><a class="anchor" href="#circle-couchbase-specific-extension"></a>Circle (Couchbase specific extension)</h3>
<div class="paragraph">
<p>If the user wishes to cover a circular region over earth’s surface, then they could use this shape.
A  sample circular shape is as below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "type": "circle",
 "coordinates": [75.05687713623047,22.53539059204079],
 "radius": "1000m"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Circle is specified over the center point coordinates along with the radius (or distance).</p>
</div>
<div class="paragraph">
<p>Example formats supported for radius are:
"5in" , "5inch" , "7yd" , "7yards",  "9ft" , "9feet", "11km", "11kilometers", "3nm" "3nauticalmiles", "13mm" , "13millimeters",  "15cm", "15centimeters", "17mi", "17miles" "19m" or "19meters".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specifying-distances"><a class="anchor" href="#specifying-distances"></a>Distances</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Multiple unit-types can be used to express the radius (or distance) of the <strong>Circle</strong> type.
These are listed in the table below, with the strings that specify them in REST queries.</p>
</div>
<table id="geospatial-distance-units" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Units</th>
<th class="tableblock halign-left valign-top">Specify with</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>in</code> or <code>inch</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">feet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ft</code> or <code>feet</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">yards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>yd</code> or <code>yards</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">miles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mi</code> or <code>miles</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nautical miles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nm</code> or <code>nauticalmiles</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">millimeters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mm</code> or <code>millimeters</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">centimeters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cm</code> or <code>centimeters</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m</code> or <code>meters</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kilometers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>km</code> or <code>kilometers</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The integer used to specify the number of units must precede the unit-name, with no space left in-between.
For example, <em>five inches</em> can be specified either by the string <code>"5in"</code>, or by the string <code>"5inches"</code>; while <em>thirteen nautical miles</em> can be specified as either <code>"13nm"</code> or <code>"13nauticalmiles"</code>.</p>
</div>
<div class="paragraph">
<p>If the unit cannot be determined, the entire string is parsed, and the distance is assumed to be in <em>meters</em>.</p>
</div>
</div>
</div>
<h1 id="querying-the-geojson-spatial-fields" class="sect0"><a class="anchor" href="#querying-the-geojson-spatial-fields"></a>Querying the GeoJSON spatial fields</h1>
<div class="paragraph">
<p>Search primarily supports three types of spatial querying capability across those heterogeneous types of geoshapes indexed this is accomplished via a JSON Query Structure.</p>
</div>
<div class="sect1">
<h2 id="query-structure"><a class="anchor" href="#query-structure"></a>Query Structure:</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
    "field": " &lt;&lt; fieldName &gt;&gt; ",
    "geometry": {
      "shape": {
        "type": " &lt;&lt; shapeDesc &gt;&gt; ",
        "coordinates": [[[ ]]]
      },
      "relation": " &lt;&lt; relation &gt;&gt; "
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The item <strong>fieldName</strong> is the indexed field to apply the Query Structure against.</p>
</div>
<div class="paragraph">
<p>The item <strong>shapeDesc</strong> can be any of the 9 types like Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeometryCollection, Circle and Envelope.</p>
</div>
<div class="paragraph">
<p>The item <strong>relation</strong> can be any of the 3 types like intersects , contains and within.</p>
</div>
<table id="geospatial-distance-units" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTERSECTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return all documents whose spatial field intersects the query  geometry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONTAINS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return all documents whose spatial field contains the query geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WITHIN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return all documents whose spatial field is within the query geometry.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sample-query-structures"><a class="anchor" href="#sample-query-structures"></a>Sample Query Structures</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="a-point-contains-query"><a class="anchor" href="#a-point-contains-query"></a>A point <code>contains</code> query</h3>
<div class="paragraph">
<p>The <code>contains</code> query for point returns all the matched documents with shapes that contain the given point in the query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
  "field": "&lt;&lt;fieldName&gt;&gt;",
  "geometry": {
    "shape": {
      "type": "point",
      "coordinates": [75.05687713623047, 22.53539059204079]
    },
    "relation": "contains"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="linestring-intersects-query"><a class="anchor" href="#linestring-intersects-query"></a>LineString <code>intersects</code> query</h3>
<div class="paragraph">
<p>An <code>intersect</code> query for linestring returns all the matched documents with shapes that intersects with the linestring in the query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
  "field": "&lt;&lt;fieldName&gt;&gt;",
    "geometry": {
      "shape": {
        "type": "linestring",
        "coordinates": [
          [77.01416015625, 23.079731762449878],
          [78.134765625, 20.385825381874263]
        ]
      },
      "relation": "intersects"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="polygon-within-query"><a class="anchor" href="#polygon-within-query"></a>Polygon <code>WithIn</code> Query</h3>
<div class="paragraph">
<p>A <code>within</code> query for polygon returns all the matched documents with shapes that are residing completely within the area of the polygon in the query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
  "field": "&lt;&lt;fieldName&gt;&gt;",
    "geometry": {
      "shape": {
        "type": "polygon",
        "coordinates": [
          [
            [77.59012699127197, 12.959853852513307],
            [77.59836673736572, 12.959853852513307],
            [77.59836673736572, 12.965541604118611],
            [77.59012699127197, 12.965541604118611],
            [77.59012699127197, 12.959853852513307]
          ]
        ]
      },
      "relation": "within"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="detailed-geojson-examples"><a class="anchor" href="#detailed-geojson-examples"></a>Detailed examples for every QueryShape:</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Sample Query Structures above just introduces some of the basic QueryShapes, the full list below covers the nine (9) unique QueryShapes utilizes each of them to query 1) a set of GeoJSON points and 2) a set of GeoJSON area shapes in this case Circles (but the "area shapes" could be anything):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="fts-queryshape-point.html" class="xref page">Point Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-linestring.html" class="xref page">LineString Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-polygon.html" class="xref page">Polygon Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-multipoint.html" class="xref page">MultiPoint Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-multilinestring.html" class="xref page">MultiLineString Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-multipolygon.html" class="xref page">MultiPolygon Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-geometrycollection.html" class="xref page">GeometryCollection Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-circle.html" class="xref page">Circle Query</a></p>
</li>
<li>
<p><a href="fts-queryshape-envelope.html" class="xref page">Envelope Query</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating_a_geojson_index"><a class="anchor" href="#creating_a_geojson_index"></a>Creating a Geospatial Index (type geojson)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be successful, a geospatial GeoJSON query must reference an index that applies the <em>geojson</em> type mapping to the field containing any of the standard types <strong>Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection</strong> plus the extended types of <strong>Circle and Envelope</strong>.</p>
</div>
<div class="paragraph">
<p>This can be achieved with Couchbase Web Console, or with the REST endpoints provided for managing <a href="../rest-api/rest-fts-indexing.html" class="xref page">Indexes</a>.
Detailed instructions for setting up indexes, and specifying type mappings, are provided in <a href="fts-creating-indexes.html" class="xref page">Creating Indexes</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For initial experimentation with geospatial GeoJSON querying (based on the type geojson), the <code>travel-sample._default._default</code> must updated as per <a href="#prerequisites-dataset">Prerequisites for GeoJSON Search</a> to ensure your dataset contains GeoJSON objects that can be indexed.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Add Index</strong> link in the upper right of the <strong>Couchbase Web Console</strong> &gt; <strong>Search</strong> page.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-add-initial.png" alt="fts add initial" width="600">
</div>
</div>
</li>
<li>
<p>To define any index on which Full Text Search a unique name for the index in the <strong>Index Name</strong> field, on the upper-left. Note that only alphanumeric characters, hyphens, and underscores are allowed for index names and the first character of the name must be alphabetic.</p>
<div class="paragraph">
<p>Enter <strong>test_geopoint</strong> as the name of the Search index you are creating in the <strong>Index Name</strong> text-box.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-name-geojson.png" alt="fts index name geojson" width="450">
</div>
</div>
</li>
<li>
<p>Select the bucket <strong>travel-sample</strong> from the <strong>Bucket</strong> pull-down menu.</p>
<div class="paragraph">
<p>Use the pull-down menu provided for the Bucket field, on the upper-right, and select a bucket that you are allowed to access to via the cluster&#8217;s RBAC settings.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-name-and-bucket-geojson.png" alt="fts index name and bucket geojson" width="450">
</div>
</div>
</li>
<li>
<p>Select the checkbox <strong>[X] Use non-default scope/collections</strong></p>
<div class="paragraph">
<p>This allows your index to stream mutations from one or more non-default collections under the selected bucket and scope.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-select-geojson-scope-collections.png" alt="fts select geojson scope collections" width="450">
</div>
</div>
</li>
<li>
<p>You will see a newly visible pull-down menu provided for the <strong>Scope</strong> field, under the <strong>[X] Use non-default scope/collections</strong> checkbox, and select a bucket that you are allowed to access to via the cluster&#8217;s RBAC settings.</p>
<div class="paragraph">
<p>For this example leave the setting as <strong>_default</strong> which is used to migrate bucket based data into the collections paradigm.</p>
</div>
</li>
<li>
<p>Under <strong>Type Mapings</strong>, unselect the checkbox <strong>[ ]  default | dynamic</strong>.</p>
<div class="paragraph">
<p>This is required as this type mapping (the default mapping) is only valid for the &lt;bucket&gt;._default._default which is typically used to upgrade a 6.X server from a bucket into a more powerful collections paradigm.  In this example we will do the equivalent but on a per collections basis.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-uncheck-default-mapping.png" alt="fts uncheck default mapping" width="600">
</div>
</div>
</li>
<li>
<p>Click on the button <strong>+ Add Type Mapping</strong></p>
<div class="ulist">
<ul>
<li>
<p>A new section with a <strong>Collection</strong> pull-down, <strong>Analyzer</strong> pull-down and a <strong>[ ] only index specified fields</strong> checkbox will appear.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu1-nondefault-empty.png" alt="fts index menu1 nondefault empty" width="600">
</div>
</div>
</li>
<li>
<p>Select <strong>_default</strong> from the <strong>Collection</strong> pull-down, note the pull down will change to a text field prefilled with <strong>_default._default</strong></p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu1-geopoint-filled.png" alt="fts index menu1 geopoint filled" width="600">
</div>
</div>
</li>
<li>
<p>Leave the <strong>[&#160;&#160;] only index specified fields</strong> checkbox blank or unset.</p>
<div class="paragraph">
<p>This will index all fields in the scope <strong>_default</strong> collection <strong>_default</strong>, however not this is not recommended for large production datasets.</p>
</div>
</li>
<li>
<p>Click on the blue <strong>ok</strong> at the right of the section to save this mapping.</p>
</li>
<li>
<p>Hover over your newly created/saved row</p>
</li>
<li>
<p>Click on the blue <strong>+</strong> button the right side of the row.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu1-geopoint-hover.png" alt="fts index menu1 geopoint hover" width="600">
</div>
</div>
</li>
<li>
<p>A context menu of "insert child mapping" (for sub-objects) and "insert child field" (for properties) will appear.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu2-geopoint-empty.png" alt="fts index menu2 geopoint empty" width="600">
</div>
</div>
</li>
<li>
<p>Select <strong>insert child field</strong></p>
</li>
<li>
<p>another row menu will appear with the following controls: "field", "type", "text", "searchable as", "analyzer" "inherit", "index", "store", "include in _all field", "include term vectors", and "docvalues".</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu2-geojson-filled.png" alt="fts index menu2 geojson filled" width="600">
</div>
</div>
</li>
<li>
<p>Set the text box <strong>field</strong> to <strong>geojson</strong>, this will also update "searchable as" to <strong>geojson</strong>.</p>
</li>
<li>
<p>Change the pull-down <strong>type</strong> to <strong>geoshape</strong>.</p>
<div class="paragraph">
<p>By configuring the child field information form, specifically identify the object <strong>geo</strong> as type <strong>geopoint</strong> this will tell the Search indexer to recognize top level sub-objects like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">  "geojson": {
    "coordinates": [
      1.954764,
      50.962097
    ],
    "type": "Point"
  },</code></pre>
</div>
</div>
</li>
<li>
<p>Check <strong>[X]</strong> the boxes "store" and "include in _all field"</p>
</li>
<li>
<p>Click on the blue <strong>ok</strong> at the right of the section to save this sub-form.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu2-geojson-filled.png" alt="fts index menu2 geojson filled" width="600">
</div>
</div>
</li>
<li>
<p>Hover again over the row # _default._default | dynamic</p>
</li>
<li>
<p>Click on the blue <strong>+</strong> button the right side of the row.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu1a-geojson-hover.png" alt="fts index menu1a geojson hover" width="600">
</div>
</div>
</li>
<li>
<p>A context menu of "insert child mapping" (for sub-objects) and "insert child field" (for properties) will appear.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu2a-geojson-empty.png" alt="fts index menu2a geojson empty" width="600">
</div>
</div>
</li>
<li>
<p>Select <strong>insert child field</strong></p>
</li>
<li>
<p>another row menu will appear with the following controls: "field", "type", "text", "searchable as", "analyzer" "inherit", "index", "store", "include in _all field", "include term vectors", and "docvalues".</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu2a-geojson-filled.png" alt="fts index menu2a geojson filled" width="600">
</div>
</div>
</li>
<li>
<p>Set the text box <strong>field</strong> to <strong>geoarea</strong>, this will also update "searchable as" to <strong>geoarea</strong>.</p>
</li>
<li>
<p>Change the pull-down <strong>type</strong> to <strong>geoshape</strong>.</p>
<div class="paragraph">
<p>By configuring the child field information form, specifically identify the object <strong>geo</strong> as type <strong>geopoint</strong> this will tell the Search indexer to recognize top level sub-objects like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">  "geoarea": {
    "coordinates": [
      1.954764,
      50.962097
    ],
    "radius": "10mi",
    "type": "circle"
  },</code></pre>
</div>
</div>
</li>
<li>
<p>Check <strong>[X]</strong> the boxes "store" and "include in _all field"</p>
</li>
<li>
<p>Click on the blue <strong>ok</strong> at the right of the section to save this sub-form.</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-menu2a-geojson-filled.png" alt="fts index menu2a geojson filled" width="600">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Save your index, left-click on the <strong>Create Index</strong> button near the bottom of the screen.</p>
<div class="paragraph">
<p>This is all you need to specify in order to create a more advanced index for test and development. No further configuration is required.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-index-create-button.png" alt="fts index create button" width="450">
</div>
</div>
</li>
<li>
<p>If you subsequently Edit your Index it should look like the following:</p>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-edit-index-geojson.png" alt="fts edit index geojson" width="600">
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Indexing all fields as above indexes across all fields is not recommended for production environments since it creates indexes that may be unnecessarily large, and therefore insufficiently performant.
However this index can be edited and optimized if you check <strong>[X] only index specified fields</strong> under the Type Mappings section.
This will result in a much smaller index and a faster index build since only the fields <strong>geojson</strong> and <strong>geoarea</strong> will be indexed in the set of documents.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The index once created can also be accessed by means of the Search REST API
see <a href="fts-searching-with-curl-http-requests.html" class="xref page">Searching with the REST API</a>.  Furthermore the index could have been created in the first place via the Search REST API see <a href="fts-creating-index-with-rest-api.html" class="xref page">Index Creation with REST API</a> for more information on using the Search REST API syntax.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating_geojson_rest_query_radius_based"><a class="anchor" href="#creating_geojson_rest_query_radius_based"></a>Creating a Query: Radius-Based</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section and those following, provide examples of the query-bodies required to make geospatial queries with the Couchbase REST API.
Note that more detailed information on performing queries with the Couchbase REST API can be found in <a href="#fts-searching-with-the-rest-api.adoc" class="xref unresolved">Searching with the REST API</a>; which shows how to use the full <code>curl</code> command and how to incorporate query-bodies into it.</p>
</div>
<div class="paragraph">
<p>The following query-body specifies a longitude of <code>-2.235143</code> and a latitude of <code>53.482358</code>.
The target-field <code>geo</code> is specified, as is a <code>distance</code> of <code>100</code> miles: this is the radius within which target-locations must reside for their documents to be returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
    "geometry": {
      "shape": {
        "coordinates": [
          -2.235143,
          53.482358
        ],
        "type": "circle",
        "radius": "100mi"
      },
      "relation": "within"
    },
    "field": "geojson"
  },
  "size": 10,
  "from": 0,
  "sort": [
    {
      "by": "geo_distance",
      "field": "geojson",
      "unit": "mi",
      "location": {
        "lon": -2.235143,
        "lat": 53.482358
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above query contains a <code>sort</code> object, which specifies that the returned documents should be ordered in terms of their <em>geo_distance</em> from specified <code>lon</code> and <code>lat</code> coordinates: these values need not be identical to those specified in the <code>query</code> object.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-geojson-search_01.png" alt="fts geojson search 01" width="550">
</div>
</div>
<div class="paragraph">
<p>You can cut-n-paste the above Search body definition into the text area that says "search this index&#8230;&#8203;"</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-geojson-search_02.png" alt="fts geojson search 02" width="550">
</div>
</div>
<div class="paragraph">
<p>Once pasted hit the <strong>Search</strong> button and the UI will show the first 10 hits</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-geojson-search_03.png" alt="fts geojson search 03">
</div>
</div>
<div class="paragraph">
<p>The console allows searches performed via the UI to be translated dynamically into cURL examples.
To create a cURL command to do this first check <strong>[X] show advanced query settings</strong> and then check <strong>[X] show command-line query example</strong>.</p>
</div>
<div class="paragraph">
<p>You should have a cURL command similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">curl -XPOST -H "Content-Type: application/json" \
-u &lt;username&gt;:&lt;password&gt; http://192.168.3.150:8094/api/index/test_geojson/query \
-d '{
  "query": {
    "geometry": {
      "shape": {
        "coordinates": [
          -2.235143,
          53.482358
        ],
        "type": "circle",
        "radius": "100mi"
      },
      "relation": "within"
    },
    "field": "geojson"
  },
  "size": 10,
  "from": 0,
  "sort": [
    {
      "by": "geo_distance",
      "field": "geojson",
      "unit": "mi",
      "location": {
        "lon": -2.235143,
        "lat": 53.482358
      }
    }
  ]
}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you copy and then run the above cURL command via the console the response from the Search service will report that there are 847 total_hits but only return the first 10 hits.  A subset of formatted console output might appear as follows:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To pretty print the response just pipe the output through the utility <a href="http://stedolan.github.io/jq">jq</a> to enhance readability.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"hits": [
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_3604",
    "score": 0.21532348857041025,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_5571",
    "score": 0.12120554320433605,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_3577",
    "score": 0.2153234885704102,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "hotel_3606",
    "score": 0.2153234885704102,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_40167",
    "score": 0.27197802451106445,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_36152",
    "score": 0.12120554320433605,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_11329",
    "score": 0.12120554320433605,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "hotel_3643",
    "score": 0.2153234885704102,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "landmark_40038",
    "score": 0.27197802451106445,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  },
  {
    "index": "test_geojson_690ac8f8179a4a86_4c1c5584",
    "id": "airport_565",
    "score": 0.12120554320433605,
    "sort": [
      " \u0001\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f\u007f"
    ]
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating_geojson_rest_query_bounding_box_based"><a class="anchor" href="#creating_geojson_rest_query_bounding_box_based"></a>Creating a Query: Envelope (or Rectangle-Based)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the following query-body, the <code>top_left</code> of a rectangle is expressed by means of an <strong>Envelope</strong>, specifying  [[minLon, maxLat], [maxLon, minLat]] = [[-2.235143, 53.482358],[28.955043, 40.991862]]</p>
</div>
<div class="paragraph">
<p>The results are specified to be sorted on <code>name</code> alone, since only type hotel and landmark have a name the sort will occur on the tokenized values (they analyzer would need to be type keyword to sort on the actual field names).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
    "geometry": {
      "shape": {
        "coordinates": [
          [-2.235143, 53.482358],
          [28.955043, 40.991862]
        ],
        "type": "envelope"
      },
      "relation": "within"
    },
    "field": "geojson"
  },
  "sort": ["name"],
  "size": 10,
  "from": 0
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A subset of formatted output might appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"hits": [
  {
    "index": "test_geojson_3dd53eb1ac88768c_4c1c5584",
    "id": "landmark_3604",
    "score": 0.004703467956838207,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },
  {
    "index": "test_geojson_3dd53eb1ac88768c_4c1c5584",
    "id": "landmark_6067",
    "score": 0.004703467956838207,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },
  {
    "index": "test_geojson_3dd53eb1ac88768c_4c1c5584",
    "id": "landmark_16320",
    "score": 0.004703467956838207,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we added two (2) more child field into the Index definition as follows where both items are searchable as "name"</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-geojson-mod-index.png" alt="fts geojson mod index" width="550">
</div>
</div>
<div class="paragraph">
<p>The sort would be on the actual airportname and name fields and the query itself would return these values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"hits": [
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "hotel_1364",
    "score": 0.05896334942635901,
    "sort": [
      "'La Mirande Hotel"
    ]
  },
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "landmark_16144",
    "score": 0.004703467956838207,
    "sort": [
      "02 Shepherd's Bush Empire"
    ]
  },
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "landmark_16181",
    "score": 0.004703467956838207,
    "sort": [
      "2 Willow Road"
    ]
  },
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "landmark_16079",
    "score": 0.004703467956838207,
    "sort": [
      "20 Fenchurch Street"
    ]
  },</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating_geojson_rest_query_polygon_based"><a class="anchor" href="#creating_geojson_rest_query_polygon_based"></a>Creating a Query: Polygon-Based</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following query-body uses an array, each of whose elements is a string, containing multiple floating-point number pairs; to specify the longitude and latitude of each of the lon/lat pairs of a polygon &#8212; known as <em>polygon points</em>.
In all cases, the <code>lon</code> floating-point value precedes the <code>lat</code> for the correct GeoJSON winding.</p>
</div>
<div class="paragraph">
<p>Here, the last-specified pair in the array is identical to the initial pair, thus explicitly closing the polygon.
However, specifying an explicit closure in this way is optional: closure will be inferred by Couchbase Server if not explicitly specified.</p>
</div>
<div class="paragraph">
<p>If a target data-location falls within the polygon, its document is returned.</p>
</div>
<div class="paragraph">
<p>Request the first 10 items within the state of Utah (note the query body consists of simple set of hand drawn set of corner points).
The target-field <code>geojson</code> is specified, to be compared to the query Polygon the target-locations must reside for their documents to be returned.
Don&#8217;t worry about newlines when you paste the text.</p>
</div>
<div class="paragraph">
<p>The results are specified to be sorted on <code>name</code> alone, since only type hotel and landmark have a name the sort will occur on the tokenized values (they analyzer would need to be type keyword to sort on the actual field names).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "query": {
    "geometry": {
      "shape": {
        "coordinates": [
          [
            [-114.027099609375, 42.00848901572399],
            [-114.04907226562499, 36.99377838872517],
            [-109.05029296875, 36.99377838872517],
            [-109.05029296875, 40.98819156349393],
            [-111.060791015625, 40.98819156349393],
            [-111.02783203125, 42.00848901572399],
            [-114.027099609375, 42.00848901572399]
          ]
        ],
        "type": "Polygon"
      },
      "relation": "within"
    },
    "field": "geojson"
  },
  "size": 10,
  "from": 0,
  "sort": ["name"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A subset of formatted output might appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"hits": [
  {
    "index": "test_geojson_4330cb585620d5e8_4c1c5584",
    "id": "airport_7857",
    "score": 0.27669394470240527,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },
  {
    "index": "test_geojson_4330cb585620d5e8_4c1c5584",
    "id": "airport_7581",
    "score": 0.13231342774148913,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },
  {
    "index": "test_geojson_4330cb585620d5e8_4c1c5584",
    "id": "airport_7727",
    "score": 0.27669394470240527,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },
  {
    "index": "test_geojson_4330cb585620d5e8_4c1c5584",
    "id": "airport_9279",
    "score": 0.27669394470240527,
    "sort": [
      "ô¿¿ô¿¿ô¿¿"
    ]
  },</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again if we added two (2) more child field into the Index definition as follows where both items are searchable as "name"</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-geojson-mod-index.png" alt="fts geojson mod index" width="550">
</div>
</div>
<div class="paragraph">
<p>The sort would be on the actual airportname and name fields (but there are only airports returned) and the query itself would return these values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"hits": [
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "airport_6999",
    "score": 0.13231342774148913,
    "sort": [
      "Brigham City"
    ]
  },
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "airport_7857",
    "score": 0.27669394470240527,
    "sort": [
      "Bryce Canyon"
    ]
  },
  {
    "index": "test_geojson_4391b0a68d5cc865_4c1c5584",
    "id": "airport_7074",
    "score": 0.13231342774148913,
    "sort": [
      "Canyonlands Field"
    ]
  },</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example quickly creates the same index as <a href="fts-creating-index-from-REST-geojson.html" class="xref page">Creating a GeoJSON Index via the REST API</a>.  Note it has the two (2) additional child field definitions to allow keyword sorting.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="final-geojson-index"><a class="anchor" href="#final-geojson-index"></a>Final GeoJSON Search index</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Note, for the samples above that return actual airportname and name fields and also the nine (9) QueryShape examples referenced in <a href="#detailed-geojson-examples">Detailed examples for every QueryShape</a></p>
</div>
<div class="paragraph">
<p>the Search index used is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "type": "fulltext-index",
  "name": "test_geojson",
  "sourceType": "gocbcore",
  "sourceName": "travel-sample",
  "planParams": {
    "maxPartitionsPerPIndex": 1024,
    "indexPartitions": 1
  },
  "params": {
    "doc_config": {
      "docid_prefix_delim": "",
      "docid_regexp": "",
      "mode": "scope.collection.type_field",
      "type_field": "type"
    },
    "mapping": {
      "analysis": {},
      "default_analyzer": "standard",
      "default_datetime_parser": "dateTimeOptional",
      "default_field": "_all",
      "default_mapping": {
        "dynamic": true,
        "enabled": false
      },
      "default_type": "_default",
      "docvalues_dynamic": false,
      "index_dynamic": true,
      "store_dynamic": false,
      "type_field": "_type",
      "types": {
        "_default._default": {
          "dynamic": true,
          "enabled": true,
          "properties": {
            "airportname": {
              "dynamic": false,
              "enabled": true,
              "fields": [
                {
                  "analyzer": "keyword",
                  "include_in_all": true,
                  "index": true,
                  "name": "name",
                  "store": true,
                  "type": "text"
                }
              ]
            },
            "geoarea": {
              "dynamic": false,
              "enabled": true,
              "fields": [
                {
                  "include_in_all": true,
                  "index": true,
                  "name": "geoarea",
                  "type": "geoshape"
                }
              ]
            },
            "geojson": {
              "dynamic": false,
              "enabled": true,
              "fields": [
                {
                  "include_in_all": true,
                  "index": true,
                  "name": "geojson",
                  "type": "geoshape"
                }
              ]
            },
            "name": {
              "dynamic": false,
              "enabled": true,
              "fields": [
                {
                  "analyzer": "keyword",
                  "include_in_all": true,
                  "index": true,
                  "name": "name",
                  "store": true,
                  "type": "text"
                }
              ]
            }
          }
        }
      }
    },
    "store": {
      "indexType": "scorch",
      "segmentVersion": 15
    }
  },
  "sourceParams": {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If viewed in the UI:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-geojson-mod-index-full.png" alt="fts geojson mod index full" width="600">
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
