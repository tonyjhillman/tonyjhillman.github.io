<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>cbq: The Command Line Shell for SQL++ | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="cbq is a comprehensive command line shell for SQL++.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/tools/cbq-shell.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/tools/pages/cbq-shell.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb"><a href="../n1ql/query.html">Query</a></li>
<li class="crumb"><a href="tools-ref.html">Query Tools</a></li>
<li class="crumb"><a href="cbq-shell.html">cbq: The Command Line Shell for SQL++</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbq: The Command Line Shell for SQL++</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
cbq is a comprehensive command line shell for SQL++.
It is a powerful, developer friendly tool that enables you to query and update data from Couchbase Server.
The cbq shell enables you to perform all the operations that are supported by the Query REST API and more, such as additional scripting functionality.
</blockquote>
</div>
<div class="paragraph">
<p>The cbq shell executable, <code class="cmd">cbq</code>, is available in the Couchbase Server installation directory.</p>
</div>
<div class="paragraph">
<p>The cbq shell interface accepts both shell commands as well as SQL++ commands.
All the cbq shell commands start with a back-slash (\).
If the command does not start with a back-slash (\), the cbq shell interprets the command as a SQL++ command.</p>
</div>
<div class="paragraph">
<p>When starting the cbq shell you can provide a set of command line options.
If no options are present then it assumes default values for expected options.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The cbq shell commands are case insensitive.
However, the command line options are case sensitive.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For the complete list of command line options and shell commands, refer to <a href="#table_a3h_rhz_dw">Table 1</a> and <a href="#table_htk_hgc_fw">Table 2</a>.</p>
</div>
<div class="paragraph">
<p>The cbq shell enables you to manipulate parameters based on the REST API.
See <a href="#cbq-parameter-manipulation">Parameter Manipulation</a> for details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-cbq-shell"><a class="anchor" href="#running-the-cbq-shell"></a>Running the cbq Shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run <code class="cmd">cbq</code> on the local host:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to a Couchbase Server node that has the query service enabled.</p>
</li>
<li>
<p>Open a command window.</p>
</li>
<li>
<p>Change to the Couchbase tools directory.</p>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_linux"></a>Linux</p>
</li>
<li>
<p><a id="tabset1_macos"></a>macOS</p>
</li>
<li>
<p><a id="tabset1_microsoft-windows"></a>Microsoft Windows</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_linux">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd /opt/couchbase/bin</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_macos">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd /Applications/Couchbase\ Server.app/Contents/Resources/couchbase-core/bin</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_microsoft-windows">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; cd C:\Program Files\Couchbase\Server\bin</code></pre>
</div>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Run the following command to connect to the local query node and start the interactive query shell:</p>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_linux-macos"></a>Linux / macOS</p>
</li>
<li>
<p><a id="tabset2_microsoft-windows"></a>Microsoft Windows</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_linux-macos">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_microsoft-windows">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; cbq</code></pre>
</div>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="executing-a-single-command"><a class="anchor" href="#executing-a-single-command"></a>Executing a Single Command</h3>
<div class="paragraph">
<p>You can use the <code class="param">--script</code> option to execute a single SQL++ query and exit the shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -u Administrator -p password -e "http://localhost:8091" \
--script="SELECT * FROM \`travel-sample\`.inventory.airline LIMIT 1;"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.

Path to history file for the shell : ~/.cbq_history

SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;
{
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="support-for-multi-line-queries"><a class="anchor" href="#support-for-multi-line-queries"></a>Support for Multi-line Queries</h3>
<div class="paragraph">
<p>The cbq shell supports multi-line queries by default, enabling you to enter a query over multiple lines.
When entering a query, you can hit <kbd>Enter</kbd> without specifying a semi-colon (<code>;</code>) at the end of the line to move the cursor to the next line.
The prompt <code>&gt;</code> indicates that the shell is in multi-line mode.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; SELECT *
   &gt; FROM `travel-sample`.inventory.airline
   &gt; LIMIT 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you&#8217;re done, use a semi-colon <code>;</code> to indicate the end of the query, and then press <kbd>Enter</kbd> to execute the query.</p>
</div>
</div>
<div class="sect2">
<h3 id="handling-comments"><a class="anchor" href="#handling-comments"></a>Handling Comments</h3>
<div class="paragraph">
<p>You can add comments in your query by preceding the comment with a <code>&num;</code> or <code>--</code>.
The cbq shell interprets a line that starts with <code>&num;</code> or <code>--</code> as a comment, logs the line into history, and returns a new prompt.
No other action is taken.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; SELECT *
   &gt; #This is the first comment
   &gt; FROM `travel-sample`.inventory.airline
   &gt; --This is the second comment
   &gt; LIMIT 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if a comment exists within a statement, it is considered as part of the SQL++ command.
If the cbq shell encounters a block comment (enclosed between <code>/*</code> ... <code>*/</code>) within a statement, it sends the block comment to the query service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; SELECT * FROM `travel-sample`.inventory.airline /* Block comment */ LIMIT 1;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="file-based-operations"><a class="anchor" href="#file-based-operations"></a>File Based Operations</h3>
<div class="paragraph">
<p>The cbq shell can execute SQL++ and shell commands contained in files using file-based commands and options.
See <a href="#cbq-file-based-ops">File Based Operations</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="history"><a class="anchor" href="#history"></a>History</h3>
<div class="paragraph">
<p>The <code class="cmd">cbq</code> shell stores the history for every session.
All the commands executed in a session are stored in history.
By default, history is stored in <em class="path">~/.cbq_history</em>.
You can change the name of the file using the SET command to set the predefined parameter <code class="var">HISTFILE</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET HISTFILE filename;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, all the commands are stored in the specified file.
You can scroll through history and retrieve the commands from history using the scrolling arrow keys.
Once the query is on the command prompt, you can edit it before executing the updated query.</p>
</div>
</div>
<div class="sect2">
<h3 id="exit-status"><a class="anchor" href="#exit-status"></a>Exit Status</h3>
<div class="paragraph">
<p>The cbq shell returns the exit status 0 for successful exit with no errors and 1 if an error was encountered before exiting.</p>
</div>
</div>
<div class="sect2">
<h3 id="exit-on-error"><a class="anchor" href="#exit-on-error"></a>Exit On Error</h3>
<div class="paragraph">
<p>When you specify the argument <code>--exit-on-error</code>, the cbq shell checks the result returned after executing the query for any error and exits when the first error is encountered.</p>
</div>
</div>
<div class="sect2">
<h3 id="help"><a class="anchor" href="#help"></a>Help</h3>
<div class="paragraph">
<p>Help displays the help information for the shell commands and for the general usage of cbq.
Use the help option when bringing up the shell to display the information for all available options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -h
$ ./cbq --help</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code class="cmd">\HELP</code> shell command during a session to display information for specific shell commands.
If you specify one or more commands, the shell displays the usage information for the specified commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \HELP command-name;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not specify a command, the cbq shell lists all the commands for which syntax help is available.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \HELP;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="available-command-line-options-and-shell-commands"><a class="anchor" href="#available-command-line-options-and-shell-commands"></a>Available Command Line Options and Shell Commands</h2>
<div class="sectionbody">
<table id="table_a3h_rhz_dw" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Command Line Options for cbq Shell</caption>
<colgroup>
<col>
<col>
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Arguments</th>
<th class="tableblock halign-left valign-top">Description and Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-engine"></a>
<code>-e</code></p>
<p class="tableblock"><code>--engine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (url)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The connection string consists of a protocol scheme, followed by a host, and optionally a port number to connect to the query service (8093) or the Couchbase cluster (8091).</p>
</div>
<div class="paragraph">
<p>For more details, refer to <a href="#cbq-connect-to-cluster">Connecting to the Cluster or Query Node</a>.</p>
</div>
<div class="paragraph">
<p>Shell command: <a href="#cbq-connect">\CONNECT</a></p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>http://localhost:8091</code></p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e couchbase://localhost</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --engine http://localhost:8091</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://localhost:8091</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://[fd63:6f75:6368:1075:816:3c1d:789b:bc4]:8091</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.
Path to history file for the shell : /Users/myuser1/.cbq_history
cbq&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-no-engine"></a>
<code>-ne</code></p>
<p class="tableblock"><code>--no-engine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnote" id="_footnote_boolean">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When specified, the cbq shell does not connect to any query service.
You must explicitly connect to a query service using the <a href="#cbq-connect">\CONNECT</a> shell command.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>false</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --no-engine</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-ncfg"></a>
<code>-ncfg</code></p>
<p class="tableblock"><code>--networkconfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (<code>auto</code>, <code>default</code>, <code>external</code>)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to connect to a node&#8217;s principal or alternate address.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>auto</code>&#8201;&#8212;&#8201;Select the principal address or alternate address automatically, depending on the input IP.</p>
</li>
<li>
<p><code>default</code>&#8201;&#8212;&#8201;Use the principal address.</p>
</li>
<li>
<p><code>external</code>&#8201;&#8212;&#8201;Use the alternate addresses.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>auto</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -ncfg default -e http://localhost:8091</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-quiet"></a>
<code>-q</code></p>
<p class="tableblock"><code>--quiet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When specified, disables the startup connection message for the cbq shell.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>false</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -q -e http://localhost:8091</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-analytics"></a>
<code>-a</code></p>
<p class="tableblock"><code>--analytics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only applicable when connecting to the Analytics Service.
When specified, if you are connecting to a cluster, cbq automatically discovers and connects to an Analytics node.
This option also switches on <a href="#opt-batch">batch mode</a>.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>false</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --analytics</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-batch"></a>
<code>-b</code></p>
<p class="tableblock"><code>--batch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (<code>on</code>, <code>off</code>)  <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This option is available only with the Analytics Service.
When specified, cbq sends the queries to server only when you hit EOF or \ to indicate the end of the batch input.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>off</code></p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --batch</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also set the batch mode in the interactive session using the <a href="#cbq-set">\SET</a> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \set batch on;
cbq&gt; \set batch off;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-timeout"></a>
<code>-t</code></p>
<p class="tableblock"><code>--timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (duration)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets the query timeout parameter.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>0ms</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://localhost:8091 --timeout="1s"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-user"></a>
<code>-u</code></p>
<p class="tableblock"><code>--user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies a single user name to log in to Couchbase.
When used by itself, without the <code>-p</code> option to specify the password, you will be prompted for the password.</p>
</div>
<div class="paragraph">
<p>This option requires administration credentials and you cannot switch the credentials during a session.</p>
</div>
<div class="paragraph">
<p>Couchbase recommends using the <code>-u</code> and <code>-p</code> option if your password contains special characters such as #, $, %, &amp;, (,), or '.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://localhost:8091 -u=Administrator</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>Enter Password:</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-password"></a>
<code>-p</code></p>
<p class="tableblock"><code>--password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the password for the given user name.
You cannot use this option by itself.
It must be used with the -u option to specify the user name.</p>
</div>
<div class="paragraph">
<p>This option requires administration credentials and you cannot switch the credentials during a session.</p>
</div>
<div class="paragraph">
<p>Couchbase recommends using the <code>-u</code> and <code>-p</code> option if your password contains special characters such as #, $, %, &amp;, (,), or '.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://localhost:8091 -u=Administrator -p=password</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-credentials"></a>
<code>-c</code></p>
<p class="tableblock"><code>--credentials</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specify the login credentials in the form of <code class="var">username</code>:<code class="var">password</code>.
You can specify credentials for different keyspaces by separating them with a comma.</p>
</div>
<div class="paragraph">
<p>Shell command: <a href="#cbq-set">\SET</a> <code>-creds</code></p>
</div>
<div class="paragraph">
<p>REST API: <code>-creds</code> parameter</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://localhost:8091 -c=travel-sample:password,Administrator:password</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-version"></a>
<code>-v</code></p>
<p class="tableblock"><code>--version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When specified, provides the version of the cbq shell.
To display the query engine version of Couchbase Server (this is not the same as the version of Couchbase Server itself), use one of the following SQL++ queries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">select version();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">select min_version();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Shell command: <a href="#cbq-version">\VERSION</a></p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>false</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --version</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>SHELL VERSION  : 2.0

Use {sqlpp} queries select version(); or select min_version(); to display server version.</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-help"></a>
<code>-h</code></p>
<p class="tableblock"><code>--help</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides help for the command line options.</p>
</div>
<div class="paragraph">
<p>Shell command: <a href="#cbq-help">\HELP</a></p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --help</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-script"></a>
<code>-s</code></p>
<p class="tableblock"><code>-script</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides a single command mode to execute a query from the command line.</p>
</div>
<div class="paragraph">
<p>You can also use multiple <code>-s</code> options on the command line.
If one of the commands is incorrect, an error is displayed for that command and cbq continues to execute the remaining commands.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -u Administrator -p password -s="SELECT * FROM \`travel-sample\`.inventory.airline LIMIT 1;"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -s="\SET v 1" -s="\SET b 2" -s="\PUSH b3" -s="\SET b 5" -s="\SET" -ne</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>Path to history file for the shell : ~/.cbq_history

 \SET v 1
 \SET b 2
 \PUSH b3
 ERROR 139 : Too few input arguments to command.
 \SET b 5
 \SET

 Query Parameters :
 Named Parameters :
 User Defined Session Parameters :
 Predefined Session Parameters :
 Parameter name : histfile
 Value : [".cbq_history"]
 Parameter name : batch
 Value : ["off"]
 Parameter name : quiet
 Value : [false]
 Parameter name : v
 Value : [1]
 Parameter name : b
 Value : [5]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-file"></a>
<code>-f</code></p>
<p class="tableblock"><code>--file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (path)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides an input file which contains all the commands to be run.</p>
</div>
<div class="paragraph">
<p>Shell command: <a href="#cbq-source">\SOURCE</a></p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --file="sample.txt"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-output"></a>
<code>-o</code></p>
<p class="tableblock"><code>--output</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (path)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies an output file where the commands and their results are to be written.</p>
</div>
<div class="paragraph">
<p>If the file doesn&#8217;t exist, it is created.
If the file already exists, it is overwritten.</p>
</div>
<div class="paragraph">
<p>Shell command: <a href="#cbq-redirect">\REDIRECT</a></p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -u Administrator -p password -o="results.txt" -s="SELECT * FROM \`travel-sample\`.inventory.airline LIMIT 1;"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-pretty"></a>
<code>--pretty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether the output should be formatted with line breaks and indents.</p>
</div>
<div class="paragraph">
<p>This option is set to <code>true</code> by default.
To specify that the output should <em>not</em> be formatted with line breaks and indents, you must explicitly set this option to <code>false</code>.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>true</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -u Administrator -p password --pretty=false -s="SELECT * FROM \`travel-sample\`.inventory.airline LIMIT 1;"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-exit-on-error"></a>
<code>--exit-on-error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When specified, the cbq shell must exit when it encounters the first error.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>false</code></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --exit-on-error -f="sample.txt"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-cacert"></a>
<code>--cacert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (path)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only applicable when using an encrypted protocol scheme&#8201;&#8212;&#8201;either <em>https://</em> or <em>couchbases://</em>.</p>
</div>
<div class="paragraph">
<p>Specifies the path to the root CA certificate to verify the identity of the server.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --cacert ./root/ca.pem</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-cert"></a>
<code>--cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (path)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only applicable when using an encrypted protocol scheme&#8201;&#8212;&#8201;either <em>https://</em> or <em>couchbases://</em>.</p>
</div>
<div class="paragraph">
<p>Specifies the path to the chain certificate.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --cert ./client/client/chain.pem</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-key"></a>
<code>--key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (path)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only applicable when using an encrypted protocol scheme&#8201;&#8212;&#8201;either <em>https://</em> or <em>couchbases://</em>.</p>
</div>
<div class="paragraph">
<p>Specifies the path to the client key file.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p>none</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --key ./client/client/client.key</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="opt-skip-verify"></a>
<code>--no-ssl-verify</code> or</p>
<p class="tableblock"><code>-skip-verify</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only applicable when using an encrypted protocol scheme&#8201;&#8212;&#8201;either <em>https://</em> or <em>couchbases://</em>.</p>
</div>
<div class="paragraph">
<p>When specified, the cbq shell can skip the verification of certificates.</p>
</div>
<div class="paragraph">
<div class="title">Default</div>
<p><code>false</code></p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --no-ssl-verify -f="sample.txt"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -skip-verify https://127.0.0.1:18091</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table id="table_htk_hgc_fw" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. cbq Shell Commands</caption>
<colgroup>
<col>
<col>
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shell Command</th>
<th class="tableblock halign-left valign-top">Arguments</th>
<th class="tableblock halign-left valign-top">Description and Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-connect"></a>
<code class="cmd">\CONNECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">url</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connects cbq shell to the specified query engine or Couchbase cluster.</p>
</div>
<div class="paragraph">
<p>The connection string consists of a protocol scheme, followed by a host, and optionally a port number to connect to the query service (8093) or the Couchbase cluster (8091).</p>
</div>
<div class="paragraph">
<p>For more details, refer to <a href="#cbq-connect-to-cluster">Connecting to the Cluster or Query Node</a>.</p>
</div>
<div class="paragraph">
<p>Command Line Option: <a href="#opt-engine">-e</a> or <a href="#opt-engine">--engine</a></p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \CONNECT http://localhost:8093;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \CONNECT http://[fd63:6f75:6368:1075:816:3c1d:789b:bc4]:8091;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-disconnect"></a>
<code class="cmd">\DISCONNECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Disconnects the cbq shell from the query service or cluster endpoint.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \DISCONNECT;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre> Couchbase query shell not connected to any endpoint.
 Use \CONNECT command to connect.</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-quit"></a>
<code class="cmd">\EXIT</code></p>
<p class="tableblock"><code class="cmd">\QUIT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Exits cbq shell.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \EXIT;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \QUIT;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-set"></a>
<code class="cmd">\SET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">parameter</code> <code class="var">value</code></p>
<p class="tableblock"><code class="var">parameter</code> = <code class="var">prefix</code> : <code class="var">variable name</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets the top most value of the stack for the given variable with the specified value.</p>
</div>
<div class="paragraph">
<p>Variables can be of the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query parameters</p>
</li>
<li>
<p>Session variables</p>
</li>
<li>
<p>User-defined</p>
</li>
<li>
<p>Pre-defined and named parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the <code class="cmd">\SET</code> command is used without any arguments, it displays the values for all the parameters of the current session.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -args [5, "12-14-1987"];</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -args [6,7];</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-push"></a>
<code class="cmd">\PUSH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">parameter</code> <code class="var">value</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Pushes the specified value on to the given parameter stack.</p>
</div>
<div class="paragraph">
<p>When the <code class="cmd">\PUSH</code> command is used without any arguments, it copies the top element of every variable&#8217;s stack, and then pushes that copy to the top of the respective variable&#8217;s stack.</p>
</div>
<div class="paragraph">
<p>While each variable stack grows by 1, the previous values are preserved.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \PUSH -args  [8];</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \PUSH;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Check variable stack</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre> Query Parameters :
 Parameter name : args
 Value : [[6,7] [8] [8]]
...</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-unset"></a>
<code class="cmd">\UNSET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">parameter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Deletes or resets the entire stack for the specified parameter.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \UNSET -args;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre> Query Parameters :
 ...</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-pop"></a>
<code class="cmd">\POP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">parameter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Pops the top most value from the specified parameter&#8217;s stack.</p>
</div>
<div class="paragraph">
<p>When the <code class="cmd">\POP</code> command is used without any arguments, it pops the top most value of every variable&#8217;s stack.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \POP -args;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre> Query Parameters :
 Parameter name : args
 Value : [[6,7] [8]]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-alias"></a>
<code class="cmd">\ALIAS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">shell-command</code> or <code class="var">n1ql-statement</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Creates a command alias for the specified cbq shell command or SQL++ statement.
You can then execute the alias using <code>\\alias-name;</code>.</p>
</div>
<div class="paragraph">
<p>When the <code class="cmd">\ALIAS</code> command is used without any arguments, it lists all the available aliases.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS travel-limit1 SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>serverversion  select version()
travel-limit1  SELECT * FROM `travel-sample`.inventory.airline LIMIT 1</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Execute alias</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \\serverversion;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "requestID": "ef63f01b-f159-437f-a4df-28d6145fa3c2",
    "signature": {
        "$1": "string"
    },
    "results": [
        {
            "$1": "7.0.0-N1QL"
        }
    ],
    "status": "success",
    "metrics": {
        "elapsedTime": "14.54962ms",
        "executionTime": "13.164635ms",
        "resultCount": 1,
        "resultSize": 34,
        "serviceLoad": 12
    }
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-unalias"></a>
<code class="cmd">\UNALIAS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">alias-name</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Deletes the specified alias.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \UNALIAS travel-limit1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>serverversion  select version()</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-echo"></a>
<code class="cmd">\ECHO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">args</code></p>
<p class="tableblock">where <code class="var">args</code> can be parameters, aliases, or any input.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the input is a parameter, this command echoes (displays) the value of the parameter.
The parameter must be prefixed according to its type.
See <a href="#table_ltk_c5s_5v">Table 3</a> for details.</p>
</div>
<div class="paragraph">
<p>If the input is not a parameter, the command echoes the statement as is.</p>
</div>
<div class="paragraph">
<p>If the input is an alias, the command displays the value of an alias command.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ECHO -$r;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ECHO \\serverversion;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>select version()</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-version"></a>
<code class="cmd">\VERSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the version of the client shell.</p>
</div>
<div class="paragraph">
<p>Command Line Option: <a href="#opt-version">-v</a> or <a href="#opt-version">--version</a></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \VERSION;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre> SHELL VERSION  : 2.0</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-help"></a>
<code class="cmd">\HELP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">command</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the help information for the specified command.
When used without any arguments, it lists all the commands supported by the cbq shell.</p>
</div>
<div class="paragraph">
<p>Command Line Option: <a href="#opt-help">-h</a> or <a href="#opt-help">--help</a></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \HELP ECHO;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre>\ECHO args ...
Echo the input value. args can be a name (a prefixed-parameter), an alias (command alias) or
a value (any input statement).
Example :
\ECHO -$r ;
\ECHO \\tempalias;</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-copyright"></a>
<code class="cmd">\COPYRIGHT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the copyright, attributions, and distribution terms.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \COPYRIGHT;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-source"></a>
<code class="cmd">\SOURCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">input-file</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads and executes the commands from a file.
Multiple commands in the input file must be separated by <code>;</code> <code class="var">&lt;newline&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Command Line Option: <a href="#opt-file">-f</a> or <a href="#opt-file">--file</a></p>
</div>
<div class="paragraph">
<p>For example, <em class="path">sample.txt</em> contains the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;
\ECHO this;
#This is a comment;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SOURCE sample.txt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-redirect"></a>
<code class="cmd">\REDIRECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="var">filename</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Redirects the output of all the commands to the specified file until the cbq shell receives the <code class="cmd">\REDIRECT OFF</code> command.
By default, the file is created in the directory that you were in when you started the cbq shell.
You can specify a different location using relative paths.</p>
</div>
<div class="paragraph">
<p>If the file doesn&#8217;t exist, it is created.
If the file already exists, it is overwritten.
You can append redirected output to an existing file using <a href="#file-append-mode">File Append Mode</a>.</p>
</div>
<div class="paragraph">
<p>Command Line Option:  <a href="#opt-output">-o</a> or <a href="#opt-output">--output</a></p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \REDIRECT temp_out.txt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="cbq-redirect-off"></a>
<code class="cmd">\REDIRECT OFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Redirects the output of subsequent commands from a custom file to standard output (os.stdout).</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \REDIRECT OFF;</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="cbq-connect-to-cluster"><a class="anchor" href="#cbq-connect-to-cluster"></a>Connecting to the Cluster or Query Node</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can connect the cbq shell to Couchbase Server either through the query service or through the cluster endpoint.
There are two ways to establish a connection:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using an option on startup:</p>
<div class="listingblock">
<div class="content">
<pre>-e &lt;url to query engine or Couchbase cluster&gt;
--engine=&lt;url to query engine or Couchbase cluster&gt;</pre>
</div>
</div>
</li>
<li>
<p>Using a shell command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \CONNECT url;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code class="var">url</code> may contain up to three components: the protocol scheme, the host, and a port number.
The URL is optional and if it is not specified, the default URL <code>http://localhost:8091</code> is used.
An error is thrown if the URL is invalid.</p>
</div>
<div class="paragraph">
<p>The cbq shell supports the <em class="path">http://</em>, <em class="path">https://</em>, <em class="path">couchbase://</em> and <em class="path">couchbases://</em> protocol schemes.
The <em class="path">https://</em> and <em class="path">couchbases://</em> protocol schemes are encrypted.
For more details, refer to <a href="#cbq-encrypted">Using an Encrypted Connection</a>.</p>
</div>
<div class="paragraph">
<p>The host may be the IP address or hostname of any node in the cluster, as cbq will automatically discover the query nodes.
The cbq shell supports both IPV4 and IPV6 addresses.</p>
</div>
<div class="paragraph">
<p>The <em class="path">couchbase://</em> and <em class="path">couchbases://</em> protocol schemes support the domain name service (DNS).
When using one of these protocol schemes, the host may be a domain name which is resolved using DNS.
For example, this enables you to connect to a cluster or node over the internet.</p>
</div>
<div class="paragraph">
<p>Note that you must use the encrypted <em class="path">couchbases://</em> protocol scheme to connect to a cluster or node deployed in Couchbase Capella.</p>
</div>
<div class="paragraph">
<p>You may optionally specify the port when using the <em class="path">http://</em> or <em class="path">https://</em> protocol schemes.
When connecting to the query service, use the query port 8093, or 18093 for an encrypted connection.
When connecting to the cluster, you don&#8217;t need to specify the port as the connection uses round robin to find a query service to connect to.
If you want to specify a port, use the admin port 8091, or 18091 for an encrypted connection.</p>
</div>
<div class="paragraph">
<p>You cannot specify the port when using the <em class="path">couchbase://</em> or <em class="path">couchbases://</em> protocol schemes.</p>
</div>
<div class="paragraph">
<p>You can close the connection with an existing node or cluster without exiting the shell at any given time during the session using the <code class="cmd">\DISCONNECT;</code> command.
If the shell is not connected to any endpoint, an error with a message that the shell is not connected to any instance is thrown.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -e http://localhost:8091 -u Administrator -p password
Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.

Path to history file for the shell : ~/.cbq_history

cbq&gt; \DISCONNECT;
Couchbase query shell not connected to any endpoint. Use \CONNECT command to connect.

cbq&gt; \CONNECT http://127.0.0.1:8091;
Connected to : http://127.0.0.1:8091. Type Ctrl-D or \QUIT to exit.

cbq&gt; \EXIT;

$ ./cbq -e http://127.0.0.1:8091 -u Administrator -p password
Connected to : http://127.0.0.1:8091/. Type Ctrl-D or \QUIT to exit.

Path to history file for the shell : ~/.cbq_history
cbq&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="bringing-up-an-unconnected-instance"><a class="anchor" href="#bringing-up-an-unconnected-instance"></a>Bringing Up an Unconnected Instance</h3>
<div class="paragraph">
<p>You can bring up the shell without connecting to any query service or cluster endpoint by using the <code class="opt">-ne</code> or <code class="opt">--no-engine</code> option.
After starting cbq without any service, you can connect to a specific endpoint using the <code class="cmd">CONNECT</code> command.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -ne
Path to history file for the shell : ~/.cbq_history

cbq&gt; \CONNECT http://Administrator:password@localhost;
Connected to : http://Administrator:password@localhost:8091. Type Ctrl-D or \QUIT to exit.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exiting-the-cbq-shell"><a class="anchor" href="#exiting-the-cbq-shell"></a>Exiting the cbq Shell</h3>
<div class="paragraph">
<p>You can exit the cbq shell by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>D</kbd></span> or by using one of the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \EXIT;
cbq&gt; \QUIT;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you run the exit command, the cbq shell first saves the history, closes existing connections, saves the current session in a session file, resets all environment variables, and then closes the shell liner interface.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -u Administrator -p password
Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.
Path to history file for the shell : ~/.cbq_history

cbq&gt; SELECT name FROM `travel-sample`.inventory.airline LIMIT 1;
{
    "requestID": "59d1c699-11a2-47c6-b4d0-4a7de1d15a3c",
    "signature": {
        "name": "json"
    },
    "results": [
    {
        "name": "40-Mile Air"
    }
    ],
    "status": "success",
    "metrics": {
        "elapsedTime": "13.514441ms",
        "executionTime": "13.355058ms",
        "resultCount": 1,
        "resultSize": 37,
        "serviceLoad": 12
    }
}

cbq&gt; \EXIT;
$</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-a-secure-keyspace"><a class="anchor" href="#accessing-a-secure-keyspace"></a>Accessing a Secure Keyspace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your keyspace has a password, you can pass the keyspace name and keyspace password like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -engine="http://&lt;keyspacename&gt;:&lt;keyspacepassword&gt;@localhost:8091/"</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the 'travel-sample' keyspace, if you add a password to it of <em>w1fg2Uhj89</em> (as by default it has none), the command to start <code class="cmd">cbq</code> would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -engine="http://travel-sample:w1fg2Uhj89@localhost:8091/"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These commands execute successfully only if you have loaded sample bucket 'travel-sample' either at install or from the Settings menu in the web UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to access all of the keyspaces in the same cbq session, you would pass in the Administrator username and password instead of the keyspace level.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -engine="http://Administrator:password@localhost:8091/"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-single-cred"><a class="anchor" href="#cbq-single-cred"></a>Providing Single User Credentials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can pass a single user name credential to the cbq shell on startup using the command line options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-u=username
--user=username</pre>
</div>
</div>
<div class="paragraph">
<p>The shell then prompts you for a password.
You can also provide a single password credential using the <code>-p</code> option.
You cannot use this option by itself.
It must be used with the <code>-u</code> option to specify the user name that the password is associated with.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-p=password
--password=password</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -u=Administrator
Enter Password:
Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.

$ ./cbq -e http://localhost:8091 -u=Administrator -p=password
Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.
cbq&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For information on passing the user name and password credentials using other mechanisms, see <a href="#pass-cred-shell-cmd">Passing Credentials Using the SET Shell Command</a> and <a href="#pass-cred-rest-api">Passing Credentials Using REST API</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-multiple-creds"><a class="anchor" href="#cbq-multiple-creds"></a>Providing Multiple Credentials for Authorization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The cbq shell supports self-signed certificates for encrypting communication between clusters.</p>
</div>
<div class="paragraph">
<p>Using the cbq shell, you can set the credentials for different users on startup or by using the SET shell commands to set the credentials query parameter.
You can also use this to provide authentication credentials for multiple SASL buckets per session.
Depending on the type of credential being set, there are multiple possible values for the credentials query parameter.</p>
</div>
<div class="paragraph">
<p>To set the credentials for different users on startup, use one of the following options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-c=list-of-creds
--credentials=list-of-creds</pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="var">list-of-creds</code> can take either one or multiple credentials.
The credentials consist of an identity and a password separated by a colon <code>:</code>.
To specify multiple credentials, append all the user names and passwords to the same credentials array.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-c=travel-sample:pwd1,beer-sample:pwd2</pre>
</div>
</div>
<div class="paragraph">
<p>For information on passing a single user name credential to the cbq shell, see <a href="#cbq-single-cred">Providing Single User Credentials</a>.</p>
</div>
<div class="sect2">
<h3 id="pass-cred-shell-cmd"><a class="anchor" href="#pass-cred-shell-cmd"></a>Passing Credentials Using the SET Shell Command</h3>
<div class="paragraph">
<p>You can provide the credential types using the SET command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The credentials are set for the shell session and not on a per query basis.
You can use the SET, PUSH, POP and UNSET commands to reset the credentials during a session.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To pass authentication credentials per query, set the query parameter to a new value using the SET shell command before executing the query.</p>
</div>
<div class="paragraph">
<p>You can also switch between users and change credentials during a session.
To do so, set the <code class="param">-creds</code> query parameter for the session using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -creds travel-sample:b1, session:s1;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pass-cred-rest-api"><a class="anchor" href="#pass-cred-rest-api"></a>Passing Credentials Using Query REST API</h3>
<div class="paragraph">
<p>You can use query REST API to pass credentials from clients.</p>
</div>
<div class="paragraph">
<p>For SASL buckets, you can pass the credentials as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[  {
     "user":"travel-sample",
     "pass":"password"
   }  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using the Administrator credentials:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[  {
        "user":"Administrator",
        "pass":"password"
   }  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>For multiple SASL protected buckets, you can pass an array of authentication credentials:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[  {
        "user":"beer-sample",
        "pass":"password1"
        },
        {
        "user":"travel-sample",
        "pass":"password2"
   }  ]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="displaying-the-credentials"><a class="anchor" href="#displaying-the-credentials"></a>Displaying the Credentials</h3>
<div class="paragraph">
<p>You can display the credentials for the current session using the <a href="#cbq-echo">ECHO</a> shell command.
This command displays only the user names (and not the passwords).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ECHO -creds;

Administrator:*</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also display a full list of variables using the SET command specified without any arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET;
Query Parameters ::
Parameter name : timeout Value  ["3ms" "4s"]

Named Parameters ::
Parameter name : r Value  [9.5 9.5]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-encrypted"><a class="anchor" href="#cbq-encrypted"></a>Using an Encrypted Connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can connect to the cluster or node with an encrypted protocol scheme&#8201;&#8212;&#8201;that is, either <em>https://</em> or <em>couchbases://</em>.
To do this, you can provide the root CA certificate, the chain certificate, and the client key file using the <a href="#opt-cacert">--cacert</a>, <a href="#opt-cert">--cert</a>, and <a href="#opt-key">--key</a> options.
You can use the <a href="#opt-skip-verify">--no-ssl-verify</a> option to skip the verification of certificates.</p>
</div>
<div class="paragraph">
<p>When connecting to a cluster or node with an encrypted protocol scheme, the default ports are 18091 and 18093.
You need not specify the port when connecting to the cluster.</p>
</div>
<div class="paragraph">
<p>You can use the encrypted <em>couchbases://</em> protocol scheme with a domain name to connect to a node or cluster deployed in Couchbase Capella.
For more details, refer to <a href="#cbq-connect-to-cluster">Connecting to the Cluster or Query Node</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-parameter-manipulation"><a class="anchor" href="#cbq-parameter-manipulation"></a>Parameter Manipulation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The cbq shell categorizes parameters into the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Named Parameters</p>
</li>
<li>
<p>REST API Parameters</p>
</li>
<li>
<p>Session or Pre-defined Parameters</p>
</li>
<li>
<p>User-defined Parameters</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="parameter-configuration"><a class="anchor" href="#parameter-configuration"></a>Parameter Configuration</h3>
<div class="paragraph">
<p>When using parameters, you can set a stack of values for each parameter.
You can either push a new value onto the stack using the PUSH command, or set the current value for a parameter using the SET command.
The SET command always modifies the top of a variable&#8217;s stack while the PUSH command adds to the stack.
When you use PUSH with no arguments, it copies the top element of every parameter&#8217;s (except the predefined parameters) stack and pushes that copy to the top of its respective stack.
As a result, each stack grows by 1, but the values are preserved.
You can then use the SET command to modify the top value.</p>
</div>
<div class="paragraph">
<p>To unset the values from a parameter&#8217;s stack, you can use the UNSET command to remove all the values from the stack and delete the corresponding parameter stack.
However, if you want to delete a single value from the settings, use the POP command.
When you use the POP command with no arguments, it pops the one value from the top of each parameter&#8217;s stack.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-variable-values"><a class="anchor" href="#setting-variable-values"></a>Setting Variable Values</h3>
<div class="paragraph">
<p>Each variable has a separate stack associated with it and the <code class="var">prefix</code> <code class="var">name</code> argument helps distinguish between the stacks.</p>
</div>
<div class="paragraph">
<p>The SET command always modifies the top value of a variable.
You can use the SET command to set different kinds of parameters: query parameter, predefined session variables, user-defined session variables and named parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET &lt;prefix&gt;&lt;name&gt; value;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code class="var">name</code> is the name of the parameter, <code class="var">value</code> is the value to be set, and <code class="var">prefix</code> is one of the following depending on the parameter type.
The cbq shell uses the prefix to differentiate between the different types of parameters.</p>
</div>
<table id="table_ltk_c5s_5v" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Prefixes for Parameters</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Prefix</th>
<th class="tableblock halign-left valign-top">Parameter Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-$</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Named parameters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predefined (built-in) session variable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User defined session variable</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Positional parameters are set using the <code class="param">-args</code> query parameter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use the cbq shell to set all the REST API settings by specifying the settings as query parameters prefixed by <code>-</code>.
As a best practice, we recommend that you save the initial set of basic parameters and their default values using the <code class="cmd">\PUSH</code> command (with no arguments).</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -$airport "SJC";
cbq&gt; \PUSH -args ["LAX", 6];
cbq&gt; \SET;
Query Parameters ::
Parameter name : args Value  [["LAX",6]]

Named Parameters ::
Parameter name : airport Value  ["SJC"]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]

cbq&gt; \PUSH -$airport "SFO";
cbq&gt; \PUSH;
cbq&gt; \SET;
Query Parameters ::
Parameter name : args Value  [["LAX",6] ["LAX",6]]

Named Parameters ::
Parameter name : airport Value  ["SJC" "SFO" "SFO"]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]

cbq&gt; \SET -args ["SFO", 8];
cbq&gt; \SET;
Query Parameters ::
Parameter name : args Value  [["LAX",6] ["SFO",8]]

Named Parameters ::
Parameter name : airport Value  ["SJC" "SFO" "SFO"]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]

cbq&gt; \POP;
cbq&gt; \SET;
Query Parameters ::
Parameter name : args Value  [["LAX",6]]

Named Parameters ::
Parameter name : airport Value  ["SJC" "SFO"]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]

cbq&gt; \POP -$airport;
cbq&gt; \SET;
Query Parameters ::
Parameter name : args Value  [["LAX",6]]

Named Parameters ::
Parameter name : airport Value  ["SJC"]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]

cbq&gt; \UNSET -$airport;
cbq&gt; \SET;
Query Parameters ::
Parameter name : args Value  [["LAX",6]]

Named Parameters ::

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To display all the parameters defined in a session, use the SET command with no arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET;
Query Parameters ::
Parameter name : timeout Value  ["100m"]

Named Parameters ::
Parameter name : r Value  [9.5]

User Defined Session Parameters ::

Predefined Session Parameters ::
Parameter name : histfile Value  [".cbq_history"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the available predefined session variables.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Predefined Session Variables</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Possible Values</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HISTFILE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valid file name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the file name to store the command history.
By default the file is saved in the user&#8217;s home directory.</p>
<p class="tableblock">Default: <em class="path">.cbq_history</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="handling-named-parameters"><a class="anchor" href="#handling-named-parameters"></a>Handling Named Parameters</h3>
<div class="paragraph">
<p>Use the \SET command to define named parameters.
For each named parameter, prefix the variable name with <code>-$</code>.
The following example creates named parameters <code>r</code> and <code>date</code> with values 9.5 and "1-1-2016" respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -$r 9.5;
cbq&gt; \SET -$date "1-1-2016";</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="handling-positional-parameters"><a class="anchor" href="#handling-positional-parameters"></a>Handling Positional Parameters</h3>
<div class="paragraph">
<p>Use the SET shell command with the <code class="param">-args</code> query parameter to define positional parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -args value;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="var">value</code> contains the different values that correspond to positions within the query.
For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \SET -args [ 9.5, "1-1-2016"];</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resetting-variable-values"><a class="anchor" href="#resetting-variable-values"></a>Resetting Variable Values</h3>
<div class="paragraph">
<p>You can reset the value of a variable by either popping it or deleting it altogether.
To pop the top of a parameter&#8217;s stack use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \POP &lt;prefix&gt;&lt;name&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To pop the top of every parameter&#8217;s stack once, use the POP command without any arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \POP;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To pop all the values of a parameter&#8217;s stack and then delete the parameter, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \UNSET &lt;prefix&gt;&lt;name&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-shell-cmd-echo"><a class="anchor" href="#cbq-shell-cmd-echo"></a>Using ECHO to Display Values of Parameters and More</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ECHO command displays the current values of the parameters set for a session.
You can use it to display any input string or command aliases that have been created using the ALIAS shell command.
To display parameters, you must include their prefixes.
If not, the shell considers the parameters as generic statements and displays the parameter as is.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ECHO input ... ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code class="var">input</code> can be a parameter with prefix (<code class="var">&lt;prefix&gt;&lt;parameter-name&gt;</code>), an alias (<code class="var">\\command-alias</code>), a SQL++ statement, or a string.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ECHO hello;
hello

cbq&gt; \ECHO \\travel-alias1;
SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;

cbq&gt; \ECHO -$r;
9.5</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-shell-cmd-alias"><a class="anchor" href="#cbq-shell-cmd-alias"></a>Command Alias</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the ALIAS shell command, you can define and store aliases for commands.
This is useful when you have lengthy queries that need to be executed often.
Run the following command to define an alias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS command-alias command;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS travel-alias1 SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To run the command alias, use <code>\\command-alias</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \\travel-alias1;

{
    "requestID": "b25c84d6-7b7b-440a-a286-5027e6ecbbb5",
    "signature": {
        "*": "*"
    },
    "results": [
    {
        "airline": {
            "callsign": "MILE-AIR",
            "country": "United States",
            "iata": "Q5",
            "icao": "MLA",
            "id": 10,
            "name": "40-Mile Air",
            "type": "airline"
        }
    }
    ],
    "status": "success",
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To list all the existing aliases, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \ALIAS;
serverversion  select version()
travel-alias1  SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can delete a defined alias using the \UNLIAS command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \UNALIAS alias-name ... ;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \UNALIAS serverversion travel-alias1;

/* Check existing aliases */
cbq&gt; \ALIAS;
 ERROR 141 : Alias does not exist :</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command can take multiple arguments and deletes the defined alias for every input name.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-prepared-stmts"><a class="anchor" href="#cbq-prepared-stmts"></a>Executing Prepared Statements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the shell command to execute prepared statements.
As a pre-requisite, you must first prepare a statement using the SQL++ <a href="../n1ql/n1ql-language-reference/prepare.html" class="xref page">PREPARE</a> statement.
To execute prepared statements, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the named and positional parameters that are present in the prepared statement.</p>
</li>
<li>
<p>Prepare using the SQL++ PREPARE statement.
This can be either prepared statement or a named prepared statement.
If you do not specify a name for the prepared statement (<code>PREPARE query;</code>), a unique name is assigned.
You can use this auto-assigned name when executing the prepared statement.
If you specify a name (PREPARE <code class="var">name</code> FROM <code class="var">query</code>;), you can use this name to run the prepared statement.</p>
</li>
<li>
<p>Execute the prepared statement using the shell command:</p>
<div class="listingblock">
<div class="content">
<pre>EXECUTE name-of-prepared-stmt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="canceling-a-query"><a class="anchor" href="#canceling-a-query"></a>Canceling a Query</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can cancel a running query by using the <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span> keys.</p>
</div>
<div class="sect2">
<h3 id="connection-timeout-parameter"><a class="anchor" href="#connection-timeout-parameter"></a>Connection Timeout Parameter</h3>
<div class="paragraph">
<p>You can use the timeout parameter to limit the running time of a query.
This parameter specifies the time to wait before returning an error when executing a query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--t=value
--timeout=value</pre>
</div>
</div>
<div class="paragraph">
<p>Timeout can be specified in the following units: <code>ns</code> for nanoseconds, <code>s</code> for microseconds, <code>ms</code> for milliseconds, <code>s</code> for seconds, <code>m</code> for minutes, and <code>h</code> for hours.
Examples of valid values include "0.5s", "10ms", or "1m".</p>
</div>
<div class="paragraph">
<p>You can also the SET shell command to set this parameter.
An error is thrown if the timeout is invalid.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq --timeout="2s"

$ ./cbq -q
cbq&gt; \SET -TIMEOUT 1ms;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-file-based-ops"><a class="anchor" href="#cbq-file-based-ops"></a>File Based Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the file based commands and options, the cbq shell can execute SQL++ and shell commands contained in files.
There are two ways to accomplish this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using an option on startup:</p>
<div class="listingblock">
<div class="content">
<pre>-f=input-file
--file=input-file</pre>
</div>
</div>
<div class="paragraph">
<p>The cbq shell executes the commands present in the input file, prints them to stdout (or to a file if using redirects), and exits.</p>
</div>
</li>
<li>
<p>Using a shell command:</p>
<div class="listingblock">
<div class="content">
<pre>cbq&gt; \SOURCE input-file;</pre>
</div>
</div>
<div class="paragraph">
<p>Runs the commands present in the input file and prints the result to stdout.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consider the input file, <em class="path">sample.txt</em>, containing the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE PRIMARY INDEX ON `travel-sample`.inventory.airline USING GSI;
SELECT * from `travel-sample`.inventory.airline LIMIT 2;
SELECT callsign from `travel-sample`.inventory.airline LIMIT 3;
\HELP;</pre>
</div>
</div>
<div class="paragraph">
<p>To execute the commands contained in <em class="path">sample.txt</em> using the -f option, run <code>$./cbq -f=sample.txt</code></p>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"> Connected to : http://localhost:8091/. Type Ctrl-D or \QUIT to exit.

 Path to history file for the shell : ~/.cbq_history
CREATE PRIMARY INDEX ON `travel-sample`.inventory.airline USING GSI;
{ ...
  "results": [ ],
  ...
}
SELECT * from `travel-sample`.inventory.airline LIMIT 2;
{ ...
  "results": [ ],
  ...
}
SELECT callsign from `travel-sample`.inventory.airline LIMIT 3;
{ ...
  "results": [ ],
  ...
}
\HELP;
Help information for all shell commands.
...
$</code></pre>
</div>
</div>
<div class="paragraph">
<p>To execute the commands contained in <em class="path">sample.txt</em> using the shell command, run <code>cbq&gt; \SOURCE sample.txt;</code></p>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">CREATE PRIMARY INDEX ON `travel-sample`.inventory.airline USING GSI;
{ ...
  "results": [ ],
 ...
}
SELECT * from `travel-sample`.inventory.airline LIMIT 2;
{ ...
  "results": [ ],
  ...
}
SELECT callsign from `travel-sample`.inventory.airline LIMIT 3;
{ ...
  "results": [ ],
  ...
}
\HELP;
Help information for all shell commands.
...
cbq&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="redirecting-results-to-a-file"><a class="anchor" href="#redirecting-results-to-a-file"></a>Redirecting Results to a File</h3>
<div class="paragraph">
<p>You can redirect all the output for a session or part of a session to a specified file by using the following option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-o filename
--output=filename</pre>
</div>
</div>
<div class="paragraph">
<p>To redirect a specific set of commands during a session, you must specify the commands between <code>\REDIRECT</code> and <code>\REDIRECT OFF</code> as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \REDIRECT filename;
command-1; command-2;, ..., command-n;
cbq&gt; \REDIRECT OFF;</code></pre>
</div>
</div>
<div class="paragraph">
<p>All the commands specified after <code>\REDIRECT</code> and before <code>\REDIRECT OFF</code> are saved into the specified output file.</p>
</div>
<div class="paragraph">
<p>If the file doesn&#8217;t exist, it is created.
If the file already exists, it is overwritten.
You can append redirected output to an existing file using <a href="#file-append-mode">File Append Mode</a>.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \REDIRECT temp_output.txt;
cbq&gt; CREATE PRIMARY INDEX ON `travel-sample`.inventory.airline USING GSI;
cbq&gt; SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;
cbq&gt; \HELP;
cbq&gt; \REDIRECT OFF;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify multiple <code>\REDIRECT</code> commands.
When you do so, the output file changes to the specified files and switches back to <code class="out">stdout</code> only when you specify <code>\REDIRECT OFF</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="file-append-mode"><a class="anchor" href="#file-append-mode"></a>File Append Mode</h3>
<div class="paragraph">
<p>You can use <em>file append mode</em> to specify that cbq should append redirected output to the end of an existing file, rather than overwriting the existing file.</p>
</div>
<div class="paragraph">
<p>To use file append mode, include a plus sign <code>+</code> at the start of the output path or filename.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \REDIRECT +temp_output.txt;
cbq&gt; SELECT * FROM `travel-sample`.inventory.airline LIMIT 1;
cbq&gt; \REDIRECT OFF;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Every time you start appending to the output file, a timestamp is added to the end of the output file, followed by any redirected commands and results.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-- &lt;2021-07-30T14:48:43.661+01:00&gt; : opened in append mode

SELECT * FROM `travel-sample`.inventory.airline LIMIT 1
...</pre>
</div>
</div>
<div class="paragraph">
<p>Note that file append mode is only available with the <code>\REDIRECT</code> command within a shell session.
It is not available for the <code>-o</code> or <code>--output</code> command line option.
When you use the <code>-o</code> or <code>--output</code> command line option, the specified output file is always overwritten.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbq-server-shell-info"><a class="anchor" href="#cbq-server-shell-info"></a>Server and Shell Information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The cbq shell provides commands that convey information about the shell or cluster endpoints.</p>
</div>
<div class="sect2">
<h3 id="version"><a class="anchor" href="#version"></a>Version</h3>
<div class="paragraph">
<p>You can find the version of the client (shell) by using either the command line option to display the current version of the shell and exit, or as a shell command to print the version of the shell during the shell session.</p>
</div>
<div class="listingblock">
<div class="title">Example Using the Command-line Option</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbq -v
SHELL VERSION  : 2.0

Use {sqlpp} queries select version(); or select min_version(); to display server version.

$ ./cbq --version
SHELL VERSION  : 2.0

Use {sqlpp} queries select version(); or select min_version(); to display server version.</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Using the Shell Command</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \VERSION;
SHELL VERSION : 2.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>To display the version of the query service, use the SQL++ commands <code>SELECT version();</code> and <code>SELECT min_version();</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="copyright"><a class="anchor" href="#copyright"></a>Copyright</h3>
<div class="paragraph">
<p>You can view the copyright, attributions, and distribution terms of the command line query tool using the <code>\COPYRIGHT;</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cbq&gt; \COPYRIGHT;
Copyright (c) 2016 Couchbase, Inc. Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under the
License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
either express or implied. See the License for the specific language governing permissions
and limitations under the License.
cbq&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shortcut-keys-for-cbq-shell"><a class="anchor" href="#shortcut-keys-for-cbq-shell"></a>Shortcut Keys for cbq Shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table lists the shortcut keys used by the <code class="cmd">cbq</code> shell.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Shortcut Keys for cbq Shell</caption>
<colgroup>
<col style="width: 33.67%;">
<col style="width: 66.33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keystroke</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>A</kbd></span>, <kbd>Home</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move cursor to beginning of line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>E</kbd></span>, <kbd>End</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move cursor to end of line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>B</kbd></span>, <kbd>Left</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move cursor one character left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>F</kbd></span>, <kbd>Right</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move cursor one character right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Left</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move cursor to previous word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Right</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move cursor to next word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>D</kbd></span>, <kbd>Del</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(if line is not empty) Delete character under cursor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>D</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(if line is empty) End of File - usually quits application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reset input (create new empty prompt)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>L</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear screen (line is unmodified)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>T</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transpose previous character with current character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>H</kbd></span>, <kbd>BackSpace</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete character before cursor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>W</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete word leading up to cursor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>K</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete from cursor to end of line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>U</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete from start of line to cursor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>P</kbd></span>, <kbd>Up</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous match from history</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>N</kbd></span>, <kbd>Down</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Next match from history</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>R</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reverse Search history (<span class="keyseq"><kbd>Ctrl</kbd>+<kbd>S</kbd></span> forward, <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>G</kbd></span> cancel)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Y</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paste from Yank buffer (<span class="keyseq"><kbd>Alt</kbd>+<kbd>Y</kbd></span> to paste next yank instead)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>Tab</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Next completion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Shift</kbd>+<kbd>Tab</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(after <kbd>Tab</kbd>) Previous completion</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Source: <em class="cite">https://github.com/peterh/liner</em></p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Invoking a boolean option with no value sets the value to <code>true</code>.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Invoking this option with no value sets the value to <code>on</code>.
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span> 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
