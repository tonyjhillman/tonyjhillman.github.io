<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="499px" preserveAspectRatio="none" style="width:504px;height:499px;background:#FFFFFF;" version="1.1" viewBox="0 0 504 499" width="504px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jmn6qw9kj00c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#008080" filter="url(#f1jmn6qw9kj00c)" height="323.8002" style="stroke:#A80036;stroke-width:1.0;" width="10" x="167" y="92"/><rect fill="#00BFFF" filter="url(#f1jmn6qw9kj00c)" height="70.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="345" y="211"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="44.7999" y2="451.4001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="171.5" x2="171.5" y1="44.7999" y2="451.4001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="350" x2="350" y1="44.7999" y2="451.4001"/><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="82" x="5" y="9"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="12" y="29.9999">Application</text><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="82" x="5" y="450.4001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="12" y="471.4001">Application</text><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="99" x="122.5" y="5"/><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="99" x="118.5" y="9"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="125.5" y="29.9999">Query Engine</text><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="99" x="122.5" y="450.4001"/><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="99" x="118.5" y="454.4001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="125.5" y="475.4001">Query Engine</text><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="60" x="320" y="5"/><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="60" x="316" y="9"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="323" y="29.9999">Indexer</text><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="60" x="320" y="450.4001"/><rect fill="#FEFECE" filter="url(#f1jmn6qw9kj00c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="60" x="316" y="454.4001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="323" y="475.4001">Indexer</text><rect fill="#008080" filter="url(#f1jmn6qw9kj00c)" height="323.8002" style="stroke:#A80036;stroke-width:1.0;" width="10" x="167" y="92"/><rect fill="#00BFFF" filter="url(#f1jmn6qw9kj00c)" height="70.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="345" y="211"/><polygon fill="#A80036" points="155,88,165,92,155,96,159,92" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="161" y1="92" y2="92"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="55" y="71.7999">SELECT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="55" y="87.4">statement</text><line style="stroke:#00000000;stroke-width:1.0;" x1="177" x2="219" y1="152.8" y2="152.8"/><line style="stroke:#00000000;stroke-width:1.0;" x1="219" x2="219" y1="152.8" y2="165.8"/><line style="stroke:#00000000;stroke-width:1.0;" x1="178" x2="219" y1="165.8" y2="165.8"/><polygon points="188,161.8,178,165.8,188,169.8,184,165.8" style="stroke:#00000000;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="184" y="117">Analyze query; send scan,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="184" y="132.6">grouping and aggregation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="184" y="148.2">request</text><polygon fill="#A80036" points="333,207,343,211,333,215,337,211" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="177" x2="339" y1="211" y2="211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="184" y="190.8">Scan, grouping and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="184" y="206.4">aggregate request</text><line style="stroke:#00000000;stroke-width:1.0;" x1="355" x2="397" y1="256.2001" y2="256.2001"/><line style="stroke:#00000000;stroke-width:1.0;" x1="397" x2="397" y1="256.2001" y2="269.2001"/><line style="stroke:#00000000;stroke-width:1.0;" x1="356" x2="397" y1="269.2001" y2="269.2001"/><polygon points="366,265.2001,356,269.2001,366,273.2001,362,269.2001" style="stroke:#00000000;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="362" y="236">Execute scan, grouping</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="362" y="251.6">and aggregation</text><polygon fill="#A80036" points="188,277.2001,178,281.2001,188,285.2001,184,281.2001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="182" x2="349" y1="281.2001" y2="281.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="199" y="295.2001">Projection of results from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="233" y="310.8001">scan, grouping and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="276" y="326.4001">aggregation</text><line style="stroke:#00000000;stroke-width:1.0;" x1="177" x2="219" y1="390.8001" y2="390.8001"/><line style="stroke:#00000000;stroke-width:1.0;" x1="219" x2="219" y1="390.8001" y2="403.8001"/><line style="stroke:#00000000;stroke-width:1.0;" x1="178" x2="219" y1="403.8001" y2="403.8001"/><polygon points="188,399.8001,178,403.8001,188,407.8001,184,403.8001" style="stroke:#00000000;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="184" y="355.0001">Perform group merge, if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="184" y="370.6001">required; project the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="184" y="386.2001">results</text><polygon fill="#A80036" points="59,411.8001,49,415.8001,59,419.8001,55,415.8001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="53" x2="171" y1="415.8001" y2="415.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="70" y="429.8001">Result projection</text><!--MD5=[5560c79d9fcc03ee96129aac4f981d8d]
@startuml
skinparam maxMessageSize 150
skinparam responseMessageBelowArrow true
skinparam sequenceMessageAlign direction

' title Query Execution with Grouping and Aggregation Pushdown

participant Application

collections "Query Engine" as Query
collections "Indexer" as Index

Application -> Query: SELECT\nstatement
activate Query #teal

Query -[#transparent]> Query: Analyze query; send scan, grouping and aggregation request
Query -> Index: Scan, grouping and aggregate request
activate Index #deepskyblue

Index -[#transparent]> Index: Execute scan, grouping and aggregation
Index -> Query: Projection of results from scan, grouping and aggregation
deactivate Index

Query -[#transparent]> Query: Perform group merge, if required; project the results
Query -> Application: Result projection
deactivate Query
@enduml

@startuml
skinparam maxMessageSize 150
skinparam responseMessageBelowArrow true
skinparam sequenceMessageAlign direction


participant Application

collections "Query Engine" as Query
collections "Indexer" as Index

Application -> Query: SELECT\nstatement
activate Query #teal

Query -[#transparent]> Query: Analyze query; send scan, grouping and aggregation request
Query -> Index: Scan, grouping and aggregate request
activate Index #deepskyblue

Index -[#transparent]> Index: Execute scan, grouping and aggregation
Index -> Query: Projection of results from scan, grouping and aggregation
deactivate Index

Query -[#transparent]> Query: Perform group merge, if required; project the results
Query -> Application: Result projection
deactivate Query
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>