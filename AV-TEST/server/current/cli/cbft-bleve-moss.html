<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>cbft-bleve for Moss Indexes | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="The &lt;code&gt;cbft-bleve&lt;/code&gt; tool supports commands that return information on &lt;em&gt;Moss&lt;/em&gt; index partitions.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/cli/cbft-bleve-moss.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/cli/pages/cbft-bleve-moss.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="cli-intro.html">CLI Reference</a></li>
<li class="crumb"><a href="cbft-bleve.html">cbft-bleve</a></li>
<li class="crumb"><a href="cbft-bleve-moss.html">cbft-bleve: Moss Indexes</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbft-bleve for Moss Indexes</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The <code>cbft-bleve</code> tool supports commands that return information on <em>Moss</em> index partitions.
</blockquote>
</div>
<div class="paragraph">
<p>The top-level syntax for <code>cbft-bleve</code> is provided at <a href="cbft-bleve.html" class="xref page">cbft-bleve</a>.
All commands except <a href="cbft-bleve-scorch.html" class="xref page">scorch</a> and <a href="cbft-bleve-zap.html" class="xref page">zap</a> apply to <em>Moss</em> indexes, and are described on this page.
Examples are for Linux.</p>
</div>
<div class="paragraph">
<p>Note that the <code>check</code>, <code>count</code>, <code>dictionary</code>, <code>fields</code>, <code>mapping</code>, <code>query</code>, and <code>registry</code> command-values can also be used to return information on <em>Scorch</em> index partitions &#8212; other than on <em>CentOS</em> and <em>Ubuntu</em>: the syntax and required path-format is in each case identical to that demonstrated for <em>Moss</em> index partitions on this page.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="check"><a class="anchor" href="#check"></a>check</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>check</code> command checks for consistency the contents of a specified index partition.
Its syntax is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve check [index-path] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code>, which is mandatory, is the filesystem path to the index-partition.</p>
</div>
<div class="paragraph">
<p>The value of the optional <code>flags</code> parameter can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-c</code>, <code>--count</code> <code>int</code>.
The maximum number of terms to which the command is to be applied, per field.
The default is <code>100</code>.</p>
</li>
<li>
<p><code>-f</code>, <code>--field</code> <code>string</code>.
A field to which command-execution should be restricted.
The default is for the command to be executed on <em>all</em> fields.</p>
</li>
<li>
<p><code>-h</code>, <code>--help</code>.
Prints help text to standard output.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that <code>field</code> is synonymous with <em>key</em>; and <code>term</code> with <em>value</em>.
Therefore, for a <code>field</code> named <code>country</code>, the associated <code>terms</code> might include <code>france</code>, <code>united kingdom</code>, <code>united states</code>, and so on.</p>
</div>
<div class="sect2">
<h3 id="example-check-consistency-without-flags"><a class="anchor" href="#example-check-consistency-without-flags"></a>Example: Check Consistency without Flags</h3>
<div class="paragraph">
<p>In the following example, the <code>check</code> command is used without flags, to check the consistency of all fields in a specified <em>Moss</em>-index partition, with up to <code>100</code> of their terms being examined.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve check \
/opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns output the initial lines of which are as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>checking fields: [type tz country faa geo.alt geo.lat geo.lon icao id airportname city _all schedule.utc schedule.day schedule.flight sourceairport distance equipment stops airline airlineid destinationairport content phone name address email geo.accuracy hours url activity title free_internet reviews.author reviews.content reviews.date reviews.ratings.Cleanliness reviews.ratings.Location reviews.ratings.Overall reviews.ratings.Rooms reviews.ratings.Service reviews.ratings.Sleep Quality reviews.ratings.Value description free_parking pets_ok vacancy free_breakfast public_likes price state image image_direct_url callsign iata directions reviews.ratings.Check in / front desk reviews.ratings.Business service (e.g., internet access) fax alt reviews.ratings.Business service checkin checkout tollfree alias]
checking field: 'type'
field contains 5 terms
done checking 5 terms, found 0 problems
checking field: 'tz'
field contains 15 terms
done checking 15 terms, found 0 problems
checking field: 'country'
field contains 4 terms
done checking 4 terms, found 0 problems
checking field: 'faa'
field contains 276 terms
done checking 100 terms, found 0 problems
checking field: 'geo.alt'
field contains 3195 terms
done checking 100 terms, found 0 problems

  .
  .
  .</pre>
</div>
</div>
<div class="paragraph">
<p>Thus, the list of fields to be checked is printed first (this containing <em>all</em> fields, since no restriction has been specified); then, each field is separately listed; along with the number of terms associated with it, the number of those terms that have been checked, and the number of problems encountered with those terms during checking.
Note that in cases where the number of terms associated with a field is greater than <code>100</code>, only <code>100</code> terms are indicated to have been checked, this being the default.</p>
</div>
</div>
<div class="sect2">
<h3 id="example-check-consistency-with-flags"><a class="anchor" href="#example-check-consistency-with-flags"></a>Example: Check Consistency with Flags</h3>
<div class="paragraph">
<p>In the following example, the <code>check</code> command is again used, this time with flags:
the sole <code>field</code> to be checked is specified as <code>geo.alt</code>; and the number of terms within it is specified as <code>150</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve check /opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex -c 150 -f geo.alt</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns output as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>checking fields: [geo.alt]
checking field: 'geo.alt'
field contains 3195 terms
done checking 150 terms, found 0 problems</pre>
</div>
</div>
<div class="paragraph">
<p>Thus, the <code>geo.alt</code> field and <code>150</code> of its associated terms have been checked.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="count"><a class="anchor" href="#count"></a>count</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>count</code> command prints to standard output the total number of documents referred to in the specified index partition.
Its syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve count [index-path] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code> must be the pathname of a <em>Moss</em>-index partition, on the current node.
The value of the optional <code>flags</code> parameter can only be <code>--help</code> (or <code>-h</code>).</p>
</div>
<div class="sect2">
<h3 id="example-count-documents-in-an-index-partition"><a class="anchor" href="#example-count-documents-in-an-index-partition"></a>Example: Count Documents in an Index Partition</h3>
<div class="paragraph">
<p>The following example counts the documents referred to in a specified Moss-index partition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve count /opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, this command displays the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>5286</pre>
</div>
</div>
<div class="paragraph">
<p>The total number of documents referred to in the index partition is thereby confirmed as <code>5286</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dictionary"><a class="anchor" href="#dictionary"></a>dictionary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>dictionary</code> command prints to standard output the <em>term dictionary</em>  for a specified field referenced by a specified <em>Moss</em>-index partition.
The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve dictionary [index-path] [field-name] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code> must be the pathname of a <em>Moss</em>-index partition, on the current node.
The <code>field-name</code> is required, and is the name of a specific field within the index partition, for which term-dictionary content is to be returned.
The value of the optional <code>flags</code> parameter can only be <code>--help</code> (or <code>-h</code>).</p>
</div>
<div class="sect2">
<h3 id="example-return-the-dictionary-for-a-specific-field"><a class="anchor" href="#example-return-the-dictionary-for-a-specific-field"></a>Example: Return the Dictionary for a Specific Field</h3>
<div class="paragraph">
<p>The following example returns the term dictionary for the <code>name</code> field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve dictionary \
/opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex name</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command displays output whose initial lines are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1 - 1
24 - 1
4 - 1
40 - 1
500 - 1
55 - 1
575 - 1
58 - 1
9 - 1
a16 - 1
abbey - 2
aberdulais - 1
abergele - 1
aberystwyth - 1
absinthe - 1
abu - 1
ace - 1
adobe - 1
african - 1
aiguille - 1
  .
  .
  .</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dump"><a class="anchor" href="#dump"></a>dump</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>dump</code> command performs a <em>hex dump</em>, either of the entire or of a subset of the contents of a specified <em>Moss</em>-index partition.
The syntax takes two alternative forms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve dump [index-path] [flags]

cbft-bleve dump [index-path][command] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code>, which is mandatory, is the filesystem path to the index-partition: if this argument alone is specified, the <code>dump</code> command dumps the entire contents of the specified index partition.</p>
</div>
<div class="paragraph">
<p>The optional <code>command</code> argument can be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>doc</code>.
Only the rows relating to a specified document id are dumped.
This id must follow the <code>index-path</code>: thus, the syntax becomes <code>cbft-bleve dump doc [index-path] [doc-id]</code>.</p>
</li>
<li>
<p><code>fields</code>.
Only the <code>field</code> rows from the index partition are dumped.
The complete syntax for the command becomes <code>cbft-bleve dump fields [index-path]</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The value of the optional <code>flags</code> parameter can only be <code>--help</code> (or <code>-h</code>).</p>
</div>
<div class="sect2">
<h3 id="example-dump-an-entire-index-partition"><a class="anchor" href="#example-dump-an-entire-index-partition"></a>Example: Dump an Entire Index Partition</h3>
<div class="paragraph">
<p>The following command dumps the entire contents of the specified index partition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve dump /opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command displays output whose initial lines appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Backindex DocId: `airline_10` Terms Entries: [field:0 terms:"airline"  field:53 terms:"mile" terms:"air"  field:2 terms:"united" terms:"states"  field:54 terms:"q5"  field:7 terms:"mla"  field:11 terms:"\\\014" terms:",\006\000H\000\000\000\000\000" terms:"40" terms:"airline" terms:"states" terms:"mla" terms:"P\003\000$" terms:"mile" terms:"air" terms:"L0\004@" terms:"8\030\002 \000\000\000" terms:"@\014\001\020\000\000" terms:"$\014\001\020\000\000\000\000\000\000" terms:"X\001@" terms:"00\004@\000\000\000\000" terms:"T\030\002" terms:"4\003\000$\000\000\000\000" terms:"D`\t\000\000" terms:"&lt;\001@\022\000\000\000" terms:"united" terms:"q5" terms:" \001@\022\000\000\000\000\000\000\000" terms:"H\006\000H\000" terms:"(`\t\000\000\000\000\000\000"  field:8 terms:",\006\000H\000\000\000\000\000" terms:"4\003\000$\000\000\000\000" terms:"&lt;\001@\022\000\000\000" terms:"@\014\001\020\000\000" terms:"P\003\000$" terms:"T\030\002" terms:"\\\014" terms:" \001@\022\000\000\000\000\000\000\000" terms:"H\006\000H\000" terms:"$\014\001\020\000\000\000\000\000\000" terms:"L0\004@" terms:"X\001@" terms:"(`\t\000\000\000\000\000\000" terms:"00\004@\000\000\000\000" terms:"8\030\002 \000\000\000" terms:"D`\t\000\000"  field:24 terms:"air" terms:"40" terms:"mile" ], Stored Entries: []
Key:   62 61 69 72 6c 69 6e 65 5f 31 30
Value: 0a 0b 08 00 12 07 61 69 72 6c 69 6e 65 0a 0d 08 35 12 04
  .
  .
  .</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-dump-rows-for-a-document"><a class="anchor" href="#example-dump-rows-for-a-document"></a>Example: Dump Rows for a Document</h3>
<div class="paragraph">
<p>The following command uses the <code>doc</code> option to dump the rows that correspond to the document <code>airline_10</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve dump doc \
/opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex airline_10</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command displays output whose initial lines are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Term: `airline` Field: 0 DocId: `airline_10` Frequency: 1 Norm: 1.000000 Vectors: [Field: 0 Pos: 1 Start: 0 End 7 ArrayPositions: []uint64(nil)]
Key:   74 00 00 61 69 72 6c 69 6e 65 ff 61 69 72 6c 69 6e 65 5f 31 30
Value: 01 80 80 80 fc 03 00 01 00 07 00

Term: `states` Field: 2 DocId: `airline_10` Frequency: 1 Norm: 0.707107 Vectors: [Field: 2 Pos: 2 Start: 7 End 13 ArrayPositions: []uint64(nil)]
Key:   74 02 00 73 74 61 74 65 73 ff 61 69 72 6c 69 6e 65 5f 31 30
Value: 01 f3 89 d4 f9 03 02 02 07 0d 00
  .
  .
  .</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-dump-index-fields"><a class="anchor" href="#example-dump-index-fields"></a>Example: Dump Index Fields</h3>
<div class="paragraph">
<p>The following command uses the <code>fields</code> option to dump only the <code>fields</code> rows of the index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve dump fields \
/opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command displays output whose initial lines are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Field: 0 Name: type
Key:   66 00 00
Value: 74 79 70 65 ff

Field: 1 Name: tz
Key:   66 01 00
Value: 74 7a ff

Field: 2 Name: country
Key:   66 02 00
Value: 63 6f 75 6e 74 72 79 ff</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fields"><a class="anchor" href="#fields"></a>fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>fields</code> command lists the fields in a specified <em>Moss</em>-index partition.
The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve fields [index-path] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code>, which is mandatory, is the filesystem path to the index-partition.
The command dumps the entire contents of the specified index partition.</p>
</div>
<div class="paragraph">
<p>The value of the optional <code>flags</code> parameter can only be <code>--help</code> (or <code>-h</code>).</p>
</div>
<div class="sect2">
<h3 id="example-list-fields-in-an-index"><a class="anchor" href="#example-list-fields-in-an-index"></a>Example: List Fields in an Index</h3>
<div class="paragraph">
<p>The following command lists the fields in a specified index partition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve fields /opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command displays output whose initial lines are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>0 - type
1 - tz
2 - country
3 - faa
4 - geo.alt
5 - geo.lat
6 - geo.lon
7 - icao
8 - id
9 - airportname
10 - city
11 - _all
12 - schedule.utc
13 - schedule.day
14 - schedule.flight
  .
  .
  .</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mapping"><a class="anchor" href="#mapping"></a>mapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>mapping</code> command prints to standard output the <em>mapping</em> used for a specified <em>Moss</em>-index partition.
The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve mapping [index path] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code>, which is mandatory, is the filesystem path to the index-partition.
The command prints the mapping for the specified index partition.
The value of the optional <code>flags</code> parameter can only be <code>--help</code> (or <code>-h</code>).</p>
</div>
<div class="sect2">
<h3 id="example-print-the-mapping-for-an-index-partition"><a class="anchor" href="#example-print-the-mapping-for-an-index-partition"></a>Example: Print the Mapping for an Index Partition</h3>
<div class="paragraph">
<p>The following example prints out the mapping for a specified index partition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve mapping /opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command prints out the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "default_mapping": {
    "enabled": true,
    "dynamic": true
  },
  "type_field": "_type",
  "default_type": "_default",
  "default_analyzer": "standard",
  "default_datetime_parser": "dateTimeOptional",
  "default_field": "_all",
  "store_dynamic": false,
  "index_dynamic": true,
  "docvalues_dynamic": true,
  "analysis": {}
}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query"><a class="anchor" href="#query"></a>query</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>query</code> command executes a specified query against a specified <em>Moss</em>-index partition.
The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve query [index-path] [query] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>index-path</code>, which is mandatory, is the filesystem path to the index-partition.
The <code>query</code> is as described in <a href="../fts/fts-search-request.html" class="xref page">Understanding Queries</a>.
The optional flags are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Flag</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-X</code>, <code>--explain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explain the result scoring.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-f</code>, <code>--field string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restrict the query to the field specified by <code>string</code>.
By default, no restriction is applied.
This parameter is not applied to <em>query-string</em> queries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--fields</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load stored fields.
If this is not specified, fields are not loaded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--highlight</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Highlight matching text in results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-l</code>, <code>--limit int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limit the number of results returned.
The default is <code>10</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-r</code>, <code>--repeat int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repeat the query this many times.
The default is <code>1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-s</code>, <code>--skip int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip this many results.
The default is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-b</code>, <code>--sort-by string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort the results by the specified field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t</code>, <code>--type string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of query to be run.
The default is <code>'query_string'</code> query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h</code>, <code>--help</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints help text to standard output.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="example-submit-query"><a class="anchor" href="#example-submit-query"></a>Example: Submit Query</h3>
<div class="paragraph">
<p>The following example applies to the specified index partition a <em>query-string</em> query that returns all hotels whose cleanliness rating is greater than <code>4</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve query /opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex 'reviews.ratings.Cleanliness:&gt;4'</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>108 matches, showing 1 through 10, took 22.54727ms
    1. hotel_21673 (1.220367)
    2. hotel_26139 (1.220367)
    3. hotel_5335 (1.220367)
    4. hotel_15978 (1.220367)
    5. hotel_21665 (1.220367)
    6. hotel_21679 (1.220367)
    7. hotel_35667 (1.220367)
    8. hotel_635 (1.220367)
    9. hotel_4397 (1.220367)
   10. hotel_16458 (1.220367)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="registry"><a class="anchor" href="#registry"></a>registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>registry</code> command prints to standard output a list of the <em>analyzers</em>, <em>tokenizers</em> and other components used by a specified <em>Moss</em>-index partition.</p>
</div>
<div class="paragraph">
<p>The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbft-bleve registry [index-path] [flags]</pre>
</div>
</div>
<div class="paragraph">
<p>The value of the optional <code>flags</code> parameter can only be <code>--help</code> (or <code>-h</code>).</p>
</div>
<div class="sect2">
<h3 id="example-print-the-registry-for-an-index-partition"><a class="anchor" href="#example-print-the-registry-for-an-index-partition"></a>Example: Print the Registry for an Index Partition</h3>
<div class="paragraph">
<p>The following command prints out the registry for the specified index partition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/couchbase/bin/cbft-bleve registry \
/opt/couchbase/var/lib/couchbase/data/@fts/\
mossIndex_690ef363c7557832_54820232.pindex</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command produces output whose initial lines are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Char Filter Types:
	regexp

Char Filter Instances:
	asciifolding
	html
	zero_width_spaces

Tokenizer Types:
	exception
	regexp

Tokenizer Instances:
	letter
	single
	unicode
	web
	whitespace

Token Map Types:
	custom

Token Map Instances:
	articles_ca
	articles_fr
	articles_ga
	articles_it
	stop_ar
	stop_bg
    .
    .
    .</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-commands"><a class="anchor" href="#additional-commands"></a>Additional Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following, additional commands are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>scorch</code>.
Returns information on a <em>Scorch</em>-index partition.
For information, see <a href="cbft-bleve-scorch.html" class="xref page">cbft-bleve for Scorch Indexes</a>.</p>
</li>
<li>
<p><code>zap</code>.
Returns information on a <em>Zap</em> file.
For information, see <a href="cbft-bleve-zap.html" class="xref page">cbft-bleve for Zap Files</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
