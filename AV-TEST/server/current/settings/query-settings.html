<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Settings and Parameters | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="You can configure the Query service using cluster-level query settings, node-level query settings, and request-level query parameters.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/settings/query-settings.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/pages/query-settings.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb"><a href="../n1ql/query.html">Query</a></li>
<li class="crumb"><a href="query-settings.html">Settings and Parameters</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Settings and Parameters</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<style type="text/css">
  /* No maximum width for table cells */
  .doc table.spread > tbody > tr > *,
  .doc table.stretch > tbody > tr > * {
    max-width: none !important;
  }

  /* Wrap code listings in table cells */
  td .listingblock .content pre code {
    white-space: pre-wrap !important;
  }

  /* Ignore fixed column widths */
  table:not(.fixed-width) col{
    width: auto !important;
  }

  /* Do not hyphenate words in the table */
  td.tableblock p,
  p.tableblock{
    hyphens: manual !important;
  }

  /* Vertical alignment */
  td.tableblock{
    vertical-align: top !important;
  }
</style>
<div class="quoteblock abstract">
<blockquote>
You can configure the Query service using cluster-level query settings, node-level query settings, and request-level query parameters.
</blockquote>
</div>
<div class="paragraph">
<p>There are three ways of configuring the Query service.
You can specify cluster-level settings for all nodes running the Query service in the cluster.
You can specify node-level settings for a single node running the Query service.
You can also specify parameters for individual requests.
Cluster-level query settings, node-level query settings, and request-level parameters must be set and used in different ways.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Comparison of Query Settings and Parameters</caption>
<colgroup>
<col style="width: 24.5175%;">
<col style="width: 16.4585%;">
<col style="width: 16.4585%;">
<col style="width: 16.4585%;">
<col style="width: 26.107%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Setting Per</th>
<th class="tableblock halign-left valign-top">Set By</th>
<th class="tableblock halign-left valign-top">Set On</th>
<th class="tableblock halign-left valign-top">Set Via</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cluster-level query settings</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The administrator at the system level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server side</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CLI, cURL statements, or the UI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Node-level query settings</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The administrator at the system level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server side</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cURL statements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Request-level parameters</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request (statement)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client side</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cbq</code> command-line parameters, cURL statements, client programming, or the UI</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cluster-level settings and node-level settings are collectively referred to as <em class="def">service-level settings</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query-setting-levels-and-equivalents"><a class="anchor" href="#query-setting-levels-and-equivalents"></a>Query Setting Levels and Equivalents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some query settings are cluster-level, node-level, or request-level only, while some apply to more than one level with slightly different names.</p>
</div>
<div class="paragraph">
<p>If a cluster-level setting has an equivalent node-level setting, then changing the cluster-level setting overwrites the node-level setting for all Query nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>You can change a node-level setting for a single node to be different to the equivalent cluster-level setting.
Changing the node-level setting does not affect the equivalent cluster-level setting.
However, you should note that the node-level setting may be overwritten by subsequent changes at the cluster-level.
In particular, specifying query settings via the CLI or the UI makes changes at the cluster-level.</p>
</div>
<div class="paragraph">
<p>If a request-level parameter has an equivalent node-level setting, the node-level setting <em>usually</em> acts as the default for the request-level parameter, as described in the tables below.
Setting a request-level parameter overrides the equivalent node-level setting.</p>
</div>
<div class="paragraph">
<p>Furthermore, for numeric values, if a request-level parameter has an equivalent node-level setting, the node-level setting dictates the upper-bound value of the request-level parameter.
For example, if the node-level <code>timeout</code> is set to 500, then the request-level parameter cannot be set to 501 or any value higher.</p>
</div>
<table class="tableblock frame-all grid-all stretch fixed-width">
<caption class="title">Table 2. Single-Level Settings</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cluster-Level Only Settings</th>
<th class="tableblock halign-left valign-top">Node-Level Only Settings</th>
<th class="tableblock halign-left valign-top">Request-Level Only Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#queryTmpSpaceDir">queryTmpSpaceDir</a></p>
</div>
<div class="paragraph">
<p><a href="#queryTmpSpaceSize">queryTmpSpaceSize</a></p>
</div>
<div class="paragraph">
<p><a href="#queryCurlWhitelist">queryCurlWhitelist</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#auto-prepare">auto-prepare</a></p>
</div>
<div class="paragraph">
<p><a href="#completed">completed</a></p>
</div>
<div class="paragraph">
<p><a href="#cpuprofile">cpuprofile</a></p>
</div>
<div class="paragraph">
<p><a href="#debug">debug</a></p>
</div>
<div class="paragraph">
<p><a href="#distribute">distribute</a></p>
</div>
<div class="paragraph">
<p><a href="#functions-limit">functions-limit</a></p>
</div>
<div class="paragraph">
<p><a href="#keep-alive-length">keep-alive-length</a></p>
</div>
<div class="paragraph">
<p><a href="#max-index-api">max-index-api</a></p>
</div>
<div class="paragraph">
<p><a href="#memprofile">memprofile</a></p>
</div>
<div class="paragraph">
<p><a href="#mutexprofile">mutexprofile</a></p>
</div>
<div class="paragraph">
<p><a href="#plus-servicers">plus-servicers</a></p>
</div>
<div class="paragraph">
<p><a href="#request-size-cap">request-size-cap</a></p>
</div>
<div class="paragraph">
<p><a href="#servicers">servicers</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#args">args</a></p>
</div>
<div class="paragraph">
<p><a href="#auto_execute">auto_execute</a></p>
</div>
<div class="paragraph">
<p><a href="#client_context_id">client_context_id</a></p>
</div>
<div class="paragraph">
<p><a href="#compression">compression</a></p>
</div>
<div class="paragraph">
<p><a href="#creds">creds</a></p>
</div>
<div class="paragraph">
<p><a href="#durability_level">durability_level</a></p>
</div>
<div class="paragraph">
<p><a href="#encoded_plan">encoded_plan</a> (deprecated)</p>
</div>
<div class="paragraph">
<p><a href="#encoding">encoding</a></p>
</div>
<div class="paragraph">
<p><a href="#format">format</a></p>
</div>
<div class="paragraph">
<p><a href="#kvtimeout">kvtimeout</a></p>
</div>
<div class="paragraph">
<p><a href="#metrics">metrics</a></p>
</div>
<div class="paragraph">
<p><a href="#namespace">namespace</a></p>
</div>
<div class="paragraph">
<p><a href="#prepared">prepared</a></p>
</div>
<div class="paragraph">
<p><a href="#preserve_expiry">preserve_expiry</a></p>
</div>
<div class="paragraph">
<p><a href="#query_context">query_context</a></p>
</div>
<div class="paragraph">
<p><a href="#readonly">readonly</a></p>
</div>
<div class="paragraph">
<p><a href="#scan_consistency">scan_consistency</a></p>
</div>
<div class="paragraph">
<p><a href="#scan_vector">scan_vector</a></p>
</div>
<div class="paragraph">
<p><a href="#scan_vectors">scan_vectors</a></p>
</div>
<div class="paragraph">
<p><a href="#scan_wait">scan_wait</a></p>
</div>
<div class="paragraph">
<p><a href="#signature">signature</a></p>
</div>
<div class="paragraph">
<p><a href="#statement">statement</a></p>
</div>
<div class="paragraph">
<p><a href="#txid">txid</a></p>
</div>
<div class="paragraph">
<p><a href="#txstmtnum">txstmtnum</a></p>
</div>
<div class="paragraph">
<p><a href="#tximplicit">tximplicit</a></p>
</div>
<div class="paragraph">
<p><a href="#txdata">txdata</a></p>
</div>
<div class="paragraph">
<p><a href="#use_fts">use_fts</a></p>
</div>
<div class="paragraph">
<p><a href="#identifier">$<<em>identifier</em>></a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch fixed-width">
<caption class="title">Table 3. Settings for Cluster-Level and Node-Level</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cluster-Level Name</th>
<th class="tableblock halign-left valign-top">Node-Level Name</th>
<th class="tableblock halign-left valign-top">Request-Level Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#queryCleanupClientAttempts">queryCleanupClientAttempts</a></p>
</div>
<div class="paragraph">
<p><a href="#queryCleanupLostAttempts">queryCleanupLostAttempts</a></p>
</div>
<div class="paragraph">
<p><a href="#queryCleanupWindow">queryCleanupWindow</a></p>
</div>
<div class="paragraph">
<p><a href="#queryCompletedLimit">queryCompletedLimit</a></p>
</div>
<div class="paragraph">
<p><a href="#queryCompletedThreshold">queryCompletedThreshold</a></p>
</div>
<div class="paragraph">
<p><a href="#queryLogLevel">queryLogLevel</a></p>
</div>
<div class="paragraph">
<p><a href="#queryN1qlFeatCtrl">queryN1qlFeatCtrl</a></p>
</div>
<div class="paragraph">
<p><a href="#queryPreparedLimit">queryPreparedLimit</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#cleanupclientattempts">cleanupclientattempts</a></p>
</div>
<div class="paragraph">
<p><a href="#cleanuplostattempts">cleanuplostattempts</a></p>
</div>
<div class="paragraph">
<p><a href="#cleanupwindow">cleanupwindow</a></p>
</div>
<div class="paragraph">
<p><a href="#completed-limit">completed-limit</a></p>
</div>
<div class="paragraph">
<p><a href="#completed-threshold">completed-threshold</a></p>
</div>
<div class="paragraph">
<p><a href="#loglevel">loglevel</a></p>
</div>
<div class="paragraph">
<p><a href="#n1ql-feat-ctrl">n1ql-feat-ctrl</a></p>
</div>
<div class="paragraph">
<p><a href="#prepared-limit">prepared-limit</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch fixed-width">
<caption class="title">Table 4. Settings for Node-Level and Request-Level</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cluster-Level Name</th>
<th class="tableblock halign-left valign-top">Node-Level Name</th>
<th class="tableblock halign-left valign-top">Request-Level Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#atrcollection-srv">atrcollection</a></p>
</div>
<div class="paragraph">
<p><a href="#controls-srv">controls</a></p>
</div>
<div class="paragraph">
<p><a href="#pretty-srv">pretty</a></p>
</div>
<div class="paragraph">
<p><a href="#profile-srv">profile</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#atrcollection_req">atrcollection</a></p>
</div>
<div class="paragraph">
<p><a href="#controls_req">controls</a></p>
</div>
<div class="paragraph">
<p><a href="#pretty_req">pretty</a></p>
</div>
<div class="paragraph">
<p><a href="#profile_req">profile</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch fixed-width">
<caption class="title">Table 5. Settings for Cluster-Level, Node-Level, and Request-Level</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cluster-Level Name</th>
<th class="tableblock halign-left valign-top">Node-Level Name</th>
<th class="tableblock halign-left valign-top">Request-Level Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#queryMaxParallelism">queryMaxParallelism</a></p>
</div>
<div class="paragraph">
<p><a href="#queryMemoryQuota">queryMemoryQuota</a></p>
</div>
<div class="paragraph">
<p><a href="#queryNumAtrs">queryNumAtrs</a></p>
</div>
<div class="paragraph">
<p><a href="#queryPipelineBatch">queryPipelineBatch</a></p>
</div>
<div class="paragraph">
<p><a href="#queryPipelineCap">queryPipelineCap</a></p>
</div>
<div class="paragraph">
<p><a href="#queryScanCap">queryScanCap</a></p>
</div>
<div class="paragraph">
<p><a href="#queryTimeout">queryTimeout</a></p>
</div>
<div class="paragraph">
<p><a href="#queryTxTimeout">queryTxTimeout</a></p>
</div>
<div class="paragraph">
<p><a href="#queryUseCBO">queryUseCBO</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#max-parallelism-srv">max-parallelism</a></p>
</div>
<div class="paragraph">
<p><a href="#memory-quota-srv">memory-quota</a></p>
</div>
<div class="paragraph">
<p><a href="#numatrs-srv">numatrs</a></p>
</div>
<div class="paragraph">
<p><a href="#pipeline-batch-srv">pipeline-batch</a></p>
</div>
<div class="paragraph">
<p><a href="#pipeline-cap-srv">pipeline-cap</a></p>
</div>
<div class="paragraph">
<p><a href="#scan-cap-srv">scan-cap</a></p>
</div>
<div class="paragraph">
<p><a href="#timeout-srv">timeout</a></p>
</div>
<div class="paragraph">
<p><a href="#txtimeout-srv">txtimeout</a></p>
</div>
<div class="paragraph">
<p><a href="#use-cbo-srv">use-cbo</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#max_parallelism_req">max_parallelism</a></p>
</div>
<div class="paragraph">
<p><a href="#memory_quota_req">memory_quota</a></p>
</div>
<div class="paragraph">
<p><a href="#numatrs_req">numatrs</a></p>
</div>
<div class="paragraph">
<p><a href="#pipeline_batch_req">pipeline_batch</a></p>
</div>
<div class="paragraph">
<p><a href="#pipeline_cap_req">pipeline_cap</a></p>
</div>
<div class="paragraph">
<p><a href="#scan_cap_req">scan_cap</a></p>
</div>
<div class="paragraph">
<p><a href="#timeout_req">timeout</a></p>
</div>
<div class="paragraph">
<p><a href="#txtimeout_req">txtimeout</a></p>
</div>
<div class="paragraph">
<p><a href="#use_cbo_req">use_cbo</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="cluster-level-query-settings"><a class="anchor" href="#cluster-level-query-settings"></a>Cluster-Level Query Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set a cluster-level query setting, use the <a href="../rest-api/rest-cluster-query-settings.html" class="xref page">Query Settings REST API</a> (<code>/settings/querySettings</code> endpoint) with a cURL statement, or the <a href="../manage/manage-settings/general-settings.html#query-settings" class="xref page">Advanced Query Settings</a> in the Couchbase Web Console.
You can also set all of the cluster-level query settings using the <a href="#cli:cbcli/couchbase-cli-setting-query.adoc" class="xref unresolved">setting-query</a> command.</p>
</div>
<div class="paragraph">
<p>The table below contains details of all cluster-level query settings.</p>
</div>
<div class="paragraph">
<div class="title">Cluster-Level Query Settings</div>
<p>Unresolved include directive in modules/settings/pages/query-settings.adoc - include::rest-api:partial$query-settings/definitions.adoc[]</p>
</div>
<div id="_access" class="paragraph">
<p><strong>Access</strong>
Unresolved include directive in modules/settings/pages/query-settings.adoc - include::rest-api:partial$query-settings/definitions.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-level-query-settings"><a class="anchor" href="#service-level-query-settings"></a>Node-Level Query Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set a node-level query setting, use the <a href="../n1ql/n1ql-rest-api/admin.html" class="xref page">Admin REST API</a> (<code>/admin/settings</code> endpoint) with a cURL statement.
These settings cannot be set by <code>cbq</code>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>To see a list of the current Query Settings, while the Query Service is running, enter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/node-level-settings.sh#L4">curl http://localhost:8093/admin/settings -u user:pword</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will output the entire list of node-level query settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/node-level-settings.jsonc">{
  "atrcollection": "",
  "auto-prepare": false,
  "cleanupclientattempts": true,
  "cleanuplostattempts": true,
  "cleanupwindow": "1m0s",
  "completed": {
    "aborted": null,
    "threshold": 1000
  },
  "completed-limit": 4000,
  "completed-threshold": 1000,
  "controls": false,
  "cpuprofile": "",
  "debug": false,
  "functions-limit": 16384,
  "keep-alive-length": 16384,
  "loglevel": "INFO",
  "max-index-api": 4,
  "max-parallelism": 1,
  "memory-quota": 0,
  "memprofile": "",
  "mutexprofile": false,
  "n1ql-feat-ctrl": 76,
  "numatrs": 1024,
  "pipeline-batch": 16,
  "pipeline-cap": 512,
  "plus-servicers": 16,
  "prepared-limit": 16384,
  "pretty": false,
  "profile": "off",
  "request-size-cap": 67108864,
  "scan-cap": 512,
  "servicers": 4,
  "timeout": 0,
  "txtimeout": "0s",
  "use-cbo": true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To output to a file for editing multiple settings at a single time, add the <code class="var">-o filename</code> option.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/save-node-level-settings.sh#L4">curl http://localhost:8093/admin/settings -u user:pword -o ./query_settings.json</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The table below contains details of all node-level query settings.</p>
</div>
<div id="_settings" class="paragraph">
<div class="title">Node-Level Query Settings</div>
<p>Unresolved include directive in modules/settings/pages/query-settings.adoc - include::n1ql:partial$n1ql-rest-api/admin/definitions.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_nnj_sjk_k1b"><a class="anchor" href="#section_nnj_sjk_k1b"></a>Request-Level Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set a request-level parameter, use the <a href="../n1ql/n1ql-rest-api/index.html" class="xref page">Query Service REST API</a> (<code>/query/service</code> endpoint) with a cURL statement, or the <a href="../tools/cbq-shell.html" class="xref page">cbq</a> command, or a client program.
You can also set request-level parameters using the <a href="../tools/query-workbench.html#query-preferences" class="xref page">Run-Time Preferences</a> window in the Query Workbench.</p>
</div>
<div class="paragraph">
<p>While <code>cbq</code> is a sandbox to test code on your local machine, your production query settings are set with the cURL commands on your server.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_cbq-shell"></a>CBQ Shell</p>
</li>
<li>
<p><a id="tabset1_rest-api"></a>REST API</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_cbq-shell">
<div class="paragraph">
<p>To set request-level parameters in <code>cbq</code>, use the <code>\SET</code> command.
The parameter name must be prefixed by a hyphen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">\SET -timeout "30m";
\SET -pretty true;
\SET -max_parallelism 3;
SELECT * FROM "world" AS hello;</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_rest-api">
<div class="paragraph">
<p>To set request-level parameters with the REST API, specify the parameters in the request body or the query URI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl http://localhost:8093/admin/settings -u Administrator:password \
  -d 'statement=SELECT * FROM "world" AS hello;
    &amp; timeout=30m
    &amp; pretty=true
    &amp; max_parallelism=3'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The table below contains details of all request-level parameters, along with examples.</p>
</div>
<div class="paragraph">
<div class="title">Request-Level Parameters</div>
<p>Unresolved include directive in modules/settings/pages/query-settings.adoc - include::n1ql:partial$n1ql-rest-api/query/definitions.adoc[]</p>
</div>
<div id="_credentials" class="paragraph">
<p><strong>Credentials</strong>
Unresolved include directive in modules/settings/pages/query-settings.adoc - include::n1ql:partial$n1ql-rest-api/query/definitions.adoc[]</p>
</div>
<h5 id="transactional-scan-consistency" class="discrete">Transactional Scan Consistency</h5>
<div class="paragraph">
<p>If the request contains a <code>BEGIN TRANSACTION</code> statement, or a DML statement with the <a href="#tximplicit">tximplicit</a> parameter set to <code>true</code>, then the <a href="#scan_consistency">scan_consistency</a> parameter sets the <em class="def">transactional scan consistency</em>.
If you specify a transactional scan consistency of <code>request_plus</code>, <code>statement_plus</code>, or <code>at_plus</code>, or if you specify no transactional scan consistency, the transactional scan consistency is set to <code>request_plus</code>; otherwise, the transactional scan consistency is set as specified.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Transactional scan consistency</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scan consistency at start of transaction</th>
<th class="tableblock halign-left valign-top">Transactional scan consistency</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request_plus</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not_bounded</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not_bounded</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request_plus</code><br>
  <code>statement_plus</code><br>
  <code>at_plus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request_plus</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Any DML statements within the transaction that have no scan consistency set will inherit from the transactional scan consistency.
Individual DML statements within the transaction may override the transactional scan consistency.
If you specify a scan consistency of <code>not_bounded</code> for a statement within the transaction, the scan consistency for the statement is set as specified.
When you specify a scan consistency of <code>request_plus</code>, <code>statement_plus</code>, or <code>at_plus</code> for a statement within the transaction, the scan consistency for the statement is set to <code>request_plus</code>.</p>
</div>
<div class="paragraph">
<p>However, <code>request_plus</code> consistency is not supported for statements using a full-text index.
If any statement within the transaction uses a full-text index, by means of the SEARCH function or the Flex Index feature, the scan consistency is set to <code>not_bounded</code> for the duration of the full-text search.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Overriding the transactional scan consistency</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scan consistency for statement within transaction</th>
<th class="tableblock halign-left valign-top">Inherited scan consistency</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transactional scan consistency<br>
 (<code>not_bounded</code> for full-text search)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not_bounded</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not_bounded</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request_plus</code><br>
  <code>statement_plus</code><br>
  <code>at_plus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request_plus</code><br>
 (<code>not_bounded</code> for full-text search)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="section_srh_tlm_n1b"><a class="anchor" href="#section_srh_tlm_n1b"></a>Named Parameters and Positional Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Named parameters</em> use a <a href="#identifier">variable name</a> to define the value of each parameter, while numbered and unnumbered <em>positional parameters</em> use a <a href="#args">list of arguments</a> to define the value of each parameter by position.
Requests which use named parameters and positional parameters should contain the appropriate placeholders, as summarized in the table below.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/settings/pages/query-settings.adoc - include::ROOT:partial$query-context.adoc[]</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Named Parameters and Positional Parameters</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Arguments</th>
<th class="tableblock halign-left valign-top">Statement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock no-callouts">
<div class="title">Named Parameters</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/param-names.n1ql#L2-L3">\SET -$country "France"; <i class="conum" data-value="1"></i><b>(1)</b><i class="conum" data-value="2"></i><b>(2)</b>
\SET -$altitude 500;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">&#160;</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/param-names.n1ql#L7-L8">SELECT COUNT(*) FROM airport
WHERE country = $country AND geo.alt &gt; $altitude;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock no-callouts">
<div class="title">Positional Parameters</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/param-numbers.n1ql#L2">\SET -args ["France", 500]; <i class="conum" data-value="1"></i><b>(1)</b><i class="conum" data-value="2"></i><b>(2)</b><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">&#160;</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/param-numbers.n1ql#L6-L7">SELECT COUNT(*) FROM airport
WHERE country = $1 AND geo.alt &gt; $2;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/settings/examples/param-positions.n1ql#L6-L7">SELECT COUNT(*) FROM airport
WHERE country = ? AND geo.alt &gt; ?;</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="related-links"><a class="anchor" href="#related-links"></a>Related Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>For more details about the SQL++ REST API, refer to <a href="../n1ql/n1ql-rest-api/index.html" class="xref page">Query Service REST API</a>.</p>
</li>
<li>
<p>For more details about the Admin REST API, refer to <a href="../n1ql/n1ql-rest-api/admin.html" class="xref page">Admin REST API</a>.</p>
</li>
<li>
<p>For more details about the Query Settings API, refer to <a href="../rest-api/rest-cluster-query-settings.html" class="xref page">Cluster Query Settings API</a>.</p>
</li>
<li>
<p>For more details about API content and settings, refer to <a href="../rest-api/rest-intro.html" class="xref page">REST API reference</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
