<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Manage Backups | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/cloud/invpc/invpc-manage-backup.html">
<link rel="stylesheet" href="../../_/css/site.css">
<script src="../../_/js/vendor/jquery.js"></script>
<meta name="robots" content="noindex">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="cloud">
<meta name="dcterms.identifier" content="master">
<meta name="page-url" content="/cloud/invpc/invpc-manage-backup.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/CapellaGA/docs/public/modules/invpc/pages/invpc-manage-backup.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">Couchbase Capella</a></li>
<li class="crumb"><a href="invpc-manage-backup.html">Manage Backups</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Manage Backups</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Backups contain bucket data.
Backups can be taken on-demand or use a configurable automatic schedule.
</blockquote>
</div>
<div class="paragraph">
<p>Use the procedures on this page to create on-demand backups, schedule automatic backups, and manage those backups.
To learn more about how backups work in Couchbase Capella, see <a href="../clusters/backup-restore.html" class="xref page">Backup and Restore Data</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="view-and-manage-backups"><a class="anchor" href="#view-and-manage-backups"></a>View and Manage Backups</h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This information is for anyone still using Couchbase Server 6.6, hosted in their own cloud provider&#8217;s VPC.
It does not apply to Couchbase 7.0 or later, hosted in Couchbase&#8217;s VPC and fully managed by Couchbase.</p>
</div>
<div class="paragraph">
<p>All of the information for users of Server 6.6 self-managed in their own cloud provider&#8217;s VPC, such as <em>this page</em>, can be accessed at <a href="invpc-index.html" class="xref page">this index page</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="accessing-cluster-backups-in-the-capella-ui"><a class="anchor" href="#accessing-cluster-backups-in-the-capella-ui"></a>Accessing Cluster Backups in the Capella UI</h3>
<div class="paragraph">
<p>Backups can be accessed under the cluster&#8217;s <strong>Backup &amp; Restore</strong> tab.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="cluster-backup-restore-tab.png" alt="The cluster&#8217;s 'Backup &amp; Restore' tab.">
</div>
</div>
<div id="permissions-required-vpc" class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Permissions Required</div>
<div class="paragraph">
<p>In order to access backups in the Capella UI, the following permissions are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must have the <a href="../projects/project-roles.html#project-owner-role" class="xref page"><code><strong>Project Owner</strong></code></a> role for the project that contains the cluster.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="backup-vpc-summary"><a class="anchor" href="#backup-vpc-summary"></a>Backup Summary</h4>
<div class="paragraph">
<p>A cluster&#8217;s <strong>Backup &amp; Restore</strong> tab shows a summary of all the backups that exist for that cluster.
The summary is displayed in table format, with sortable columns and a row for each backup.</p>
</div>
<div class="paragraph">
<p>The <strong>Backups</strong> list displays the following information about each backup:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Version History</dt>
<dd>
<p>The time and date range for the backup set.
If the <strong>Backup Type</strong> is <strong>Full</strong>, the time and date when the backup completed is displayed.
If the <strong>Backup Type</strong> is <strong>Series</strong>, the date range between the first and last backup in the series is displayed.</p>
</dd>
<dt class="hdlist1">Backup Type</dt>
<dd>
<p>The backup&#8217;s type, as well as the backup method that was used to create the backup.
The backup type can be <strong>Full</strong> or <strong>Series</strong>.
Refer to <a href="../clusters/backup-restore.html#backup-types" class="xref page">Backup Types</a> for more information.</p>
<div class="paragraph">
<p>The backup method that was used to create the backup is also listed in the same field alongside the backup type.
The backup method can be either <strong>Autosave</strong> or <strong>Manual</strong>, depending on whether the backup was created automatically according to the cluster&#8217;s <a href="#configure-automatic-backups-vpc">automatic backup schedule</a> or if it was created <a href="#create-manual-backup-vpc">manually</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A Series backup is listed as <strong>Full</strong> until it includes at least one Incremental backup, after which the backup type changes to <strong>Series</strong>.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configure-automatic-backups-vpc"><a class="anchor" href="#configure-automatic-backups-vpc"></a>Configure Automatic Backups</h3>
<div class="paragraph">
<p>Automatic backups are mandatory for all clusters in Capella.
A cluster will begin to take automatic backups upon successful deployment.
The frequency and retention of automatic backups are determined by each cluster&#8217;s individual <em>Autosave Schedule</em>.</p>
</div>
<div class="paragraph">
<p>All clusters are deployed with a default Autosave Schedule.
It is recommended that you change each cluster&#8217;s Autosave Schedule according your <a href="https://en.wikipedia.org/wiki/Recovery_time_objective" target="_blank" rel="noopener">Recovery Time Objective</a> (RTO) and <a href="https://en.wikipedia.org/wiki/Recovery_point_objective" target="_blank" rel="noopener">Recovery Point Objective</a> (RPO).
For example, production clusters may require a much smaller backup window and a much longer backup retention period than development clusters.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Permissions Required</div>
<div class="paragraph">
<p>To change a cluster&#8217;s Autosave Schedule, the following permissions are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must have the <a href="../projects/project-roles.html#project-owner-role" class="xref page"><code><strong>Project Owner</strong></code></a> role for the project that contains the cluster.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the cluster&#8217;s <strong>Backup &amp; Restore</strong> tab.</p>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to the <strong>Clusters</strong> tab in the main navigation.</p>
</li>
<li>
<p>Find and click on the cluster that you wish to configure automatic backups for.</p>
<div class="paragraph">
<p>This opens the cluster with its <strong>Overview</strong> tab selected.</p>
</div>
</li>
<li>
<p>Click the <strong>Backup &amp; Restore</strong> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</li>
<li>
<p>Click <b class="button">Manage Autosave</b>.</p>
<div class="paragraph">
<p>This opens the <strong>Autosave Schedule</strong> fly-out menu.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="backup-autosave-schedule-flyout.png" alt="The 'Autosave Schedule' fly-out menu showing the default configuration values that are set for every new cluster." width="500">
</div>
</div>
</li>
<li>
<p>Configure the cluster&#8217;s Autosave Schedule.</p>
<div class="paragraph">
<p>The interactive fields are:</p>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Backup Interval</dt>
<dd>
<p>The frequency with which backups are taken.
This can be <code>4 hours</code>, <code>8 hours</code>, <code>1 day</code>, <code>1 week</code>, <code>1 month</code>, or <code>1 year</code>; and can be selected from the field&#8217;s dropdown menu.
The default value is <code>1 day</code>.</p>
<div class="paragraph">
<p>When set to <code>4 hours</code>, <code>8 hours</code>, or <code>1 day</code>, a weekly Series backup will be created (except when <strong>Full Backup Day</strong> is set to <code>Every Day</code>).
After the first Full backup, each subsequent automatic backup that occurs over the course of the week will be an Incremental backup.
Once the next Full backup occurs, a new weekly Series backup will be created and new Incremental backups will be a part of the new series.
Full backups always occur on the day and time determined by the <strong>Full Backup Day</strong> and <strong>Full Backup Time (UTC)</strong> fields.</p>
</div>
<div class="paragraph">
<p>When set to <code>1 week</code>, <code>1 month</code>, or <code>1 year</code>, every backup will be a Full backup.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The backup interval is calculated in increments of 4/8/24 hours
from the <strong>Full Backup Time (UTC)</strong>.
Changing <strong>Backup Interval</strong> to <code>4 hours</code> or <code>8 hours</code> will result in the next backup occuring at a time that is calculated <em>back</em> from <strong>Full Backup Time (UTC)</strong>.
For example, if it&#8217;s currently 20:00 UTC and <strong>Full Backup Time (UTC)</strong> is <code>05:00 UTC</code>, then if you change the backup interval to <code>8 hours</code>, the next Incremental backup will occur at 21:00 UTC (eight hours prior to 05:00 UTC).
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Backup Retention</dt>
<dd>
<p>The amount of time each backup will be preserved, after which the backup will be deleted.
This can be <code>1 day</code>, <code>1 week</code>, <code>1 month</code>&#8230;&#8203;<code>11 months</code>, or <code>1 year</code>&#8230;&#8203;<code>10 years</code>.
The default value is <code>1 month</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Backups are <em>not</em> deleted when the cluster is deleted, and will continue to be stored in the connected cloud according to the retention period that was configured at the time the cluster was deleted.
Refer to the <a href="#delete-backup-vpc">Delete a Backup</a> section below for more information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>Backup Retention</strong> setting applies to <em>all</em> existing and future backups, including <a href="#create-manual-backup-vpc">manual</a> backups.
If you shorten the retention period, any existing backups that fall outside of the new retention period will be deleted.
<strong>Backups can be lost within minutes of submitting a new Autosave Schedule that has a shorter Backup Retention setting.</strong>
<strong>Deleted backups cannot be recovered.</strong></p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Full Backup Day</dt>
<dd>
<p>The day of the week on which the next Full backup is taken.
This can be <code>Monday</code>, <code>Tuesday</code>, <code>Wednesday</code>, <code>Thursday</code>, <code>Friday</code>, <code>Saturday</code>, <code>Sunday</code>, or <code>Every Day</code>.
The default value is <code>Sunday</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The value for <strong>Full Backup Day</strong> does not apply to the first automatic backup of the cluster.
The first automatic backup will occur at the next increment of the <strong>Backup Interval</strong>, no matter what day it is.
If the interval is <code>1 day</code>, then the first backup will simply occur the next time the <strong>Full Backup Time (UTC)</strong> occurs.
If the interval is <code>4 hours</code> or <code>8 hours</code>, then the first backup will occur at the first increment calculated <em>back</em> from <strong>Full Backup Time (UTC)</strong>.</p>
</div>
<div class="paragraph">
<p>After the first backup is taken, all subsequent Full backups will occur on the day set in <strong>Full Backup Day</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
If <strong>Full Backup Day</strong> is set to <code>Every Day</code>, then <strong>Backup Interval</strong> must be set to <code>1 day</code>.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Full Backup Time (UTC)</dt>
<dd>
<p>The time of day when a Full backup is taken (only occurs on the day set in <strong>Full Backup Day</strong>).
This can be any half-hour increment between <code>00:00 UTC</code> and <code>23:30 UTC</code>.
The default value is <code>05:00 UTC</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you change the value of <strong>Full Backup Time (UTC)</strong>, the next Incremental backup may occur at a different time than you might expect.
This is because the value for <strong>Backup Interval</strong> is calculated in increments of 4/8/24 hours from the <strong>Full Backup Time (UTC)</strong>.</p>
</div>
<div class="paragraph">
<p>For example, let&#8217;s say <strong>Backup Interval</strong> is currently set to <code>8 hours</code> and <strong>Full Backup Time (UTC)</strong> is set to <code>04:00 UTC</code>.
If the current time is 21:00 UTC, you would see that an Incremental backup was taken at 20:00 UTC (eight hour interval).
If you were to then set <strong>Full Backup Time (UTC)</strong> to <code>06:00 UTC</code>, then you would eventually see that another Incremental backup was taken at 22:00 UTC, just two hours later.
This is because the eight hour backup interval was recalculated <em>back</em> from the new <code>06:00 UTC</code> value.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Once you&#8217;re satisfied with the configuration, click <b class="button">Submit</b>.</p>
<div class="paragraph">
<p>Note that there can be a slight delay while the schedule is saved, after which the fly-out menu will close.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If no Full Autosave backup currently exists for the cluster (such as when a cluster is first deployed), then the first automatic backup will occur at the next increment of the <strong>Backup Interval</strong>, calculated <em>back</em> from <strong>Full Backup Time (UTC)</strong>.
(Refer to the description of <strong>Full Backup Day</strong> above.)</p>
</div>
<div class="paragraph">
<p>Once the backup has successfully completed, it will display in the <strong>Backups</strong> list.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-manual-backup-vpc"><a class="anchor" href="#create-manual-backup-vpc"></a>Create a Manual Backup</h3>
<div class="paragraph">
<p>In addition to <a href="#configure-automatic-backups-vpc">automatic backups</a>, you can also create on-demand manual backups of clusters.
A manual backup is always a Full backup, and is always scheduled immediately, irrespective of the cluster&#8217;s Autosave Schedule.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Permissions Required</div>
<div class="paragraph">
<p>To create a manual backup of a cluster, the following permissions are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must have the <a href="../projects/project-roles.html#project-owner-role" class="xref page"><code><strong>Project Owner</strong></code></a> role for the project that contains the cluster.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the cluster&#8217;s <strong>Backup &amp; Restore</strong> tab.</p>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to the <strong>Clusters</strong> tab in the main navigation.</p>
</li>
<li>
<p>Find and click on the cluster that you wish to create a manual backup of.</p>
<div class="paragraph">
<p>This opens the cluster with its <strong>Overview</strong> tab selected.</p>
</div>
</li>
<li>
<p>Click the <strong>Backup &amp; Restore</strong> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</li>
<li>
<p>Click <b class="button">Manual Backup</b>.</p>
<div class="paragraph">
<p>This opens the <strong>New Manual Backup</strong> fly-out menu.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="new-manual-backup-flyout.png" alt="The 'New Manual Backup' fly-out menu." width="500">
</div>
</div>
</li>
<li>
<p>To create a new manual backup, click <b class="button">Create Backup</b>.</p>
<div class="paragraph">
<p>Note that there can be a slight delay while the backup is scheduled, after which the fly-out menu will close.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the backup has successfully completed, it will display in the <strong>Backups</strong> list.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Manual backups are not retained indefinitely.
They are retained according to the retention period set in the <a href="#configure-automatic-backups-vpc">Autosave Schedule</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="view-backup-details-vpc"><a class="anchor" href="#view-backup-details-vpc"></a>View Backup Details</h3>
<div class="paragraph">
<p>You can view more detailed information about a cluster backup by inspecting it in the Capella UI.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Permissions Required</div>
<div class="paragraph">
<p>To view details about a backup, the following permissions are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must have the <a href="../projects/project-roles.html#project-owner-role" class="xref page"><code><strong>Project Owner</strong></code></a> role for the project that contains the cluster.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the cluster&#8217;s <strong>Backup &amp; Restore</strong> tab.</p>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to the <strong>Clusters</strong> tab in the main navigation.</p>
</li>
<li>
<p>Find and click on the cluster that contains the backup that you wish to inspect.</p>
<div class="paragraph">
<p>This opens the cluster with its <strong>Overview</strong> tab selected.</p>
</div>
</li>
<li>
<p>Click the <strong>Backup &amp; Restore</strong> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</li>
<li>
<p>In the <strong>Backups</strong> list, find and click on the backup that you wish to inspect.</p>
<div class="paragraph">
<p>This opens the backup&#8217;s fly-out menu.
The details available in the fly-out menu will be different depending on whether the backup is strictly a Full backup, or whether it is a Series backup.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="backup-inspect-flyout-series.png" alt="The inspect fly-out menu of a Series backup, showing details about a Full backup at the top, with multiple Incremental backups listed below it." width="500">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The backup&#8217;s fly-out menu principally contains details about the backup type.
For Manual backups, and any Autosave backups that don&#8217;t include Incremental backups, only the Full backup is listed.
For Series backups, the Full backup is listed, along with all associated Incremental backups that are currently in the series.</p>
</div>
<div class="paragraph">
<p>Each backup is listed with the date and time that it finished, along with the backup type (Full or Incremental).</p>
</div>
</div>
<div class="sect2">
<h3 id="delete-backup-vpc"><a class="anchor" href="#delete-backup-vpc"></a>Delete a Backup</h3>
<div class="paragraph">
<p>Backups are <em>not</em> deleted when the bucket is deleted, and will continue to be stored in the cluster up until the retention period that was configured at the time the bucket was deleted.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This information on retention applies only to Couchbase Server 6.6, hosted in your own cloud provider’s VPC.
It does not apply to to the majority of Capella Clusters&#8201;&#8212;&#8201;running Couchbase 7.0, hosted in Couchbase’s VPC, and fully managed for you.
For deletion details for these, see <a href="#manage-backup.adoc#delete-backup" class="xref unresolved">above</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Backups can be deleted in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Manual deletion</strong></p>
<div class="paragraph">
<p>The Capella UI does not currently support the manual deletion of cluster backups.
However, you can delete them directly from the connected cloud using your cloud provider&#8217;s console.
Refer to the <a href="#view-backup-files-vpc">View Backup Files</a> section for more information.</p>
</div>
</li>
<li>
<p><strong>Exceeding the backup retention period</strong></p>
<div class="paragraph">
<p>Once a backup&#8217;s age exceeds the value set for <strong>Backup Retention</strong> in the <a href="#configure-automatic-backups-vpc">Autosave Schedule</a>, it will automatically be deleted.</p>
</div>
</li>
<li>
<p><strong>The connected cloud is deleted</strong></p>
<div class="paragraph">
<p>If the connected cloud in which the backup resides is <a href="#clouds:manage-clouds.adoc#delete-cloud" class="xref unresolved">deleted</a>, then all of the backups that were stored in the connected cloud are deleted.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="view-backup-files-vpc"><a class="anchor" href="#view-backup-files-vpc"></a>View Backup Files</h3>
<div class="paragraph">
<p>For Capella clusters hosted by Couchbase, backups can be seen in the <strong>Backups</strong> tab for the cluster.
If you are hosting Capella in your own cloud provider&#8217;s VPC, then details of the Backup files are given below.</p>
</div>
<div class="paragraph">
<p>For customers hosting Capella in their own cloud provider&#8217;s VPC, cluster backups are stored in the <a href="#clouds:clouds.adoc" class="xref unresolved">connected cloud</a> in which the cluster resides.</p>
</div>
<div class="paragraph">
<p>For AWS, the backups for all clusters in a given connected cloud are located in an S3 bucket at the following location:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Amazon S3 > couchbase-<em>cloud-name-ID</em> > backups</pre>
</div>
</div>
<div class="paragraph">
<p>Within <code>backups</code> there is a separate directory for each cluster, each named with the cluster&#8217;s ID.
Each cluster directory contains all of the backups for an individual cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>At this time, the easiest way to find the cluster&#8217;s ID is to navigate to to the cluster&#8217;s <strong>Overview</strong> tab, and inspect the URL in your browser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>https://cloud.couchbase.com/projects/efba5ea1-a3f8-448c-b02d-14d69170c992/clusters/<strong>c4827955-d6fd-4108-b43a-ce195efccb9b</strong>?tenantId=58df477a-2342-4f63-8248-752f333f93c0</pre>
</div>
</div>
<div class="paragraph">
<p>The cluster ID directly follows <code>clusters/</code> in the URL.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So, as an example, if the name of the connected cloud is <code>My-Cloud</code> (with Cloud ID ending in <code>037df</code>), and the cluster&#8217;s ID is <code>0dd4cf22-0008-43a7-a382-5cf762ea9d7a</code>, then the cluster&#8217;s backup directory could be found at the following location in S3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/couchbase-my-cloud-037df/backups/0dd4cf22-0008-43a7-a382-5cf762ea9d7a/</pre>
</div>
</div>
<div class="sect3">
<h4 id="backup-file-layout"><a class="anchor" href="#backup-file-layout"></a>Backup File Layout</h4>
<div class="paragraph">
<p>Each sub-directory within a cluster&#8217;s backup directory is known as a <em>backup repository</em>.
A backup repository contains all of the bucket data, logs, and metadata associated with a backup (Full or Series).
When looking at the cluster&#8217;s <strong>Backup &amp; Restore</strong> tab in the Capella UI, one row in the <a href="#backup-vpc-summary-vpc">[backup-vpc-summary-vpc]</a> represents one backup repository in the cluster&#8217;s backup directory.</p>
</div>
<div class="paragraph">
<p>Each backup repository contains one Full backup.
If it is a Series backup, the repository contains one Full backup plus all the Incremental backups from the rest of the series.
The entire contents of a backup repository are required to perform a successful restore operation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To preserve an emergency copy of a backup, you can use your cloud provider&#8217;s console to download a single backup repository (one cluster backup) or the cluster&#8217;s entire backup directory (all of the cluster&#8217;s backups).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each backup repository is named with a <em>backup ID</em>.
The backup ID starts with the date of the Full backup, and is appended with a set of alphanumeric characters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2020-09-25-25e1476f</pre>
</div>
</div>
<div class="paragraph">
<p>A backup repository that contains a manual backup also has <code>-manual</code> appended to its ID.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2020-09-24-e7463699-manual</pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example layout of a backup repository containing a Series backup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>S3/couchbase-my-cloud-037df/backups/0dd4cf22-0008-43a7-a382-5cf762ea9d7a/   # Cluster backup directory
|-- 2020-09-25-25e1476f     # Backup repository
|   |-- 2020-09-25-25e1476f
|   |   |-- {<em>year</em>}-{<em>month</em>}-{<em>day</em>}T{<em>hr</em>}_{<em>min</em>}_{<em>sec</em>}.{<em>nanos</em>}  # First backup in series (Full)
|   |   |   |-- {bucket name}-{bucket uuid}  # Bucket backup
|   |   |   |-- travel-sample-4dfa8b44dce990c5580bd13716c30885  # Bucket backup
|   |   |   |   |-- data
|   |   |   |   |   |-- .storage_meta
|   |   |   |   |   |-- failoverlog_0.fol
|   |   |   |   |   |-- failoverlog_1.fol
|   |   |   |   |   |-- .shard_0.sqlite.0   # Cluster data
|   |   |   |   |   |-- .shard_1.sqlite.0   # Cluster data
|   |   |   |   |   |-- snapshot_0.snp
|   |   |   |   |   |-- snapshot_1.snp
|   |   |   |   |   |-- stats_0.json
|   |   |   |   |   |-- stats_1.json
|   |   |   |   |-- .restrictions.json
|   |   |   |   |-- analytics.json
|   |   |   |   |-- bucket-config.json
|   |   |   |   |-- full-text.json  # Full Text Indexes
|   |   |   |   |-- gsi.json    # Global Secondary Indexes
|   |   |   |   |-- range.json
|   |   |   |   |-- views.json
|   |   |   |-- .info
|   |   |   |-- .version
|   |   |   |-- events.json
|   |   |   |-- fts-aliases.json
|   |   |   |-- plan.json
|   |   |-- 2020-09-25T04_32_19.934323735Z  # Second backup in series (Incremental)
|   |   |-- 2020-09-25T08_32_29.707502389Z  # Third backup in series (Incremental)
|   |   |-- backup-meta.json    # Backup configuration
|   |-- logs
|   |-- .backup</pre>
</div>
</div>
<div class="sect4">
<h5 id="file-descriptions"><a class="anchor" href="#file-descriptions"></a>File Descriptions</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">backup-meta.json</dt>
<dd>
<p>This file is used to store the backup configuration for the backup repository.
Each time a backup is run it will read these options, connect to the cluster, and backup data from the point where it last left off.
All parameters in this file are configured automatically by Couchbase Capella.</p>
</dd>
<dt class="hdlist1">gsi.json</dt>
<dd>
<p>This file contains a backup of all global secondary indexes in a particular bucket.</p>
</dd>
<dt class="hdlist1">full-text.json</dt>
<dd>
<p>This file contains a backup of all Full Text Indexes in a particular bucket.</p>
</dd>
<dt class="hdlist1">.shard_*.sqlite.0</dt>
<dd>
<p>These are sqlite files that contain the cluster data.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Capella","components":["cloud"],"url":"/cloud/index.html","latestVersions":{"cloud":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../_/js/site.js"></script>
<script defer src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
</body>
</html>
