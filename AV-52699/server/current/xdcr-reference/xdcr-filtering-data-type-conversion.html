<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>XDCR Data-Type Conversion | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="&lt;em&gt;XDCR filtering expressions&lt;/em&gt; are supported by data-type &lt;em&gt;conversion&lt;/em&gt; and &lt;em&gt;collation&lt;/em&gt;.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/xdcr-reference/xdcr-filtering-data-type-conversion.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/xdcr-reference/pages/xdcr-filtering-data-type-conversion.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="xdcr-reference-intro.html">XDCR Reference</a></li>
<li class="crumb"><a href="xdcr-filtering-reference-intro.html">Filtering</a></li>
<li class="crumb"><a href="xdcr-filtering-data-type-conversion.html">Data-Type Conversion</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">XDCR Data-Type Conversion</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<em>XDCR filtering expressions</em> are supported by data-type <em>conversion</em> and <em>collation</em>.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding-data-type-conversion"><a class="anchor" href="#understanding-data-type-conversion"></a>Understanding Data-Type Conversion</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>XDCR filtering expressions</em> allow case-sensitive matches, comparisons, logical and other operations to be performed on values within documents.
When values referenced by a filtering expression have different data types, either <em>conversion</em> or <em>collation</em> is performed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Conversion</em> means that one or both of the values is converted from its own data type to a different one, so that the operation can be performed.</p>
</li>
<li>
<p><em>Collation</em> means that conversion is not possible; and that therefore, the operation will be resolved by value-comparison according to a set of rules.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All conversion performed by XDCR is <em>implicit</em>, meaning that it is performed automatically within the system.
No <em>explicit</em> conversion (that is, data-type conversion selected and imposed by the administrator) is supported.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-data-types"><a class="anchor" href="#supported-data-types"></a>Supported Data Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The data types supported by XDCR Filtering are listed below, in descending order of <em>precedence</em> &#8212; the lowest precedence-value (and earliest position) therefore indicating the highest precedence.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Precedence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Data Type</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When an expression entails values of the same data type, no conversion is required.
When the data types differ, and conversion or collation is therefore required, data types take precedence in accordance with their closeness to the top of the list.
For example, if an operation refers to two values, one of which is <em>Invalid</em> and the other of which is <em>Boolean</em>, the <em>Invalid</em> value determines the result.
As another example, if an operation refers to two values, one of which is <em>Boolean</em> and the other <em>Numeric</em>, the <em>Numeric</em> value is if possible converted to <em>Boolean</em>, and the operation performed.</p>
</div>
<div class="paragraph">
<p>The data types listed above, and their order of precedence, can be compared with those used by <a href="#n1ql:n1ql-language-reference/datatypes.adoc#collation" class="xref unresolved">SQL++</a> &#8212; which are <em>similar</em>, but not identical.</p>
</div>
<div class="paragraph">
<p>See <a href="xdcr-filtering-expressions.html" class="xref page">XDCR Filtering Expressions</a>, for information on how comparisons can be performed, using the data types listed above.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="numeric-type-conversion"><a class="anchor" href="#numeric-type-conversion"></a>Numeric Data-Type Internal Conversions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of the <em>Numeric</em> data type (listed above, in <a href="#supported-data-types">Supported Data Types</a>) always further corresponds to one of three <em>internal</em> numeric data types; which are <em>unsigned integer</em>, <em>integer</em>, and <em>float</em>.
When two <em>Numeric</em> data-type values are referenced in a filtering expression, comparisons (<em>e.g.</em> equality, inequality) and operations (<em>e.g.</em> addition, subtraction) are performed as indicated in the following table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Type 1</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type 2</strong></th>
<th class="tableblock halign-left valign-top"><strong>Comparison</strong></th>
<th class="tableblock halign-left valign-top"><strong>Operation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The comparison is performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation is performed.
If the operation results in a negative value, both values are converted to <code>Int</code>, and the operation is repeated; <em>unless</em> one or both conversions to <code>Int</code> would result in overflow, in which case <code>InvalidValue</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>Int</code> is negative, <code>Uint</code> is converted to <code>Int</code>, and the comparison is performed; <em>unless</em> the conversion to <code>Int</code> would result in overflow, in which case <code>InvalidValue</code> is returned.</p>
<p class="tableblock">If <code>Int</code> is positive, <code>Int</code> is converted to <code>Uint</code>, and the comparison is performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation is performed.
If the result is an <code>Int</code>, the <code>Int</code> is returned.
If the result is a valid <code>Uint</code>, the <code>Uint</code> is returned.
If the result would be <em>non-valid</em> as a <code>Uint</code> (due to the result&#8217;s being negative), the result is converted to <code>Int</code>, and is returned as such; <em>unless</em> the conversion to <code>Int</code> would result in overflow, in which case, <code>InvalidValue</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code> is converted to <code>Float</code>, and the comparison is performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code> is converted to <code>Float</code>, and the operation is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code> is converted to <code>Float</code>, and the comparison is performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code> is converted to <code>Float</code>, and the operation is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The comparison is performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The comparison is performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation is performed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="implicit-conversion-vs-collation-comparison"><a class="anchor" href="#implicit-conversion-vs-collation-comparison"></a>Implicit Conversion versus Collation Comparison</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Implicit conversion</em> occurs when Couchbase Server converts a value from its existing data type to another, so that a comparison or operation can be performed on values of the same data type.
Implicit conversion is only <em>sometimes</em> possible: therefore, when an existing data type <em>cannot</em> be implicitly converted into another, <em>collation comparison</em> is used instead.</p>
</div>
<div class="paragraph">
<p>Collation comparison works as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Equality</em> and <em>inequality</em>.
Checking for <em>equality</em> between different data types returns <code>false</code>.
Therefore, if <code>var1</code> and <code>var2</code> represent different data types, the expression <code>var1 == var2</code> returns <code>false</code>.</p>
<div class="paragraph">
<p>Checking for <em>inequality</em> between different data types returns <code>true</code>.
Therefore, if <code>var1</code> and <code>var2</code> represent different data types, the expression <code>var1 != var2</code> returns <code>true</code>.</p>
</div>
</li>
<li>
<p><em>Regular expression</em> matches.
Checking for a regular-expression <em>match</em> between different data types returns <code>false</code>.
Therefore, if <code>var1</code> and <code>var2</code> represent different data types, the expression <code>REGEXP_CONTAINS(var1, var2)</code> returns <code>false</code>.</p>
<div class="paragraph">
<p>Checking for a regular-expression <em>non-match</em> between different data types returns <code>true</code>.
Therefore, if <code>var1</code> and <code>var2</code> represent different data types, the expression <code>NOT REGEXP_CONTAINS(var1, var2)</code> returns <code>true</code>.</p>
</div>
</li>
<li>
<p><em>Magnitude comparison</em> between different data types is resolved in accordance with the respective positions of the data types in the list of <a href="#supported-data-types">Supported Data Types</a>).
This list presents the supported data types in order of <em>precedence</em>: note that <em>precedence</em> and <em>magnitude</em> are inversely proportional; and that therefore, the data type at the bottom of the list (Binary) has the least precedence and greatest magnitude; while the data type at the top (Invalid) has the greatest precedence and least magnitude.</p>
<div class="paragraph">
<p>Consequently, if the data type of <code>var1</code> is <em>below</em> that of <code>var2</code> in the list, the expression <code>var1 &gt; var2</code> returns <code>true</code>; and the expression <code>var1 &lt; var2</code> returns <code>false</code>.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-type-conversions"><a class="anchor" href="#supported-type-conversions"></a>Supported and Unsupported Type Conversions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following diagram lists supported and unsupported type conversions.
Conversion-support is indicated by the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Conversion can be performed.</p>
</li>
<li>
<p><span class="image"><img src="_images/checkmark-orange-sm.png" alt="checkmark orange sm"></span> Conversion can be performed under certain conditions.</p>
</li>
<li>
<p><span class="image"><img src="_images/dash-black-inline.png" alt="dash black inline"></span> Conversion is not required.</p>
</li>
<li>
<p><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Conversion cannot be performed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each cell in the diagram bears one or more integers: these correspond to explanatory annotations that are listed further below.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/DataTypeConversionTableWithAnnotations3.png" alt="DataTypeConversionTableWithAnnotations3" width="800">
</div>
</div>
<div class="paragraph">
<p>These conversion-support options are described in the following table, each row of which starts with an integer that corresponds to an annotation in the diagram above.
Notes on comparison-procedures are also provided.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 8.6956%;">
<col style="width: 15.2173%;">
<col style="width: 15.2173%;">
<col style="width: 30.4347%;">
<col style="width: 30.4351%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">#</th>
<th class="tableblock halign-left valign-top"><strong>From</strong></th>
<th class="tableblock halign-left valign-top"><strong>To</strong></th>
<th class="tableblock halign-left valign-top"><strong>Validity</strong></th>
<th class="tableblock halign-left valign-top"><strong>Comparison</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Boolean-and-Object&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Same-Type&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/dash-black-inline.png" alt="dash black inline"></span> No conversion need be performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard comparison for the type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Numeric</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Numeric</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> <span class="image"><img src="_images/checkmark-orange-sm.png" alt="checkmark orange sm"></span> <span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Valid, possibly valid, or invalid.
See <a href="#numeric-type-conversion">Numeric Data-Type Internal Conversions</a>, above.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#numeric-type-conversion">Numeric Data-Type Internal Conversions</a>, above, for details on comparison.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Numeric</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid for <code>Int</code>, <code>Uint</code>, and <code>Float</code>.
In each case, <code>Numeric</code> is converted to <code>String</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard string-comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Numeric</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-orange-sm.png" alt="checkmark orange sm"></span> Valid if <code>String</code> can be converted to <code>Int</code>; otherwise valid if <code>String</code> can be converted to <code>Float</code>; otherwise invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard numeric-comparison is performed, if possible.
Otherwise, collation comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Regex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Regex-and-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.
No conversion can occur, except to <code>Null</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed, except for <code>Regex</code> and <code>Null</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Pcre</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Pcre-and-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.
No conversion can occur, except to <code>Null</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed, except for <code>Pcre</code> and <code>Null</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.
No conversion can occur.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard comparison for the type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid.
The <code>Boolean</code> values <code>true</code> and <code>false</code> are converted to the <code>Int</code> values <code>1</code> and <code>0</code> respectively.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard numeric-comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid.
The <code>Boolean</code> values <code>true</code> and <code>false</code> are converted to the <code>Uint</code> values <code>1</code> and <code>0</code> respectively.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard numeric-comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid.
The <code>Boolean</code> values <code>true</code> and <code>false</code> are converted to the <code>Float</code> values <code>1.0</code> and <code>0.0</code> respectively.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard numeric-comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid.
A <code>Boolean</code> can be converted to a <code>String</code> whose value is either <code>"true"</code> or <code>"false"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string-comparison <code>"true" &gt; "false"</code> returns <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Array-and-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed for all except <code>Array</code> and <code>Null</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Object-and-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed for all except <code>Object</code> and <code>Null</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Time-and-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed for all except <code>Time</code> and <code>Null</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Regex&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Regex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed for all except <code>Regex</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Pcre&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Pcre</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed for all except <code>Pcre</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Null&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid.
<code>&lt;Any&gt;</code> is converted a <code>non-Null</code> value, for comparison with <code>Null</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The comparison <code>non-Null &gt; Null</code> returns <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid for all <code>Int</code> values.
The <code>Int</code> value <code>0</code> is converted to the <code>Boolean</code> value <code>false</code>; all other <code>Int</code> values are converted to the <code>Boolean</code> value <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The boolean-comparison <code>true &gt; false</code> returns <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid for all <code>Uint</code> values.
The <code>Uint</code> value <code>0</code> is converted to the <code>Boolean</code> value <code>false</code>; all other <code>Uint</code> values are converted to the <code>Boolean</code> value <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The boolean-comparison <code>true &gt; false</code> returns <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-green-sm.png" alt="checkmark green sm"></span> Valid for all <code>Float</code> values.
The <code>Float</code> value <code>0.0</code> is converted to the <code>Boolean</code> value <code>false</code>; all other <code>Float</code> values are converted to the <code>Boolean</code> value <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The boolean-comparison <code>true &gt; false</code> returns <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-orange-sm.png" alt="checkmark orange sm"></span> Valid if <code>String</code> is case-insensitive <code>"true"</code> or <code>"false"</code>; in which case <code>String</code> is converted to its <code>Boolean</code> equivalent.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The boolean-comparison <code>true &gt; false</code> returns <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Array&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Object&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;Any-Except-Time-and-String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cross-mark-red-sm-wide.png" alt="cross mark red sm wide"></span> Invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collation comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/checkmark-orange-sm.png" alt="checkmark orange sm"></span> Valid if <code>String</code> can be parsed as a parameter to the <code>DATE</code> function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard comparison is performed if valid; otherwise, collation comparison is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/dash-black-inline.png" alt="dash black inline"></span> No conversion need be performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See the <a href="#note-for-row-25">Note for Row 25</a>, below.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/dash-black-inline.png" alt="dash black inline"></span> No conversion need be performed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See the <a href="#note-for-row-26">Note for Row 26</a>, below.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="note-for-row-25"><a class="anchor" href="#note-for-row-25"></a>Note for Row 25</h3>
<div class="paragraph">
<p>Comparison is performed along the following lines: the specified expression is first applied to the arrays themselves, based on the respective array-lengths.
For example, if the expression is <code>arg_1 &gt; arg_2</code>, this gets applied as <code>Array_1 &gt; Array_2</code>; and if the length of <code>Array_1</code> is indeed greater than the length of <code>Array_2</code>, the condition is considered to have been met; whereby <code>true</code> is returned, and the comparison-process ends.</p>
</div>
<div class="paragraph">
<p>In cases where the condition specified by the expression is one of inequality (<em>i.e.</em>, <code>&gt;</code>, <code>&lt;</code>, <code>!=</code>), the array-lengths are <em>not</em> equal, and the specified condition is <em>not</em> met (for example, where the expression is <code>arg_1 &gt; arg_2</code>, and the length of <code>Array_1</code> is less than that of <code>Array_2</code>), <code>false</code> is returned, and the comparison-process ends.</p>
</div>
<div class="paragraph">
<p>In cases where the condition specified by the expression is one of inequality, and the condition is not met due to the array-lengths being <em>equal</em>, the comparison-process continues as follows: in sequence, pairs of correspondingly positioned objects from the arrays are compared, until the specified requirement is met, or is finally determined <em>not</em> to have been met.
For example, if the expression is <code>arg_1 &gt; arg_2</code>, this gets applied as <code>Array_1[0] &gt; Array_2[0]</code>, <code>Array_1[1] &gt; Array_2[1]</code>, and so forth.</p>
</div>
</div>
<div class="sect2">
<h3 id="note-for-row-26"><a class="anchor" href="#note-for-row-26"></a>Note for Row 26</h3>
<div class="paragraph">
<p>Comparison is performed along the following lines: the specified expression is first applied to the objects in terms of their respective lengths.
For example, if the expression is <code>arg_1 &gt; arg_2</code>, this gets applied as <code>Object_1 &gt; Object_2</code>; and if the length of <code>Object_1</code> is indeed greater than the length of <code>Object_2</code>, the requirement is considered to have been met; whereby <code>true</code> is returned, and the comparison-process ends.</p>
</div>
<div class="paragraph">
<p>In cases where the condition specified by the expression is one of inequality (<em>i.e.</em>, <code>&gt;</code>, <code>&lt;</code>, <code>!=</code>), the object-lengths are <em>not</em> equal, and the specified condition is <em>not</em> met (for example, where the expression is <code>arg_1 &gt; arg_2</code>, and the length of <code>Object_1</code> is less than that of <code>Object_2</code>), <code>false</code> is returned, and the comparison-process ends.</p>
</div>
<div class="paragraph">
<p>In cases where the condition specified by the expression is one of inequality, and the condition is not met due to the object-lengths being <em>equal</em>, the comparison-process continues as follows: in sequence, pairs of correspondingly positioned data-bytes from the objects are compared, until the specified requirement is met, or is finally determined <em>not</em> to have been met.
For example, if the expression is <code>arg_1 &gt; arg_2</code>, this gets applied as <code>Object_1[0] &gt; Object_2[0]</code>, <code>Object_1[1] &gt; Object_2[1]</code>, and so forth.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implicit-conversion-modes"><a class="anchor" href="#implicit-conversion-modes"></a>Implicit Conversion Modes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each filter expression requires implicit conversion to be applied to one of the following combinations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>A Constant and a Variable</em>.
The filter expression contains a user-specified constant and a variable, which are to be compared.
Couchbase Server determines the data type of the constant, and attempts to apply this data type to the value of the variable.</p>
</li>
<li>
<p><em>Two Variables</em>.
The filter expression specifies two variables, which are to be compared.
Couchbase Server determines the data type of the variables from the corresponding values in the JSON document to which filtering is currently being applied.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These modes are described in the subsections below.</p>
</div>
<div class="sect2">
<h3 id="implicit-conversion-of-constant-and-variable"><a class="anchor" href="#implicit-conversion-of-constant-and-variable"></a>Implicit Conversion of Constant and Variable.</h3>
<div class="paragraph">
<p>When a constant and a variable are to be compared, Couchbase Server determines the data type of the constant, and attempts to apply this also to the value of the variable.</p>
</div>
<div class="sect3">
<h4 id="data-type-conversion-of-user-specified-constants"><a class="anchor" href="#data-type-conversion-of-user-specified-constants"></a>Data-Type Conversion of User-Specified Constants</h4>
<div class="paragraph">
<p>When the user explicitly enters a <em>constant</em> into a filter expression, the data type for the constant is evaluated by Couchbase Server, as part of its process for <em>tokenizing</em> the expression (that is, parsing the expression into identifiable lexical components).</p>
</div>
<div class="paragraph">
<p>The correspondences between token formats and duly assigned data types is described in the following table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Token Format</strong></th>
<th class="tableblock halign-left valign-top"><strong>Assigned Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any character-sequence enclosed either by double quotes (<code>""</code>) or by single quotes (<code>''</code>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable == "a string"</code></p>
<p class="tableblock"><code>Variable == 'another string'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any numeric values without precision delimiter or mantissa.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable &gt; 1234</code></p>
<p class="tableblock"><code>variable &lt; -2345</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any number representing a valid <code>golang</code> float, optionally with precision delimiter and/or mantissa.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable &gt;= 1.2343e+25</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any of the following, specified without enclosing punctuation (such as commas or inverted commas):
<code>true</code>, <code>TRUE</code>, <code>false</code>, <code>FALSE</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable == true</code></p>
<p class="tableblock"><code>variable != FALSE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Either of the keyword-phrases <code>IS NULL</code> and <code>IS NOT NULL</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable IS NULL</code></p>
<p class="tableblock"><code>variable IS NOT NULL</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valid hard-coded strings wrapped by the <code>DATE()</code> function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable &lt; DATE("2018-10-17T00:01:02Z")</code></p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="mathematical-data-types"><a class="anchor" href="#mathematical-data-types"></a>Mathematical Data Types</h5>
<div class="paragraph">
<p><em>Mathematical expressions</em> may be entered as constants.</p>
</div>
<div class="paragraph">
<p><strong>Division</strong></p>
</div>
<div class="paragraph">
<p>When an expression includes a <em>division</em> operation, the result of which is intended to be a decimal number, the operands themselves must be specified as (or, if they are variables, allowed to be implicitly cast to) decimals.</p>
</div>
<div class="paragraph">
<p>For example, if <code>A == 4</code> returns <code>true</code>, then <code>1 / A == 0.25</code> returns <code>false</code>; because the expression <code>1 / A</code> casts <code>A</code> implicitly to <code>Int</code>, and duly returns an <code>Int</code>.
Thus, <code>Int(1 / 4) == 0</code> returns <code>true</code>.</p>
</div>
<div class="paragraph">
<p>On the other hand, <code>1.0 / A == 0.25</code> returns <code>true</code>; because the expression <code>1.0 / A</code> casts <code>A</code> implicitly to <code>Float</code>, and duly returns a <code>Float</code>.
Thus, <code>1.0 / 4.0 == 0.25</code> returns <code>true</code>.</p>
</div>
<div id="not-a-number-values" class="paragraph">
<p><strong>Not-a-Number Values</strong></p>
</div>
<div class="paragraph">
<p><code>NaN</code> (<em>Not-a-Number</em>) float-values are considered <em>less</em> than any other real number.</p>
</div>
<div class="paragraph">
<p>Two <code>NaNs</code> do <em>not</em> yield equality.
Note, however, that the operators <code>&lt;&#61;</code> and <code>&#61;&gt;</code> return <code>true</code>: this differs from the <code>golang</code> standard (according to which these operators return <code>false</code>).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="data-type-conversion-of-variable-values"><a class="anchor" href="#data-type-conversion-of-variable-values"></a>Data-Type Conversion of Variable-Values, for Comparison with Constants</h4>
<div class="paragraph">
<p>When an expression includes both a constant and a variable, <a href="#implicit-conversion-to-constant-data-type">Implicit Conversion to Constant Data-Type</a> is performed on the constant.
Then, the data-type derived from evaluation of the constant is assigned, attemptedly, to the value represented by the variable.</p>
</div>
<div class="paragraph">
<p>For example, given the expression <code>variable &gt; 4.5</code>, the constant <code>4.5</code> is determined to be a <code>Float</code>.
The value of <code>variable</code> is then examined; and if determined not itself to be a <code>Float</code>, is attemptedly converted to <code>Float</code>.</p>
</div>
<div class="paragraph">
<p>If conversion of the variable&#8217;s value into the data type specified by the user is not possible, collation comparison is performed.
For example, given the expression <code>variable != true</code>, if the value of <code>variable</code> is not <code>Boolean</code>, collation comparison is performed, and <code>true</code> is returned, due to the data types' being different.</p>
</div>
<div class="paragraph">
<p>If the data-type of the user-specified constant is <code>Numeric</code>, and the value of the variable is also <code>Numeric</code>, the appropriate numeric data-type internal conversion is performed (see <a href="#numeric-type-conversion">above</a>).</p>
</div>
<div class="paragraph">
<p>If the value is <code>NaN</code>, the value is converted to the <code>Invalid</code> data-type, and collation comparison is performed.
For example, given the expression <code>ASIN(variable) &gt; 0</code>, if the value of <code>variable</code> is <code>93</code>, then <code>ASIN(93)</code>
results in a <code>NaN</code> value, which is then duly converted to <code>Invalid</code>.
Collation comparison is then performed, and returns that the <code>NaN</code> is smaller than the <code>Int</code>.</p>
</div>
<div class="paragraph">
<p>Alternatively, given the expression <code>ASIN(variable) != 0</code>, collation comparison returns <code>true</code>, due to the comparison&#8217;s being made between different data types (<code>Invalid</code> and <code>Int</code>).</p>
</div>
<div class="paragraph">
<p>An explanation of comparisons with <code>NaN</code> values is provided in <a href="#not-a-number-values">Not-a-Number Values</a>, above.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="implicit-conversion-between-variables"><a class="anchor" href="#implicit-conversion-between-variables"></a>Implicit Conversion between Variables</h3>
<div class="paragraph">
<p>When an expression consists entirely of variables (for example, <code>variable != otherVariable</code>), Couchbase Server retrieves the corresponding values from the JSON document to which filtering is currently being applied, and performs conversions on the values.</p>
</div>
<div class="paragraph">
<p>The result of conversion may vary for each variable, document by document, based on changes encountered in JSON definitions.</p>
</div>
<div class="paragraph">
<p>Couchbase Server performs conversion differently, according to whether both values are determined to be <code>Numeric</code>.</p>
</div>
<div class="sect3">
<h4 id="numeric-comparison"><a class="anchor" href="#numeric-comparison"></a>Numeric Comparison</h4>
<div class="paragraph">
<p>If the values of both variables are determined to be <code>Numeric</code>, the appropriate numerical comparison from those described in <a href="#data-type-conversion-of-user-specified-constants">Data Type Conversion of User-Specified Constants</a> is made.</p>
</div>
</div>
<div class="sect3">
<h4 id="non-numeric-comparison"><a class="anchor" href="#non-numeric-comparison"></a>Non-Numeric Comparison</h4>
<div class="paragraph">
<p>If the values for the variables are not both numeric, both require non-numeric conversion.
Conversion is performed based on the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Whether the perceived types support comparison.
See the diagram in <a href="#supported-type-conversions">Supported and Unsupported Type Conversions</a> for information.</p>
</li>
<li>
<p>Whether, if the perceived types <em>do</em> support comparison, a successful attempt can be made to convert the less restrictive data type to the more restricted.
See the table in <a href="#supported-data-types">Supported Data Types</a>, for information.</p>
</li>
<li>
<p>Whether, if the less restrictive data type <em>cannot</em> be converted to the more restricted, the more restricted can be converted to the less.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If conversion cannot be achieved by the above sequence, collation comparison is performed.</p>
</div>
<div class="paragraph">
<p>For example, given the expression <code>variable1 &gt; variable2</code>, where <code>variable1</code> is the <code>Boolean</code> value <code>true</code>, and <code>variable2</code> is the <code>String</code> value <code>"test"</code>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The perceived types are checked as to whether they support direct comparison.
They do not.</p>
</li>
<li>
<p>The <code>String</code> value <code>test</code> is attemptedly cast to a <code>Boolean</code>: which fails.</p>
</li>
<li>
<p>The <code>Boolean</code> value <code>true</code> is attemptedly cast to a <code>String</code>: which succeeds &#8212; the new <code>String</code> value being <code>"true"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A comparison between the strings is now performed, with the result being <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Alternatively, given the same expression, where <code>variable1</code> is now the <code>String</code> value <code>"test"</code>, and <code>variable2</code> is a JSON array; conversion cannot be achieved by the sequence.
Therefore, collation comparison is performed; the result of which is <code>false</code>, because <code>Array</code> is of lower precedence (and therefore, higher magnitude) than <code>String</code> &#8212; see <a href="#supported-data-types">Supported Data Types</a> for the precedence-list of data types.</p>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
