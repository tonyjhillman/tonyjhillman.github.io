<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>cbcollect_info | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="The &lt;code class&#x3D;&quot;cmd&quot;&gt;cbcollect_info&lt;/code&gt; tool provides detailed statistics for a specific node.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/cli/cbcollect-info-tool.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/cli/pages/cbcollect-info-tool.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="cli-intro.html">CLI Reference</a></li>
<li class="crumb"><a href="cbcollect-info-tool.html">cbcollect_info</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbcollect_info</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The <code class="cmd">cbcollect_info</code> tool provides detailed statistics for a specific node.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax"><a class="anchor" href="#syntax"></a>Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbcollect_info [options] [output-file]</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>output-file</code> is the name of the .zip file containing the diagnostic information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code class="cmd">cbcollect_info</code> command gathers statistics from an individual node in the cluster.</p>
</div>
<div class="paragraph">
<p>To collect diagnostic information for an entire cluster, run the command for every node that exists in that cluster.
If you are experiencing problems with multiple nodes in a cluster, you may need to run it on all nodes in a cluster.</p>
</div>
<div class="paragraph">
<p>A root account is required to run this command and collect all the server information.
There are internal server files and directories that this tool accesses that require root privileges.</p>
</div>
<div class="paragraph">
<p>To use this command, remotely connect to the machine which contains the Couchbase Server then issue the command with appropriate options.
This command is typically run under the direction of technical support at Couchbase and generates a large .zip file.
This archive contains files which contain performance statistics and server logs.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Attention"></i>
</td>
<td class="content">
<code class="cmd">cbcollect_info</code> is one of the most important diagnostic tools.
Run <code class="cmd">cbcollect_info</code> on all nodes in the cluster, and upload all of the resulting files to Couchbase technical support.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This tool is at the following locations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Tool locations</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operating System</th>
<th class="tableblock halign-left valign-top">Location</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/opt/couchbase/bin/cbcollect_info</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">C:\Program Files\Couchbase\Server\bin\cbcollect_info</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mac OS X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/Applications/Couchbase Server.app/Contents/Resources/couchbase-core/bin/cbcollect_info</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The tool creates the following log files in the output archive:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Output files</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File</th>
<th class="tableblock halign-left valign-top">Log Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup_service.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information on activities performed by the Backup Service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cbcollect_info.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information about the performance of <code class="cmd">cbcollect_info</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>couchbase.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains system-level information, primarily the result of shell commands.
Generated at collection-time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddocs.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the design documents for each bucket in JSON format, taken from the view file on disk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>diag.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A diagnostic summary of the cluster manager, obtained by downloading <code>/diag</code> output from the node&#8217;s running service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kv_trace.json</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata used for Phosphor KV tracing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ini.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A dump of all ini configuration files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>master_events.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains major events that have affected the cluster, like bucket creation, and rebalance information such as vBucket movement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memcached.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information relating to the core <code class="api">memcached</code> component, including DCP stream requests and slow operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.analytics.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the Analytics service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.analytics_debug.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug-level troubleshooting log for the Analytics service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.analytics_shutdown.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shutdown log for the Analytics service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.analytics_trace.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trace-level troubleshooting log for the Analytics service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.babysitter.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the babysitter process which is responsible for spawning all Couchbase Server processes and respawning them where necessary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.couchdb.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the couchdb subsystem which underlies map-reduce.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.debug.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug-level troubleshooting for the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.error.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error-level troubleshooting log for the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.eventing.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eventing service logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.fts.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting logs for the full-text search service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.goxdcr.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the cross datacenter replication (XDCR) component used in Couchbase Server versions after 4.0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.http_access.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The admin access log records server requests (including administrator logins) to the REST API or Couchbase Server web console.
It is output in common log format and contains several important fields such as remote client IP, timestamp, GET/POST request and resource requested, HTTP status code, and so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.http_access_internal.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The admin access log records internal server requests (including administrator logins) to the REST API or Couchbase Server web console.
It is output in common log format and contains several important fields such as remote client IP, timestamp, GET/POST request and resource requested, HTTP status code, and so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.indexer.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the indexing and storage subsystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.info.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Info-level troubleshooting log for the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.json_rpc.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON RPC logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.mapreduce_errors.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JavaScript and other view-processing errors are reported in this file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.metakv.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the metakv store, a cluster-wide metadata store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.ns_couchdb.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information related to starting up the CouchDB subsystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.projector.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the projector process which is responsible for sending appropriate mutations from Data nodes to Index nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.query.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query service logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.reports.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains progress and crash reports for the Erlang processes.
Due to the nature of Erlang, processes crash and restart upon an error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.ssl_proxy.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the ssl proxy spawned by the cluster manager.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.stats.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains periodic statistic dumps from the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.views.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the view engine, predominantly focussing on the changing of partition states.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.xdcr.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the cross datacenter replication (XDCR) component used in Couchbase Server versions prior to 4.0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.xdcr_errors.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error-level troubleshooting log for the cross datacenter replication (XDCR) component used in Couchbase Server versions prior to 4.0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.xdcr_target.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log of traces from cross datacenter replication (XDCR) target endpoint handlers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_server.xcdr_trace.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trace-level troubleshooting log for the cross datacenter replication (XDCR) component used in Couchbase Server versions prior to 4.0.
Unless trace-level logging is explicitly turned on this log is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>projector_pprof.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Goroutine dump captured for the projector process.
A goroutine dump is the equivalent of a full thread dump in other languages and can give valuable insight into what a process is doing at that time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains output from various <a href="cbstats-intro.html" class="xref page">cbstats</a> commands.
Generated at collection-time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>syslog.tar.gz</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archive of various system-level logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd_journal.gz</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Linux only.) The logs from <code class="api">systemd</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>system:completed_requests</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of recent, completed requests.
See <a href="../manage/monitor/monitoring-n1ql-query.html#sys-completed-req" class="xref page">system:completed_requests</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="options"><a class="anchor" href="#options"></a>Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are the command options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. cbcollect_info options</caption>
<colgroup>
<col style="width: 37.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h, --help</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shows help information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-r ROOT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the root directory.
Defaults to the parent directory of the directory containing <code class="cmd">cbcollect_info</code>, e.g.
<code>/opt/couchbase/bin/..</code> on Linux.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-v</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increases the verbosity level: If specified, debugging information will be included in the console display.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies that only product-related information should be gathered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dumps a list of commands required by <code class="cmd">cbcollect_info</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--bypass-sensitive-data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>true</code>, skips collecting breakpad crash-dumps.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--task-regexp=TASK_REGEXP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runs only those tasks that match the specified regular expression.
(This flag is provided for debugging purposes.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--tmp-dir=TMP_DIR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the <code>tmp</code> directory that is used during data processing.
This setting overrides any existing setting of the <code>TMPDIR</code> environment variable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--initargs=INITARGS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the server <code>initargs</code> path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--log-redaction-level=REDACT_LEVEL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the redaction level for the logs collected.
The level can be either <code>none</code> (the default) or <code>partial</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--log-redaction-salt=SALT_VALUE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Salts the hashing of tagged data.
The default value is a random uuid.
If this flag is used, a <code>--log-redaction-level</code> value should be specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--upload-host=UPLOAD_HOST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the fully-qualified domain name of the host you want the logs uploaded to.
The protocol prefix of the domain name, <code>https://</code>, is optional.
It is the default-only supported protocol.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--customer=UPLOAD_CUSTOMER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the customer name.
This value must be a string whose maximum length is 50 characters.
Only the following characters can be used: [A-Za-z0-9_.-].
If any other characters are included, the request is rejected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--upload-proxy=UPLOAD_PROXY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a proxy for upload.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--ticket=UPLOAD_TICKET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Couchbase Support ticket-number.
The value must be a string with a maximum length of 7 characters, containing only digits in the range of 0-9.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create a diagnostics .zip file, log onto the node and run the <code class="cmd">cbcollect_info</code> tool.</p>
</div>
<div class="paragraph">
<p>On Linux, run as root or use sudo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo /opt/couchbase/bin/cbcollect_info &lt;node_name&gt;.zip</pre>
</div>
</div>
<div class="paragraph">
<p>On Windows, run as Administrator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>C:\Program Files\Couchbase\Server\bin\cbcollect_info &lt;node_name&gt;.zip</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Response</strong></p>
</div>
<div class="paragraph">
<p>The following example response shows partial output when running the <code class="cmd">cbcollect_info</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Using temporary dir /tmp
Log Redaction () - OK
uname (uname -a) - OK
time and TZ (date; date -u) - OK
ntp time (ntpdate -q pool.ntp.org || nc time.nist.gov 13 || netcat time.nist.gov 13) - OK
ntp peers (ntpq -p) - Exit code 127
raw /etc/sysconfig/clock (cat /etc/sysconfig/clock) - Exit code 1
raw /etc/timezone (cat /etc/timezone) - OK
System Hardware (lshw -json || lshw) - OK
Process list snapshot (export TERM=''; top -Hb -n1 || top -H n1) - OK

...

adding: /tmp/tmpY7p_3T/couchbase.log -&gt; cbcollect_info__20180718-084858/couchbase.log
adding: /tmp/tmpY7p_3T/ns_server.error.log -&gt; cbcollect_info__20180718-084858/ns_server.error.log
adding: /tmp/tmpY7p_3T/ns_server.analytics_debug.log -&gt; cbcollect_info__20180718-084858/ns_server.analytics_debug.log
adding: /tmp/tmpY7p_3T/ns_server.json_rpc.log -&gt; cbcollect_info__20180718-084858/ns_server.json_rpc.log
adding: /tmp/tmpY7p_3T/cbcollect_info.log -&gt; cbcollect_info__20180718-084858/cbcollect_info.log
adding: /tmp/tmpY7p_3T/ns_server.ns_couchdb.log -&gt; cbcollect_info__20180718-084858/ns_server.ns_couchdb.log
adding: /tmp/tmpY7p_3T/ns_server.analytics.log -&gt; cbcollect_info__20180718-084858/ns_server.analytics.log
adding: /tmp/tmpY7p_3T/stats.log -&gt; cbcollect_info__20180718-084858/stats.log
adding: /tmp/tmpY7p_3T/memcached.log -&gt; cbcollect_info__20180718-084858/memcached.log
adding: /tmp/tmpY7p_3T/ns_server.indexer.log -&gt; cbcollect_info__20180718-084858/ns_server.indexer.log
adding: /tmp/tmpY7p_3T/ns_server.fts.log -&gt; cbcollect_info__20180718-084858/ns_server.fts.log
adding: /tmp/tmpY7p_3T/ns_server.http_access_internal.log -&gt; cbcollect_info__20180718-084858/ns_server.http_access_internal.log
adding: /tmp/tmpY7p_3T/ns_server.xdcr_target.log -&gt; cbcollect_info__20180718-084858/ns_server.xdcr_target.log
adding: /tmp/tmpY7p_3T/ns_server.eventing.log -&gt; cbcollect_info__20180718-084858/ns_server.eventing.log
adding: /tmp/tmpY7p_3T/syslog.tar.gz -&gt; cbcollect_info__20180718-084858/syslog.tar.gz
adding: /tmp/tmpY7p_3T/ns_server.reports.log -&gt; cbcollect_info__20180718-084858/ns_server.reports.log
adding: /tmp/tmpY7p_3T/ns_server.query.log -&gt; cbcollect_info__20180718-084858/ns_server.query.log
adding: /tmp/tmpY7p_3T/ns_server.couchdb.log -&gt; cbcollect_info__20180718-084858/ns_server.couchdb.log
adding: /tmp/tmpY7p_3T/ns_server.goxdcr.log -&gt; cbcollect_info__20180718-084858/ns_server.goxdcr.log
adding: /tmp/tmpY7p_3T/master_events.log -&gt; cbcollect_info__20180718-084858/master_events.log
adding: /tmp/tmpY7p_3T/ns_server.info.log -&gt; cbcollect_info__20180718-084858/ns_server.info.log
adding: /tmp/tmpY7p_3T/diag.log -&gt; cbcollect_info__20180718-084858/diag.log
adding: /tmp/tmpY7p_3T/ns_server.analytics_shutdown.log -&gt; cbcollect_info__20180718-084858/ns_server.analytics_shutdown.log
adding: /tmp/tmpY7p_3T/systemd_journal.gz -&gt; cbcollect_info__20180718-084858/systemd_journal.gz
adding: /tmp/tmpY7p_3T/ns_server.analytics_trace.json -&gt; cbcollect_info__20180718-084858/ns_server.analytics_trace.json
adding: /tmp/tmpY7p_3T/ns_server.stats.log -&gt; cbcollect_info__20180718-084858/ns_server.stats.log
adding: /tmp/tmpY7p_3T/ns_server.views.log -&gt; cbcollect_info__20180718-084858/ns_server.views.log
adding: /tmp/tmpY7p_3T/ini.log -&gt; cbcollect_info__20180718-084858/ini.log
adding: /tmp/tmpY7p_3T/kv_trace.json -&gt; cbcollect_info__20180718-084858/kv_trace.json
adding: /tmp/tmpY7p_3T/ns_server.mapreduce_errors.log -&gt; cbcollect_info__20180718-084858/ns_server.mapreduce_errors.log
adding: /tmp/tmpY7p_3T/ns_server.projector.log -&gt; cbcollect_info__20180718-084858/ns_server.projector.log
adding: /tmp/tmpY7p_3T/ns_server.metakv.log -&gt; cbcollect_info__20180718-084858/ns_server.metakv.log
adding: /tmp/tmpY7p_3T/ns_server.debug.log -&gt; cbcollect_info__20180718-084858/ns_server.debug.log
adding: /tmp/tmpY7p_3T/ns_server.babysitter.log -&gt; cbcollect_info__20180718-084858/ns_server.babysitter.log
adding: /tmp/tmpY7p_3T/ns_server.http_access.log -&gt; cbcollect_info__20180718-084858/ns_server.http_access.log</pre>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
