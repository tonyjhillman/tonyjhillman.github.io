<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>INSERT | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Use the INSERT statement to insert one or more new documents into an existing keyspace.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/n1ql/n1ql-language-reference/insert.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/pages/n1ql-language-reference/insert.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb"><a href="../query.html">Query</a></li>
<li class="crumb"><a href="index.html">SQL++ Language Reference</a></li>
<li class="crumb">Statements</li>
<li class="crumb"><a href="insert.html">INSERT</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">INSERT</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<style type="text/css">
  /* DOC-10177 */
  .hdlist table tr td.hdlist1,
  .hdlist table tr td.hdlist2 {
    padding: 1.5rem 0 0;
  }

  /* Compact horizontal definition lists */
  .hdlist.compact,
  .hdlist.compact {
    padding-top: 1rem;
  }
  .hdlist.compact table tr td.hdlist1,
  .hdlist.compact table tr td.hdlist2 {
    padding: 0.5rem 0 0;
  }

  /* Descriptions in horizontal description lists should have left padding */
  .hdlist table tr td.hdlist2,
  .hdlist.compact table tr td.hdlist2 {
    padding-left: 1rem;
  }

  /* Paragraphs in horizontal description lists should not have left margin */
  .hdlist table .hdlist1 + .hdlist2 p {
    margin-left: 0; !important
  }

  /* Horizontal definitions should match style of vertical definitions */
  td.hdlist1 {
    font-weight: 600;
  }
</style>
<style type="text/css">

/* details like other paragraph divs */
  .doc details {
    margin-top: 1rem;
  }
  .doc .paragraph + .details {
    margin-top: 1.5rem;
  }

/* summary like other titles */
  .doc details > summary.title {
    font-size: 1rem;
    font-weight: 600;
    line-height: 1.2;
    margin-bottom: 1rem;
    color: #52566c;
  }

</style>
<div class="quoteblock abstract">
<blockquote>
Use the INSERT statement to insert one or more new documents into an existing keyspace.
Each INSERT statement requires a unique document key and well-formed JSON as values.
In Couchbase, documents in a single keyspace must have a unique key.
</blockquote>
</div>
<div class="paragraph">
<p>The INSERT statement can compute and return any expression based on the actual inserted documents.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use the <a href="upsert.html" class="xref page">UPSERT</a> statement if you want to overwrite a document with the same key, in case it already exists.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Please note that the examples below will alter the data in your sample buckets.
To restore your sample data, remove and reinstall the <code>travel-sample</code> bucket.
Refer to <a href="../../manage/manage-settings/install-sample-buckets.html" class="xref page">Sample Buckets</a> for details.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="insert-prerequisites"><a class="anchor" href="#insert-prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The INSERT statement must include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name of the keyspace to insert the document.</p>
</li>
<li>
<p>Unique document key.</p>
</li>
<li>
<p>A well-formed JSON document specified as key-value pairs, or the projection of a SELECT statement which generates a well-formed single JSON to insert.
See and for details.</p>
</li>
<li>
<p>Optionally, you can specify the values or an expression to be returned after the INSERT statement completes successfully.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="security-requirements"><a class="anchor" href="#security-requirements"></a>Security Requirements</h3>
<div class="paragraph">
<p>You should have read-write permission to the keyspace, to be able to insert documents into a keyspace.
Any user who has the keyspace credentials or any Couchbase administrator should be able to insert documents into a keyspace.
This includes the keyspace administrator for the specified keyspace, the cluster administrator, and the full administrator roles.
See <a href="../../learn/security/roles.html" class="xref page">Roles</a> for details about access privileges for various administrators.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
You cannot insert documents into a SASL bucket if you have a read-only role for the SASL bucket.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="rbac-privileges"><a class="anchor" href="#rbac-privileges"></a>RBAC Privileges</h3>
<div class="paragraph">
<p>To execute the INSERT statement, you must have the <em>Query Insert</em> privilege on the target keyspace.</p>
</div>
<div class="paragraph">
<p>If the statement has any SELECT or RETURNING data-read clauses, then the <em>Query Select</em> privilege is also required on the keyspaces referred in the respective clauses.
For more details about roles and privileges, see <a href="../../learn/security/authorization-overview.html" class="xref page">Authorization</a>.</p>
</div>
<details>
<summary class="title">RBAC Examples</summary>
<div class="content">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Unresolved include directive in modules/n1ql/pages/n1ql-language-reference/insert.adoc - include::ROOT:partial$query-context.adoc[]</p>
</div>
<div class="paragraph">
<p>To execute the following statement, you must have the <em>Query Insert</em> privilege on <code>hotel</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO hotel (KEY, VALUE)
VALUES ("key1", { "type" : "hotel", "name" : "new hotel" });</code></pre>
</div>
</div>
<div class="paragraph">
<p>To execute the following statement, you must have the <em>Query Insert</em> and <em>Query Select</em> privileges on <code>hotel</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO hotel (KEY, VALUE)
VALUES ("key1", { "type" : "hotel", "name" : "new hotel" }) RETURNING *;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To execute the following statement, you must have the <em>Query Insert</em> privilege on <code>hotel</code> and <em>Query Select</em> privilege on <code>`beer-sample`</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO landmark (KEY foo, VALUE bar)
SELECT META(doc).id AS foo, doc AS bar
FROM `beer-sample` AS doc WHERE type = "brewery";</code></pre>
</div>
</div>
<div class="paragraph">
<p>To execute the following statement, you must have the <em>Query Insert</em> and <em>Query Select</em> privileges on <code>hotel</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO hotel (KEY foo, VALUE bar)
SELECT "copy_" || meta(doc).id AS foo, doc AS bar
FROM hotel AS doc;</code></pre>
</div>
</div>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
<div class="sect1">
<h2 id="insert-syntax"><a class="anchor" href="#insert-syntax"></a>Syntax</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dml.ebnf#L23-L24">insert ::= 'INSERT' 'INTO' target-keyspace ( insert-values | insert-select )
            returning-clause?</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/insert.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
target-keyspace
</td>
<td class="hdlist2">
<p><a href="#insert-target">Insert Target</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
insert-values
</td>
<td class="hdlist2">
<p><a href="#insert-values">Insert Values</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
insert-select
</td>
<td class="hdlist2">
<p><a href="#insert-select">Insert Select</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
returning-clause
</td>
<td class="hdlist2">
<p><a href="#returning-clause">RETURNING Clause</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="insert-target"><a class="anchor" href="#insert-target"></a>Insert Target</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dml.ebnf#L138">target-keyspace ::= keyspace-ref ( 'AS'? alias )?</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/target-keyspace.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="paragraph">
<p>The insert target is the keyspace into which the documents are inserted.
Ensure that the keyspace exists before trying to insert a document.</p>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
keyspace-ref
</td>
<td class="hdlist2">
<p><a href="#insert-target-ref">Keyspace Reference</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
alias
</td>
<td class="hdlist2">
<p><a href="#insert-target-alias">AS Alias</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="insert-target-ref"><a class="anchor" href="#insert-target-ref"></a>Keyspace Reference</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L86">keyspace-ref ::= keyspace-path | keyspace-partial</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/keyspace-ref.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div id="keyspace-path" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L90">keyspace-path ::= ( namespace ':' )? bucket ( '.' scope '.' collection )?</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/keyspace-path.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div id="keyspace-partial" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L94">keyspace-partial ::= collection</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/keyspace-partial.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="paragraph">
<p>Keyspace reference for the insert target.
For more details, refer to <a href="from.html#from-keyspace-ref" class="xref page">Keyspace Reference</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="insert-target-alias"><a class="anchor" href="#insert-target-alias"></a>AS Alias</h4>
<div class="paragraph">
<p>Assigns another name to the keyspace reference.
For details, refer to <a href="from.html#section_ax5_2nx_1db" class="xref page">AS Clause</a>.</p>
</div>
<div class="paragraph">
<p>Assigning an alias to the keyspace reference is optional.
If you assign an alias to the keyspace reference, the <code>AS</code> keyword may be omitted.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insert-values"><a class="anchor" href="#insert-values"></a>Insert Values</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dml.ebnf#L28">insert-values ::= ( '(' 'PRIMARY'? 'KEY' ',' 'VALUE' ( ',' 'OPTIONS' )? ')' )? values-clause</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/insert-values.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="paragraph">
<p>Specifies one or more documents to be inserted using the <a href="#values-clause">VALUES clause</a>.
Each document requires a unique key and the values must be specified as well-formed JSON.</p>
</div>
<div class="paragraph">
<p>The bracketed KEY and VALUE keywords are purely a visual mnemonic to indicate that you are setting the key and value for the inserted document.
There is no syntactic requirement to include these keywords when using the Insert Values syntax.
Also note that there is no syntactic difference between PRIMARY KEY and KEY.</p>
</div>
<div class="paragraph">
<p>Similarly, the OPTIONS keyword is purely a visual mnemonic to indicate that you are setting metadata for the inserted document.
There is no syntactic requirement to include the OPTIONS keyword when setting metadata for the inserted document.</p>
</div>
<div class="sect3">
<h4 id="values-clause"><a class="anchor" href="#values-clause"></a>VALUES Clause</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dml.ebnf#L32-L33">values-clause ::= 'VALUES'  '(' key ',' value ( ',' options )? ')'
            ( ',' 'VALUES'? '(' key ',' value ( ',' options )? ')' )*</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/values-clause.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
key
</td>
<td class="hdlist2">
<p>A string, or an expression resolving to a string, representing the ID of the document to be inserted.
The KEY cannot be MISSING or NULL, and must be unique within the Couchbase keyspace.
It can be a string or an expression that produces a string.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
value
</td>
<td class="hdlist2">
<p>A JSON object or value, or an expression resolving to a JSON object or value, representing the body of the document to be inserted.
(See <a href="http://json.org/example.html" class="bare" target="_blank" rel="noopener">http://json.org/example.html</a> for examples of well-formed JSON.)
You can insert NULL, empty, or MISSING values.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
options
</td>
<td class="hdlist2">
<p>[Optional] An object representing the metadata to be set for the inserted document.
Only the <code>expiration</code> attribute has any effect; any other attributes are ignored.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">expiration</dt>
<dd>
<p>An integer, or an expression resolving to an integer, representing the <a href="#java-sdk:howtos:kv-operations.adoc#document-expiration" class="xref unresolved">document expiration</a> in seconds.</p>
<div class="paragraph">
<p>If the document expiration is not specified, it defaults to <code>0</code>, meaning the document expiration is the same as the <a href="../../learn/data/expiration.html" class="xref page">bucket expiration</a>.</p>
</div>
</dd>
</dl>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For examples illustrating the VALUES clause, see <a href="#insert-examples">Examples</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insert-select"><a class="anchor" href="#insert-select"></a>Insert Select</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dml.ebnf#L37-L38">insert-select ::= '(' 'PRIMARY'? 'KEY' key ( ',' 'VALUE' value )?
                   ( ',' 'OPTIONS' options )? ')' select</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/insert-select.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="paragraph">
<p>Use the projection of a SELECT statement which generates well-formed JSON to insert.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
key
</td>
<td class="hdlist2">
<p>A string, or an expression resolving to a string, representing the ID of the document to be inserted.
If the project of a SELECT statement generates multiple JSON documents, then your INSERT statement must handle the generation of unique keys for each of the documents.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
value
</td>
<td class="hdlist2">
<p>[Optional] An object, or an expression resolving to an object, representing the body of the document to be inserted.
This may be an alias assigned by the SELECT statement.
If the VALUE is omitted, the entire JSON document generated by the SELECT statement is inserted.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
options
</td>
<td class="hdlist2">
<p>[Optional] An object representing the metadata to be set for the inserted document.
Only the <code>expiration</code> attribute has any effect; any other attributes are ignored.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">expiration</dt>
<dd>
<p>An integer, or an expression resolving to an integer, representing the <a href="#java-sdk:howtos:kv-operations.adoc#document-expiration" class="xref unresolved">document expiration</a> in seconds.</p>
<div class="paragraph">
<p>If the document expiration is not specified, it defaults to <code>0</code>, meaning the document expiration is the same as the <a href="../../learn/data/expiration.html" class="xref page">bucket expiration</a>.</p>
</div>
</dd>
</dl>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
select
</td>
<td class="hdlist2">
<p><a href="#select-statement">SELECT Statement</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="select-statement"><a class="anchor" href="#select-statement"></a>SELECT Statement</h4>
<div class="paragraph">
<p>SELECT statements let you retrieve data from specified keyspaces.
For details, see <a href="select-syntax.html" class="xref page">SELECT Syntax</a>.</p>
</div>
<div class="paragraph">
<p>For examples illustrating the SELECT statement, see <a href="#insert-examples">Examples</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="returning-clause"><a class="anchor" href="#returning-clause"></a>RETURNING Clause</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dml.ebnf#L142-L143">returning-clause ::= 'RETURNING' (result-expr (',' result-expr)* |
                    ('RAW' | 'ELEMENT' | 'VALUE') expr)</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/returning-clause.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="paragraph">
<p>Specifies the fields that must be returned as part of the results object.</p>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
result-expr
</td>
<td class="hdlist2">
<p><a href="#result-expr">Result Expression</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="result-expr"><a class="anchor" href="#result-expr"></a>Result Expression</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L62">result-expr ::= ( path '.' )? '*' | expr ( 'AS'? alias )?</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/result-expr.png" alt="Syntax diagram: refer to source code listing">
</div>
</div>
<div class="paragraph">
<p>Specifies an expression on the inserted documents, that will be returned as output.
Use <code>*</code> to return all the fields in all the documents that were inserted.</p>
</div>
<div class="paragraph">
<p>For examples illustrating the RETURNING clause, see <a href="#insert-examples">Examples</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="result"><a class="anchor" href="#result"></a>Result</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The INSERT statement returns the requestID, the signature, results including the keyspace and JSON document inserted, status of the query, and metrics.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="out">requestID</code>: Request ID of the statement generated by the server.</p>
</li>
<li>
<p><code class="out">signature</code>: Signature of the fields specified in the returning clause.</p>
</li>
<li>
<p><code class="out">results</code>: If the query specified the returning clause, then results contains one or more fields as specified in the returning clause.
If not, returns an empty results array.</p>
</li>
<li>
<p><code class="out">errors</code>: Returns the error codes and messages if the statement fails with errors.
Returned only when the statement fails with errors.
Errors can also include timeouts.</p>
</li>
<li>
<p><code class="out">status</code>: Status of the statement - "<code class="out">successful</code>" or "<code class="out">errors</code>".</p>
</li>
<li>
<p><code class="out">metrics</code>: Provides metrics for the statement such as <code class="out">elapsedTime</code>, <code class="out">executionTime</code>, <code class="out">resultCount</code>, <code class="out">resultSize</code>, and <code class="out">mutationCount</code>.
For more information, see <a href="#insert-metrics">Metrics</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="insert-metrics"><a class="anchor" href="#insert-metrics"></a>Metrics</h3>
<div class="paragraph">
<p>The INSERT statement returns the following metrics along with the results and status:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="out">elapsedTime</code>: Total elapsed time for the statement.</p>
</li>
<li>
<p><code class="out">executionTime</code>: Time taken by Couchbase Server to execute the statement.
This value is independent of network latency, platform code execution time, and so on.</p>
</li>
<li>
<p><code class="out">resultCount</code>: Total number of results returned by the statement.
In case of <code>INSERT</code> without a <code>RETURNING</code> clause, the value is <code>0</code>.</p>
</li>
<li>
<p><code class="out">resultSize</code>: Total number of results that satisfy the query.</p>
</li>
<li>
<p><code class="out">mutationCount</code>: Specifies the number of documents that were inserted by the <code>INSERT</code> statement.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="insert-monitoring"><a class="anchor" href="#insert-monitoring"></a>Monitoring</h3>
<div class="paragraph">
<p>You can use the query monitoring API to gather diagnostic information.
For example, if you are performing a bulk insert using a <code>SELECT</code> statement, you can use the query monitoring API to get the number of documents being inserted.
Check <code class="api">system:active_requests</code> catalog for more information on monitoring active queries.
For more information, see <a href="../../tools/query-monitoring.html" class="xref page">Query Monitoring</a>.</p>
</div>
<div class="paragraph">
<p>You can also take a look at the keyspace metrics from the Web Console.
To do so, go to the Data Buckets tab and click the bucket that you want to monitor.
In the General Bucket Analytics screen, scroll to the Query section to gather information such as requests/sec, selects/sec and so on.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="insert-restrictions"><a class="anchor" href="#insert-restrictions"></a>Restrictions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When inserting documents into a specified keyspace, keep in mind the following restrictions which would help avoid errors during execution.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The keyspace must exist.
The INSERT statement returns an error if the keyspace does not exist.</p>
</li>
<li>
<p>Do not insert a document with a duplicate key.
If you are inserting multiple documents, the statement aborts at the first error encountered.</p>
</li>
<li>
<p>Timeouts can affect the completion of an INSERT statement, especially when performing bulk inserts.
Ensure that the timeout is set to a reasonable value that allows the bulk insert operation to complete.</p>
<div class="paragraph">
<p>To set the indexer timeout, use the REST API to set the <code>indexer.settings.scan_timeout</code> property.
For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl http://localhost:9102/settings -u Administrator:password \
-d '{"indexer.settings.scan_timeout": 1200}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the following command to retrieve the indexer settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl -X GET http://localhost:9102/settings -u Administrator:password</code></pre>
</div>
</div>
</li>
<li>
<p>When inserting multiple documents, no cleanup or rollback is done for the already inserted documents if the INSERT operations hits an error.
This means, when you are inserting 10 documents, if the INSERT operation fails when inserting the 6th document, the operator quits and exits.
It does not rollback the first five documents that were inserted.
Nor does it ignore the failure and continue to insert the remaining documents.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="insert-performance"><a class="anchor" href="#insert-performance"></a>Performance and Best Practices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a single INSERT statement is executed, SQL++ prepares the statement, scans the values and then inserts the document.
When inserting a large number of  documents, you can improve the performance of the INSERT statement by using one of the following techniques:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Batching the documents to perform bulk inserts, which decreases the latency and increases the throughput.
The INSERT statement sends documents to the data node in batches, with a default batch size of 16.
You can configure this value using the <a href="../../settings/query-settings.html#pipeline_batch_req" class="xref page">pipeline_batch</a> request-level parameter, or the <a href="../../settings/query-settings.html#pipeline-batch-srv" class="xref page">pipeline-batch</a> service-level setting.
Note that the maximum batch size is (2<sup>32</sup> -1) and specifying a value higher than the maximum batch size may increase the memory consumption.
The following example command sets the pipeline-batch size to 32 instead of the default 16:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl -v -X POST http://localhost:8093/admin/settings -u Administrator:password \
-d '{ "debug":true, "pipeline-batch": 32 }'</code></pre>
</div>
</div>
</li>
<li>
<p>Use the <a href="../../settings/query-settings.html#max_parallelism_req" class="xref page">max_parallelism</a> request-level parameter, or the <a href="../../settings/query-settings.html#max-parallelism-srv" class="xref page">max-parallelism</a> service-level setting when inserting multiple documents.</p>
</li>
<li>
<p>When performing bulk inserts, use prepared statements or multiple values.</p>
</li>
<li>
<p>When new documents are inserted, the indexes are updated.
When a large number of documents are inserted, this may affect the performance of the cluster.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="insert-examples"><a class="anchor" href="#insert-examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/n1ql/pages/n1ql-language-reference/insert.adoc - include::ROOT:partial$query-context.adoc[]</p>
</div>
<div id="example-1" class="exampleblock">
<div class="title">Example 1. Overview</div>
<div class="content">
<div class="paragraph">
<p>The following statement inserts a single JSON document into the <code>airline</code> keyspace with key "k001".
The returning clause specifies the function <code>META().id</code> to return the key of the inserted document (metadata), and the wildcard (*) to return the inserted document.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-value.n1ql">INSERT INTO airline ( KEY, VALUE )
  VALUES
  (
    "k001",
    { "id": "01", "type": "airline"}
  )
RETURNING META().id as docid, *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-value.jsonc">{
  "requestID": "df5846b1-1044-4b1f-ae8a-979be25282d1",
  "signature": {
      "*": "*",
      "docid": "json"
  },
  "results": [
  {
      "airline": {
          "id": "01",
          "type": "airline"
      },
      "docid": "k001"
  }
  ],
  "status": "success",
  "metrics": {
      "elapsedTime": "6.916ms",
      "executionTime": "6.6224ms",
      "resultCount": 1,
      "resultSize": 117,
      "serviceLoad": 4,
      "mutationCount": 1
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The simplest use case of an INSERT statement is to insert a single document into the keyspace.</p>
</div>
<div id="example-11" class="exampleblock">
<div class="title">Example 2. Insert a single document</div>
<div class="content">
<div class="paragraph">
<p>Insert a new document with <code>key</code> "1025" into the <code>airline</code> keyspace.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-doc.n1ql">INSERT INTO airline (KEY,VALUE)
  VALUES ( "1025",
            {     "callsign": "MY-AIR",
                  "country": "United States",
                  "iata": "Z1",
                  "icao": "AQZ",
                  "id": "1011",
                  "name": "80-My Air",
                  "type": "airline"
            } )
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-doc.jsonc">{
  "requestID": "c3bd0276-5d7d-425f-98f9-b333b9ae4302",
  "signature": {
      "*": "*"
  },
  "results": [
  {
      "airline": {
          "callsign": "MY-AIR",
          "country": "United States",
          "iata": "Z1",
          "icao": "AQZ",
          "id": "1011",
          "name": "80-My Air",
          "type": "airline"
      }
  }
  ],
  "status": "success",
  "metrics": {
      "elapsedTime": "5.9133ms",
      "executionTime": "5.6264ms",
      "resultCount": 1,
      "resultSize": 254,
      "serviceLoad": 4,
      "mutationCount": 1
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can batch insert multiple documents using multiple VALUES clauses.
The VALUES keyword itself is optional in the second and later iterations of the clause.</p>
</div>
<div id="example-12" class="exampleblock">
<div class="title">Example 3. Perform bulk inserts</div>
<div class="content">
<div class="paragraph">
<p>Insert two documents with <code>key</code> "airline_4444" and "airline_4445" into the <code>airline</code> keyspace:</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-batch.n1ql">INSERT INTO airline (KEY,VALUE)
VALUES ( "airline_4444",
    { "callsign": "MY-AIR",
      "country": "United States",
      "iata": "Z1",
      "icao": "AQZ",
      "name": "80-My Air",
      "id": "4444",
      "type": "airline"} ),
VALUES ( "airline_4445",
    { "callsign": "AIR-X",
      "country": "United States",
      "iata": "X1",
      "icao": "ARX",
      "name": "10-AirX",
      "id": "4445",
      "type": "airline"} )
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-batch.jsonc">{
  "requestID": "2fabc03a-ea9b-49fd-a044-6ef667381311",
  "signature": {
      "*": "*"
  },
  "results": [
  {
      "airline": {
          "callsign": "MY-AIR",
          "country": "United States",
          "iata": "Z1",
          "icao": "AQZ",
          "id": "4444",
          "name": "80-My Air",
          "type": "airline"
      }
  },
  {
      "airline": {
          "callsign": "AIR-X",
          "country": "United States",
          "iata": "X1",
          "icao": "ARX",
          "id": "4445",
          "name": "10-AirX",
          "type": "airline"
      }
  }
  ],
  "status": "success",
  "metrics": {
      "elapsedTime": "5.7617ms",
      "executionTime": "5.4635ms",
      "resultCount": 2,
      "resultSize": 505,
      "serviceLoad": 4,
      "mutationCount": 2
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div id="example-2" class="exampleblock">
<div class="title">Example 4. Specify a key using an expression</div>
<div class="content">
<div class="paragraph">
<p>You can specify a key using an expression, as shown here.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline ( KEY, VALUE )
                    VALUES ( "airline" || TOSTRING(1234),
                    { "callsign": "" } )
                    RETURNING META().id;</code></pre>
</div>
</div>
</div>
</div>
<div id="example-3" class="exampleblock">
<div class="title">Example 5. Generate a unique key</div>
<div class="content">
<div class="paragraph">
<p>If you don&#8217;t require the document key to be in a specific format, you can use the function <a href="metafun.html#uuid" class="xref page">UUID()</a> to generate a unique key, as shown here.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline ( KEY, VALUE )
            VALUES ( UUID(),
                    { "callsign": "" } )
RETURNING META().id;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the document key is auto-generated, you can find the value of the key by specifying META().id in the returning clause.</p>
</div>
</div>
</div>
<div id="example-4" class="exampleblock">
<div class="title">Example 6. Insert an empty value</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline (KEY, VALUE)
    VALUES ( "airline::432",
              { "callsign": "",
                "country" : "USA",
                "type" : "airline"} )
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airline": {
      "callsign": "",
      "country": "USA",
      "type": "airline"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="example-5" class="exampleblock">
<div class="title">Example 7. Insert a NULL value</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline (KEY, VALUE)
    VALUES ( "airline::1432",
            { "callsign": NULL,
              "country" : "USA",
              "type" : "airline"} )
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airline": {
      "callsign": null,
      "country": "USA",
      "type": "airline"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="example-6" class="exampleblock">
<div class="title">Example 8. Insert a MISSING value</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline (KEY, VALUE)
    VALUES ( "airline::142",
            { "callsign": MISSING,
              "country" : "USA",
              "type" : "airline"} )
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airline": {
      "country": "USA",
      "type": "airline"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="example-7" class="exampleblock">
<div class="title">Example 9. Insert a NULL JSON document</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO hotel (KEY, VALUE)
    VALUES ( "1021",
              { } )
              RETURNING *;</code></pre>
</div>
</div>
</div>
</div>
<div id="example-7a" class="exampleblock">
<div class="title">Example 10. Insert a document with expiration</div>
<div class="content">
<div class="paragraph">
<p>Insert a document into the <code>airline</code> keyspace using an expiration of 5 days.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline (KEY, VALUE, OPTIONS)
    VALUES ( "airline::ttl",
             { "callsign": "Temporary",
               "country" : "USA",
               "type" : "airline" },
             { "expiration": 5*24*60*60 } );</code></pre>
</div>
</div>
</div>
</div>
<div id="example-9" class="exampleblock">
<div class="title">Example 11. Return the document ID and country</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline (KEY, VALUE)
    VALUES ( "airline_24444",
            { "callsign": "USA-AIR",
              "country" : "USA",
              "type" : "airline"})
RETURNING META().id as docid, country;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "country": "USA",
    "docid": "airline_24444"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="example-10" class="exampleblock">
<div class="title">Example 12. Return the document ID and an expression</div>
<div class="content">
<div class="paragraph">
<p>Use the <code>UUID()</code> function to generate the key and show the usage of the <code>RETURNING</code> clause to retrieve the generated document key and the last element of the <code>callsign</code> array with an expression.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airline (KEY, VALUE)
    VALUES ( UUID(),
            { "callsign": [ "USA-AIR", "America-AIR" ],
              "country" : "USA",
              "type" : "airline"} )
RETURNING META().id as docid, callsign[ARRAY_LENGTH(callsign)-1];</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "$1": "America-AIR",
    "docid": "6af57793-65d2-4cc3-beea-5d713c7f3c29"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Instead of providing actual values, you can specify the data to be inserted using the SELECT statement which selects the data from an existing keyspace.</p>
</div>
<div id="example-13" class="exampleblock">
<div class="title">Example 13. Insert values using SELECT</div>
<div class="content">
<div class="paragraph">
<p>Query the <code>airport</code> keyspace for documents with <code>airportname</code> "Heathrow", and then insert the projection (1 document) into the <code>airport</code> keyspace using a unique key generated using <code>UUID()</code>.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-select.n1ql">INSERT INTO airport (KEY UUID(), VALUE _airport)
    SELECT _airport FROM airport _airport
    WHERE airportname = "Heathrow"
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/examples/dml/insert-select.jsonc">[
  {
    "airport": {
      "airportname": "Heathrow",
      "city": "London",
      "country": "United Kingdom",
      "faa": "LHR",
      "geo": {
        "alt": 83,
        "lat": 51.4775,
        "lon": -0.461389
      },
      "icao": "EGLL",
      "id": 507,
      "type": "airport",
      "tz": "Europe/London"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="example-8a" class="exampleblock">
<div class="title">Example 14. Insert with SELECT and set expiration</div>
<div class="content">
<div class="paragraph">
<p>Query the <code>airport</code> keyspace for documents with <code>airportname</code> "Heathrow", and then insert the projection into the <code>airport</code> keyspace using a unique key and an expiration of 2 hours.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airport
   (KEY UUID(), VALUE doc, OPTIONS {"expiration": 2*60*60})
    SELECT a AS doc FROM airport a
      WHERE airportname = "Heathrow";</code></pre>
</div>
</div>
</div>
</div>
<div id="example-8b" class="exampleblock">
<div class="title">Example 15. Insert with SELECT and preserve expiration</div>
<div class="content">
<div class="paragraph">
<p>If you want to copy the expiration of an existing document to the inserted document, you can use a <a href="metafun.html#meta" class="xref page">META().expiration</a> expression in the SELECT statement, as shown here.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airport
   (KEY UUID(), VALUE doc, OPTIONS {"expiration": ttl})
    SELECT META(a).expiration AS ttl, a AS doc FROM airport a
      WHERE airportname = "Heathrow";</code></pre>
</div>
</div>
</div>
</div>
<div id="example-14" class="exampleblock">
<div class="title">Example 16. Insert values with a combination key, generated using the projection and expressions</div>
<div class="content">
<div class="paragraph">
<p>Generate a document key as a combination of the projection and some function, such as <code>&lt;countryname&gt;::&lt;system-clock&gt;</code>.
The SELECT statement retrieves the country name "k1" and concatenates it with a delimiter "::" and the system clock function using the string <code>concat</code> operator "<code class="code">||</code>".</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airport (KEY k1||"::"||clock_str(), value t)
    SELECT DISTINCT t.country AS k1,t
      FROM airport t
      LIMIT 5
RETURNING META().id as docid, *;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result shows the META().id generated as a result of this concatenation (highlighted below).</p>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airport": {
      "airportname": "Calais Dunkerque",
      "city": "Calais",
      "country": "France",
      "faa": "CQF",
      "geo": {
        "alt": 12,
        "lat": 50.962097,
        "lon": 1.954764
      },
      "icao": "LFAC",
      "id": 1254,
      "type": "airport",
      "tz": "Europe/Paris"
    },
    "docid": "France::2021-02-09T13:53:28.445Z"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="Example_15_copy_bucket" class="exampleblock">
<div class="title">Example 17. Use insert to copy keyspace data to another keyspace</div>
<div class="content">
<div class="paragraph">
<p>Use the INSERT statement to create a copy of <code>keyspace_1</code> under the new name <code>keyspace_2</code>.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO keyspace_2(key _k, value _v)
    SELECT META().id _k, _v
      FROM keyspace_1 _v;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Sub-queries can be used with INSERT in the insert-select form of the statement.
The <code>SELECT</code> part can be any sophisticated query in itself.</p>
</div>
<div id="example-16" class="exampleblock">
<div class="title">Example 18. Insert values using subqueries</div>
<div class="content">
<div class="paragraph">
<p>Insert a new <code>type</code> in documents from all hotels in the cities that have landmarks.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO hotel (KEY UUID()) <i class="conum" data-value="3"></i><b>(3)</b>
    SELECT x.name, x.city, "landmark_hotels" AS type <i class="conum" data-value="2"></i><b>(2)</b>
      FROM hotel x
      WHERE x.city WITHIN
        ( SELECT DISTINCT t.city <i class="conum" data-value="1"></i><b>(1)</b>
            FROM landmark t)
      LIMIT 4
RETURNING *;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The inner most <code>SELECT</code> finds all cities that have landmarks.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The outer <code>SELECT</code> finds the hotels that are in the cities selected by the inner query in Step 1.
It also adds a new <code>type</code> attribute with the value "landmark_hotels" to the projected result.
For brevity, we <code>SELECT</code> only 4 documents.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Finally, the <code>INSERT</code> statement inserts the result of Step 2 with <code>UUID()</code> generated keys.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "hotel": {
      "city": "Aberdeenshire",
      "name": "Castle Hotel",
      "type": "landmark_hotels"
    }
  },
  {
    "hotel": {
      "city": "Aberdeenshire",
      "name": "Two Bears Cottage",
      "type": "landmark_hotels"
    }
  },
  {
    "hotel": {
      "city": "Agoura Hills",
      "name": "Malibu Creek Campground",
      "type": "landmark_hotels"
    }
  },
  {
    "hotel": {
      "city": "Altrincham",
      "name": "Cresta Court Hotel",
      "type": "landmark_hotels"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="example-17" class="exampleblock">
<div class="title">Example 19. Insert values using functions</div>
<div class="content">
<div class="paragraph">
<p>Set the parameter <code>$faa_code</code> using the cbq prompt, or the <a href="../../tools/query-workbench.html#query-preferences" class="xref page">Run-Time Preferences</a> in the Query Workbench.</p>
</div>
<div class="listingblock">
<div class="title">Parameters</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">\SET -$faa_code "blr" ;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">INSERT INTO airport (KEY, VALUE)
      VALUES ("airport_" || UUID(), <i class="conum" data-value="1"></i><b>(1)</b><i class="conum" data-value="2"></i><b>(2)</b>
             { "type" : "airport",
               "tz" : "India Standard Time",
               "country" : "India",
               "faa" : UPPER($faa_code)} ) <i class="conum" data-value="3"></i><b>(3)</b>
RETURNING *;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The query uses multiple functions during the INSERT:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>UUID()</code> function to generate unique key for the document being inserted.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The string concatenation operator <code>||</code> to join "airport_" and the <code>UUID</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>UPPER</code> string function to insert only uppercase values of the <code>FAA</code> code.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "requestID": "4fea5296-c9f4-4fd3-be78-95e5a04531eb",
    "signature": {
        "*": "*"
    },
    "results": [
    {
        "airport": {
            "country": "India",
            "faa": "BLR",
            "type": "airport",
            "tz": "India Standard Time"
        }
    }
    ],
    "status": "success",
    "metrics": {
        "elapsedTime": "7.7853ms",
        "executionTime": "7.6472ms",
        "resultCount": 1,
        "resultSize": 167,
        "serviceLoad": 4,
        "mutationCount": 1
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div id="example-18" class="exampleblock">
<div class="title">Example 20. Insert values using prepared statements</div>
<div class="content">
<div class="paragraph">
<p>Prepare an <code>INSERT</code> statement and execute it by passing parameters.
The <code>INSERT</code> statement has some of the attribute values preset while it takes the document <code>key</code> and airport <code>faa_code</code> as parameters.</p>
</div>
<div class="paragraph">
<p>First, prepare the <code>INSERT</code> statement.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">PREPARE ins_india FROM
      INSERT INTO airport (KEY, VALUE)
        VALUES ( $key,
                { "type" : "airport",
                  "tz" : "India Standard Time",
                  "country" : "India",
                  "faa" : $faa_code} )
RETURNING *;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now execute the prepared statement using the cbq shell or the Query Workbench, passing the parameters <code>key</code> and <code>faa_code</code>.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">EXECUTE ins_india
USING {"key": "airport_10001", "faa_code": "DEL"};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airport": {
      "country": "India",
      "faa": "DEL",
      "type": "airport",
      "tz": "India Standard Time"
    }
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, execute the prepared statement using the REST API, passing <code>$key</code> and <code>$faa_code</code> as REST parameters.</p>
</div>
<div class="listingblock">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl -v http://localhost:8093/query/service -u Administrator:password \
-d 'prepared="ins_india"&amp;$key="airport_10002"&amp;$faa_code="BLR"'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "requestID":"55ff7e8a-7410-470f-ab83-c464f9d0092d",
   "signature":{
      "*":"*"
   },
   "results":[
      {
         "airport":{
            "country":"India",
            "faa":"BLR",
            "type":"airport",
            "tz":"India Standard Time"
         }
      }
   ],
   "status":"success",
   "metrics":{
      "elapsedTime":"22.6797ms",
      "executionTime":"17.0216ms",
      "resultCount":1,
      "resultSize":87,
      "serviceLoad":4,
      "mutationCount":1
   }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="insert-explain-plan"><a class="anchor" href="#insert-explain-plan"></a>Explain Plan</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To understand how the INSERT statement is executed by SQL++, let us take a look at two examples.
For detailed explanation about the EXPLAIN plan, see the <a href="explain.html" class="xref page">EXPLAIN</a> statement.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/n1ql/pages/n1ql-language-reference/insert.adoc - include::ROOT:partial$query-context.adoc[]</p>
</div>
<div id="example-19" class="exampleblock">
<div class="title">Example 21. Simple INSERT statement using KEY VALUE pairs to insert two documents</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">EXPLAIN INSERT INTO airline (KEY,VALUE)
VALUES ( "1025",
          { "callsign": "SKY-AIR",
            "country": "United States",
            "id": "1025",
            "type": "airline"
          } ),
VALUES ( "1026",
          { "callsign": "F1-AIR",
            "country": "United States",
            "id": "1014"
          } )
RETURNING *;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "requestID": "5d1797cb-a7df-409d-b924-130ba0cc597a",
    "signature": "json",
    "results": [
    {
        "plan": {
            "#operator": "Sequence",
            "~children": [
                {
                    "#operator": "ValueScan",
                    "cardinality": 2,
                    "cost": 0.032,
                    "values": "[[\"1025\", {\"callsign\": \"SKY-AIR\", \"country\": \"United States\", \"id\": \"1025\", \"type\": \"airline\"}], [\"1026\", {\"callsign\": \"F1-AIR\", \"country\": \"United States\", \"id\": \"1014\"}]]"
                },
                {
                    "#operator": "Parallel",
                    "maxParallelism": 1,
                    "~child": {
                        "#operator": "Sequence",
                        "~children": [
                            {
                                "#operator": "SendInsert",
                                "alias": "airline",
                                "bucket": "travel-sample",
                                "keyspace": "airline",
                                "namespace": "default",
                                "scope": "inventory"
                            },
                            {
                                "#operator": "InitialProject",
                                "result_terms": [
                                    {
                                        "expr": "self",
                                        "star": true
                                    }
                                ]
                            }
                        ]
                    }
                }
            ]
        },
        "text": "INSERT INTO airline (KEY,VALUE) VALUES ( \"1025\", { \"callsign\": \"SKY-AIR\", \"country\": \"United States\", \"id\": \"1025\", \"type\": \"airline\" } ), VALUES ( \"1026\", { \"callsign\": \"F1-AIR\", \"country\": \"United States\", \"id\": \"1014\" } ) RETURNING *;"
    }
    ],
    "status": "success",
    "metrics": {
        "elapsedTime": "6.5577ms",
        "executionTime": "6.2773ms",
        "resultCount": 1,
        "resultSize": 1898,
        "serviceLoad": 4
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The query engine first scans the input values shown by the operator <code>ValueScan</code> to obtain the input values, and then it inserts the documents into the specified keyspace (shown by the operator <code>SendInsert</code>).</p>
</div>
</div>
</div>
<div id="example-20" class="exampleblock">
<div class="title">Example 22. INSERT statement using the projection of a select statement to generate values</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">EXPLAIN INSERT INTO airport (key UUID(), value airport)
    SELECT airport FROM airport
      WHERE airportname = "Heathrow";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "Sequence",
          "~children": [
            {
              "#operator": "IndexScan3", <i class="conum" data-value="1"></i><b>(1)</b>
              "bucket": "travel-sample",
              "index": "def_inventory_airport_airportname",
              "index_id": "14b05d2b21bd6eee",
// ...
            },
            {
              "#operator": "Fetch", <i class="conum" data-value="2"></i><b>(2)</b>
              "bucket": "travel-sample",
              "keyspace": "airport",
              "namespace": "default",
              "scope": "inventory"
            },
            {
              "#operator": "Parallel",
              "~child": {
                "#operator": "Sequence",
                "~children": [
                  {
                    "#operator": "Filter", <i class="conum" data-value="3"></i><b>(3)</b>
                    "condition": "((`airport`.`airportname`) = \"Heathrow\")"
                  },
// ...
                ]
              }
            }
          ]
        },
        {
          "#operator": "Parallel",
          "~child": {
            "#operator": "Sequence",
            "~children": [
              {
                "#operator": "SendInsert", <i class="conum" data-value="4"></i><b>(4)</b>
                "alias": "airport",
                "bucket": "travel-sample",
                "key": "uuid()",
                "keyspace": "airport",
                "namespace": "default",
                "scope": "inventory",
                "value": "`airport`"
              },
// ...
            ]
          }
        }
      ]
    },
    "text": "INSERT INTO airport (key UUID(), value airport)\n    SELECT airport FROM airport\n      WHERE airportname = \"Heathrow\";"
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Query Engine first executes the <code>SELECT</code> statement and then uses the projection to insert into the <code>airport</code> keyspace, performing the operations in the order listed:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>An <code>IndexScan</code> to search for documents using the <code>def_inventory_airport_airportname</code> index.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A <code>Fetch</code> for the document in the <code>airport</code> keyspace.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A <code>Filter</code> for documents with <code>airportname="Heathrow"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>An <code>Insert</code> of the value along with the auto-generated key into the <code>airport</code> keyspace.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span> 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
