<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>General | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="&lt;em&gt;General&lt;/em&gt; settings allow configuration of &lt;em&gt;cluster name&lt;/em&gt;, &lt;em&gt;memory quotas&lt;/em&gt;, &lt;em&gt;storage modes&lt;/em&gt;, and &lt;em&gt;node availability&lt;/em&gt; for the cluster; and of &lt;em&gt;advanced settings&lt;/em&gt; for the Index and Query Services.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/manage/manage-settings/general-settings.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/manage/pages/manage-settings/general-settings.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Manage</li>
<li class="crumb"><a href="manage-settings.html">Manage Settings</a></li>
<li class="crumb"><a href="general-settings.html">General</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">General</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<em>General</em> settings allow configuration of <em>cluster name</em>, <em>memory quotas</em>, <em>storage modes</em>, and <em>node availability</em> for the cluster; and of <em>advanced settings</em> for the Index and Query Services.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-general-settings-examples-on-this-page"><a class="anchor" href="#configuring-general-settings-examples-on-this-page"></a>Examples on This Page</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Full and Cluster Administrators can configure general settings by means of <a href="#configure-general-settings-with-the-ui">Couchbase Web Console</a>, the <a href="#configure-general-settings-with-the-cli">CLI</a>, or the <a href="#configure-general-settings-with-the-rest-api">REST API</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-general-settings-with-the-ui"><a class="anchor" href="#configure-general-settings-with-the-ui"></a>Configure General Settings with the UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The appearance of the <strong>General</strong> screen is as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/general-settings.png" alt="The General Settings screen" width="720">
</div>
</div>
<div class="paragraph">
<p>The panels and their UI elements are described below.</p>
</div>
<div class="sect2">
<h3 id="cluster-name"><a class="anchor" href="#cluster-name"></a>Cluster Name</h3>
<div class="paragraph">
<p>The <strong>Cluster Name</strong> is the name that was given during initial setup.
This name can be changed at any time.
The interactive field appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/cluster-name.png" alt="The Cluster Name option" width="457">
</div>
</div>
</div>
<div class="sect2">
<h3 id="memory-quotas"><a class="anchor" href="#memory-quotas"></a>Memory Quotas</h3>
<div class="paragraph">
<p>The amount of memory available to each service, on every node.
The combination of assigned values is not permitted to exceed the total memory available on the most memory-constrained node.</p>
</div>
<div class="paragraph">
<p>The panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/memory-quotas.png" alt="The Memory Quotas panel" width="457">
</div>
</div>
<div class="paragraph">
<p>The displayed, configurable options are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data</strong>.
The memory allocation for the Data Service, per node.
The minimum allocation must be equal to or greater than the sum of all per bucket memory-allocations on the node.</p>
</li>
<li>
<p><strong>Index</strong>.
The buffer cache size for the Index Service.
The specified amount of memory is pre-allocated as soon as the Index Service starts up.
It is then shared with all indexes created on the node.
The total memory-usage of the indexer process will be the buffer cache size plus the size of various internal data structures and queues.</p>
</li>
<li>
<p><strong>Search</strong>.
The memory allocation for the Search Service, per node.</p>
</li>
<li>
<p><strong>Analytics</strong>.
The memory allocation for the Analytics Service, per node.</p>
</li>
<li>
<p><strong>Eventing</strong>.
The memory allocation for the Eventing Service, per node.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that neither the Query Service nor the Backup Service requires memory-allocation.</p>
</div>
</div>
<div class="sect2">
<h3 id="current-version"><a class="anchor" href="#current-version"></a>Current Version</h3>
<div class="paragraph">
<p>This panel displays the current version of Couchbase Server, and can be used to indicate whether updates are available.
It appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/current-version.png" alt="The Current Version panel" width="457">
</div>
</div>
<div class="paragraph">
<p>The <strong>Share usage information with Couchbase and get software update notifications</strong> checkbox is checked by default: this means that Couchbase Web Console will display adjacent notifications whenever a new version of Couchbase Server is available.
If the checkbox is unchecked, notifications are not provided.</p>
</div>
<div class="paragraph">
<p>Additionally, if the checkbox is checked, Couchbase Web Console communicates with Couchbase Server to ascertain the following information, which is then transmitted to Couchbase:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The server-version of the current installation.</p>
</li>
<li>
<p>Information about data-size and performance.</p>
</li>
<li>
<p>The cluster-configuration, including which services are deployed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that data is transmitted to Couchbase from the browser accessing the web console, not from the cluster itself.
The update-notification process works anonymously: data cannot be tracked.
No identifiable information (such as bucket names, bucket data, design-document names, or hostnames) is transmitted.</p>
</div>
</div>
<div class="sect2">
<h3 id="node-availability"><a class="anchor" href="#node-availability"></a>Node Availability</h3>
<div class="paragraph">
<p>The options in the <strong>Node Availability</strong> panel control whether and how <strong>Automatic Failover</strong> is applied.
For detailed information on policy and constraints, see <a href="../../learn/clusters-and-availability/automatic-failover.html" class="xref page">Automatic Failover</a>.</p>
</div>
<div class="paragraph">
<p>The panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/node-availability.png" alt="The Node Availability panel" width="548">
</div>
</div>
<div class="paragraph">
<p>The following checkboxes are provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Auto-failover after <em>x</em> seconds for up to <em>y</em> node</strong>: After the timeout period set here as <em>x</em> seconds has elapsed, an unresponsive or malfunctioning node is failed over, provided that the limit on actionable events set here as <em>y</em> has not yet been reached.
Data replicas are promoted to active on other nodes, as appropriate.
This feature can only be used when three or more nodes are present in the cluster.
The number of seconds to elapse is configurable: the default is 120; the minimum permitted is 5; the maximum 3600.
This option is selected by default.</p>
</li>
<li>
<p><strong>Auto-failover for sustained data disk read/write failures after <em>z</em> seconds</strong>: After the timeout period set here as <em>z</em> seconds has elapsed, a node is failed over if it has experienced sustained data disk read/write failures.
The timeout period is configurable: the default length is 120 seconds; the minimum permitted is 5; the maximum 3600.
This checkbox can only be checked if <strong>Auto-failover after <em>x</em> seconds for up to <em>y</em> node</strong> has also been checked.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong>Node Availability</strong> panel also contains a <strong>For Ephemeral Buckets</strong> option.
When opened, this provides an <strong>Enable auto-reprovisioning</strong> checkbox, with a configurable number of nodes.
Checking this ensures that if a node containing <em>active</em> Ephemeral buckets becomes unavailable, its replicas on the specified number of other nodes are promoted to active status as appropriate, to avoid data-loss.
Note, however, that this may leave the cluster in an unbalanced state, requiring a rebalance.</p>
</div>
<div class="sect3">
<h4 id="auto-failover-and-durability"><a class="anchor" href="#auto-failover-and-durability"></a>Auto-Failover and Durability</h4>
<div class="paragraph">
<p>Couchbase Server provides <em>durability</em>, which ensures the greatest likelihood of data-writes surviving unexpected anomalies, such as node-outages.
The auto-failover maximum should be established to support guarantees of durability.
See <a href="../../learn/data/durability.html" class="xref page">Durability</a>, for information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rebalance-settings"><a class="anchor" href="#rebalance-settings"></a>Rebalance Settings</h3>
<div class="paragraph">
<p><em>Rebalance</em> redistributes data, indexes, event processing, and query processing among available nodes.
For an overview, see <a href="../../learn/clusters-and-availability/rebalance.html" class="xref page">Rebalance</a>.
Fully open, the panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/rebalance-settings.png" alt="The Rebalance Settings panel" width="548">
</div>
</div>
<div class="paragraph">
<p>The <strong>Retry rebalance</strong> option allows rebalance to be <em>retried</em>, in cases where it has failed.
Check the checkbox, to enable.
The specifiable, <em>maximum number of retries</em> must be in the range of 1 to 3, inclusive.
The specifiable, <em>maximum number of seconds</em> must be in the range of 5 to 3600, inclusive.</p>
</div>
<div class="paragraph">
<p>Note that this option should <em>not</em> be enabled if the cluster is managed by <em>Couchbase Autonomous Operator</em>, or if custom scripts are already being used to trigger rebalance.
Note also that no administrative tasks should be attempted when rebalance-retries are pending.
However, pending rebalance-retries can be cancelled: see <a href="../manage-nodes/add-node-and-rebalance.html#automated-rebalance-failure-handling" class="xref page">Automated Rebalance-Failure Handling</a>, for information.</p>
</div>
<div class="paragraph">
<p>The <strong>Max moves per node during rebalance</strong> option establishes the maximum number of concurrent vBucket moves permitted on every individual node.
The minimum value for the parameter is <code>1</code>, the maximum <code>64</code>, the default <code>4</code>.
For information, see <a href="../../learn/clusters-and-availability/rebalance.html#limiting-concurrent-vbucket-moves" class="xref page">Limiting Concurrent vBucket Moves</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="data-settings"><a class="anchor" href="#data-settings"></a>Data Settings</h3>
<div class="paragraph">
<p>The settings in this area control the numbers of threads that are allocated <em>per node</em> by Couchbase Server to the <em>reading</em> and <em>writing</em> of data, respectively.
The maximum thread-allocation to each is <em>64</em>, the minimum <em>4</em>.</p>
</div>
<div class="paragraph">
<p>A high thread-allocation may improve performance on systems whose hardware-resources are commensurately supportive (for example, where the number of CPU cores is high).
In particular, a high number of <em>writer</em> threads on such systems may significantly optimize the performance of <em>durable writes</em>: see <a href="../../learn/data/durability.html" class="xref page">Durability</a>, for information.</p>
</div>
<div class="paragraph">
<p>Note, however, that a high thread-allocation might <em>impair</em> some aspects of system-performance on less appropriately resourced nodes.
Consequently, changes to the default thread-allocation should not be made to production systems without prior testing.</p>
</div>
<div class="paragraph">
<p>Left-clicking on the <strong>Advanced Data Settings</strong> tab displays radio buttons for <strong>Reader Thread Settings</strong> and <strong>Writer Thread Settings</strong>:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/data-settings.png" alt="The Data Settings panel" width="548">
</div>
</div>
<div class="paragraph">
<p>Each group has the same, three radio buttons, which are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Default</strong>.
The number of threads allocated is set to a balanced value which is reasonable for most workloads.</p>
</li>
<li>
<p><strong>Disk i/o optimized</strong>.
The number of threads allocated is equal to the number of CPU cores for the node.<br>
In order to get maximum performance from Magma for disk-oriented workloads, it is recommended to set the Writer Threads to 'Disk i/o optimized'. This setting will ensure there are enough threads to sustain high write rates.<br>
To Learn more about the Magma Storage Engine, see <a href="../../learn/buckets-memory-and-storage/storage-engines.html#storage-engine-magma" class="xref page">Storage Engines&#8201;&#8212;&#8201;Magma Storage Engine</a>.</p>
</li>
<li>
<p><strong>Fixed value</strong>.
The number of threads allocated is equal to the value selected from the pull-down menu.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A good rule of thumb is to set each of readers and writers equal to the queue depth of the underlying IO subsystem (i.e. readers = queue_depth and writers = queue_depth).<br>
However, for best performance it is recommended to benchmark with different settings and pick the one that best meets the throughput and latency requirements in your environment.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="query-settings"><a class="anchor" href="#query-settings"></a>Query Settings</h3>
<div class="paragraph">
<p>Left-clicking on the <strong>Advanced Query Settings</strong> tab displays interactive fields whereby the Query Service can be configured.
The top section of the panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/query-settings-top.png" alt="The top half of the Query Settings panel" width="548">
</div>
</div>
<div class="paragraph">
<p>Specify either <strong>Unrestricted</strong> or <strong>Restricted</strong>, to determine which URLs are permitted to be accessed by the <code>curl</code> function.
If <strong>Unrestricted</strong> (the default) is specified, all URLs can be accessed.
If <strong>Restricted</strong> is specified, the UI expands, to display configurable fields into which the URLs allowed and disallowed can be entered.</p>
</div>
<div class="paragraph">
<p>The <strong>Query Temp Disk Path</strong> field allows specification of the path to which temporary files are written, based on query activities.
The maximum size of the target can be specified, in megabytes.</p>
</div>
<div class="paragraph">
<p>Additional Query settings are provided in the lower section of the panel:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/query-settings-bottom.png" alt="The bottom half of the Query Settings panel" width="548">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Pipeline Batch</strong>: The number of items that can be batched for fetches from the Data Service.</p>
</li>
<li>
<p><strong>Pipeline Cap</strong>: The maximum number of items that can be buffered in a fetch.</p>
</li>
<li>
<p><strong>Scan Cap</strong>: The maximum buffered channel size between the indexer client and the Query Service, for index scans.</p>
</li>
<li>
<p><strong>Timeout</strong>: The maximum time to spend on a request before timing out.</p>
</li>
<li>
<p><strong>Prepared Limit</strong>: The maximum number of prepared statements to be held in the cache.</p>
</li>
<li>
<p><strong>Completed Limit</strong>: The number of requests to be logged in the completed requests catalog.</p>
</li>
<li>
<p><strong>Completed Threshold</strong>: The completed-query duration (in milliseconds) beyond which the query is logged in the completed requests catalog.</p>
</li>
<li>
<p><strong>Log Level</strong>: The log level used in the logger.</p>
</li>
<li>
<p><strong>Max Parallelism</strong>: The maximum number of index partitions for parallel aggregation-computing.</p>
</li>
<li>
<p><strong>SQL++ Feature Controller</strong>: Enables or disables features in the Query engine.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Do not change the <strong>SQL++ Feature Controller</strong> setting without guidance from technical support.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Transaction Timeout</strong>: The number of milliseconds to elapse before a transaction times out.</p>
</li>
<li>
<p><strong>Memory Quota</strong>: The amount of memory, in megabytes, allocated to the processing of a query.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When checked (as it is by default), the <strong>Use Cost-Based Optimizer</strong> checkbox specifies that the cost-based optimizer is used for queries: when the checkbox is unchecked, the optimizer is <em>not</em> used.</p>
</div>
<div class="paragraph">
<p>For additional details on all the Query settings in the lower section of the panel, refer to <a href="../../settings/query-settings.html" class="xref page">Settings and Parameters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="index-storage-mode"><a class="anchor" href="#index-storage-mode"></a>Index Storage Mode</h3>
<div class="paragraph">
<p>This panel provides radio buttons whereby the storage mode for indexes can be selected.
The panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/index-storage-mode.png" alt="The Index Storage Mode panel" width="548">
</div>
</div>
<div class="paragraph">
<p>The options are <a href="#learn:services-and-indexes/indexes/storage-modes.adoc#memory-optimized-index-storage" class="xref unresolved">Memory Optimized Index Storage</a>, and <a href="#learn:services-and-indexes/indexes/storage-modes.adoc#standard-index-storage" class="xref unresolved">Standard Index Storage</a>.</p>
</div>
<div class="paragraph">
<p><strong>Advanced Settings</strong> for indexes are also provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Indexer Threads</strong>.
The number of dedicated threads used by the Index Service.
The number can be increased on multi-core machines.
The default is 0.</p>
</li>
<li>
<p><strong>Num Replica</strong>.
The default number of index replicas to be created by the Index Service whenever <code>CREATE INDEX</code> is invoked.
For further details, refer to <a href="#learn:services-and-indexes/indexes/index-replication.adoc#index-replication" class="xref unresolved">Index Replication</a>.</p>
</li>
<li>
<p><strong>Indexer Rebalance Settings</strong>.
When the <strong>Optimize Index Placement On Rebalance</strong> checkbox is checked, Couchbase Server redistributes indexes when rebalance occurs, in order to optimize performance.
If the checkbox is unchecked (which is the default), such redistribution does not occur.
For further details, refer to <a href="../../learn/clusters-and-availability/rebalance.html#rebalancing-the-index-service" class="xref page">Rebalancing the Index Service</a>.</p>
</li>
<li>
<p><strong>Indexer Log Level</strong>.
Adjust the logging level.
The options are: <code>Silent</code>, <code>Fatal</code>, <code>Error</code>, <code>Warn</code>, <code>Info</code>, <code>Verbose</code>, <code>Timing</code>, <code>Debug</code>, and <code>Trace</code>.
The default is <code>Info</code>.</p>
</li>
<li>
<p><strong>Bloom Filter</strong>.
Whether Bloom filters are enabled for memory management.
When the <strong>Enable Bloom Filter</strong> checkbox is checked, Bloom filters are enabled; otherwise, they are disabled (which is the default).
See <a href="#learn:services-and-indexes/indexes/storage-modes.adoc#per-page-bloom-filters" class="xref unresolved">Per Page Bloom Filters</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="xdcr-maximum-processes"><a class="anchor" href="#xdcr-maximum-processes"></a>XDCR Maximum Processes</h3>
<div class="paragraph">
<p>The maximum number of threads used per node, to support XDCR.
A greater number of threads increases parallelism, and may thereby produce enhanced XDCR performance.
The default number of threads is 4.</p>
</div>
<div class="paragraph">
<p>The panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/xdcr-maximum-processes.png" alt="The XDCR Maximum Processes panel" width="548">
</div>
</div>
</div>
<div class="sect2">
<h3 id="analytics-replicas"><a class="anchor" href="#analytics-replicas"></a>Analytics Replicas</h3>
<div class="paragraph">
<p>The number of replicas for analytics data.
The absolute maximum number of replicas is 3.
Each replica resides on an Analytics Node: a given Analytics Node can host either one replica, or the active data on which replicas are based.
Thus, if a cluster contains three Analytics Nodes, the practical maximum number of replicas is 2; one node hosting the active data, and each of the other two nodes hosting a single replica.</p>
</div>
<div class="paragraph">
<p>The panel appears as follows:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/analytics-replicas.png" alt="The Analytics Replicas panel" width="548">
</div>
</div>
<div class="paragraph">
<p>Note that if you change this setting, you must run a rebalance for the changes to take effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="saving-settings"><a class="anchor" href="#saving-settings"></a>Saving Settings</h3>
<div class="paragraph">
<p>To save settings, left-click on the <strong>Save</strong> button, at the lower left.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/manage-settings/save-or-cancel.png" alt="The Save and Cancel/Reset buttons" width="270">
</div>
</div>
<div class="paragraph">
<p>Alternatively, cancel recently entered values, and thereby reset to previous values; by left-clicking on <strong>Cancel/Reset</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-general-settings-with-the-cli"><a class="anchor" href="#configure-general-settings-with-the-cli"></a>Configure General Settings with the CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To configure <em>name and memory</em>, <em>index storage</em>, and <em>auto-failover</em> via CLI, use the appropriate CLI command; as described below.
Note that no CLI support is provided for configuring <em>query settings</em>.
As an alternative, see <a href="#configure-general-settings-with-the-rest-api">Configure General Settings with the REST API</a>, below.
Additionally, for information on URL access lists via the SQL++ <code>CURL()</code> function, see <a href="../../n1ql/n1ql-language-reference/curl.html" class="xref page">CURL Function</a>.</p>
</div>
<div class="sect2">
<h3 id="name-and-memory-settings-via-cli"><a class="anchor" href="#name-and-memory-settings-via-cli"></a>Name and Memory Settings via CLI</h3>
<div class="paragraph">
<p>Name and memory settings are established with the <a href="#cli:cbcli/couchbase-cli-setting-cluster.adoc" class="xref unresolved">setting-cluster</a> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-cluster \
--cluster 10.143.192.101:8091 \
--username Administrator \
--password password \
--cluster-ramsize 256 \
--cluster-name 10.143.192.101 \
--cluster-index-ramsize 256 \
--cluster-fts-ramsize 512 \
--cluster-eventing-ramsize 256 \
--cluster-analytics-ramsize 1024</code></pre>
</div>
</div>
<div class="paragraph">
<p>This establishes the cluster-name as <code>10.143.192.101</code>, the memory allocation for Data and Index Services each as 256 megabytes, and the memory allocation for each other service as zero.</p>
</div>
<div class="paragraph">
<p>If successful, the call produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">SUCCESS: Cluster settings modified</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that settings for an individual server may be retrieved with the <a href="#cli:cbcli/couchbase-cli-server-info.adoc" class="xref unresolved">server-info</a> command, the output for which can be filtered, as appropriate, by <code>grep</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli server-info \
-c 10.143.192.101 -u Administrator -p password | grep fts</code></pre>
</div>
</div>
<div class="paragraph">
<p>This returns the setting for <code>ftsMemoryQuota</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">"ftsMemoryQuota": 512,</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="index-storage-settings-via-cli"><a class="anchor" href="#index-storage-settings-via-cli"></a>Index Storage Settings via CLI</h3>
<div class="paragraph">
<p>Index storage can be configured with the <a href="#cli:cbcli/couchbase-cli-setting-index.adoc" class="xref unresolved">setting-index</a> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-index \
-c 10.143.192.101:8091 \
-u Administrator \
-p password \
--index-log-level info \
--index-stable-snapshot-interval 40000 \
--index-memory-snapshot-interval 150 \
--index-storage-setting default \
--index-threads 8 \
--index-max-rollback-points 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>This establishes the logging level as <code>info</code>, the stable snapshot interval at 40 seconds, the memory snapshot at 150 milliseconds, and the storage setting as <code>default</code> (which means <em>standard</em>, rather than <em>memory optimized</em>).
The number of threads to be used is established as 8, and the maximum number of rollback points to 10.
For information on the significance of these values see <a href="#cli:cbcli/couchbase-cli-setting-index.adoc" class="xref unresolved">setting-index</a>.</p>
</div>
<div class="paragraph">
<p>If successful, the call produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">SUCCESS: Indexer settings modified</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="software-update-settings-via-cli"><a class="anchor" href="#software-update-settings-via-cli"></a>Software-Update Settings via CLI</h3>
<div class="paragraph">
<p>Software update-notifications can be configured by means of the <a href="#cli:cbcli/couchbase-cli-setting-notification.adoc" class="xref unresolved">setting-notification</a> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-notification \
-c 10.143.192.101 -u Administrator -p password \
--enable-notifications 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>A value of 1 for <code>--enable-notifications</code> enables update-notifications. A value of 0 disables.
If successful, the command produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">SUCCESS: Notification settings updated</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="auto-failover-settings-via-cli"><a class="anchor" href="#auto-failover-settings-via-cli"></a>Auto-Failover Settings via CLI</h3>
<div class="paragraph">
<p>Auto-failover can be configured with the <a href="#cli:cbcli/couchbase-cli-setting-autofailover.adoc" class="xref unresolved">setting-autofailover</a> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-autofailover \
-c 10.143.192.101:8091 \
-u Administrator \
-p password \
--enable-auto-failover 1 \
--auto-failover-timeout 120 \
--max-failovers 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>This enables auto-failover, with a timeout of 120 seconds, and an event-maximum of 2.</p>
</div>
<div class="paragraph">
<p>If successful, the command returns the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">SUCCESS: Auto-failover settings modified</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a detailed description of auto-failover settings, policy, and constraints, see <a href="../../learn/clusters-and-availability/automatic-failover.html" class="xref page">Automatic Failover</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="query-settings-via-cli"><a class="anchor" href="#query-settings-via-cli"></a>Query Settings via CLI</h3>
<div class="paragraph">
<p>You can set all of the cluster-level query settings, except for the CURL access control settings, using the <a href="#cli:cbcli/couchbase-cli-setting-query.adoc" class="xref unresolved">setting-query</a> command.</p>
</div>
<div class="paragraph">
<p>To get the current cluster-level query settings, use the <code>--get</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-query \
-c 10.143.192.101:8091 \
-u Administrator \
-p password \
--get</code></pre>
</div>
</div>
<div class="paragraph">
<p>To set cluster-level query settings, for example the log level and the maximum parallelism, use the <code>--set</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-query \
-c 10.143.192.101:8091 \
-u Administrator \
-p password \
--set \
--log-level debug \
--max-parallelism 4</code></pre>
</div>
</div>
<div class="paragraph">
<p>For additional details on the cluster-level query settings, refer to <a href="../../settings/query-settings.html" class="xref page">Settings and Parameters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="rebalance-settings-via-cli"><a class="anchor" href="#rebalance-settings-via-cli"></a>Rebalance Settings via CLI</h3>
<div class="paragraph">
<p>To obtain the cluster&#8217;s current rebalance settings by means of the CLI, use the <a href="#cli:cbcli/couchbase-cli-setting-rebalance.adoc" class="xref unresolved">setting-rebalance</a> command, with the <code>--get</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-rebalance \
-c 10.143.192.101 \
-u Administrator \
-p password \
--get</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the current rebalance settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Automatic rebalance retry disabled
Retry wait time: 300
Maximum number of retries: 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>To modify the current rebalance settings, use the <code>--set</code> option; and specify appropriate values for the <code>--max-attempts</code> and <code>--wait-for</code> flags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-rebalance \
-c 10.143.192.101 \
-u Administrator \
-p password \
--set \
--max-attempts 3 \
--wait-for 200</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command displays the following success message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">SUCCESS: Automatic rebalance retry settings updated</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see the reference page <a href="../../rest-api/rest-configure-rebalance-retry.html" class="xref page">Configure Rebalance Retries</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="xdcr-process-setting-via-cli"><a class="anchor" href="#xdcr-process-setting-via-cli"></a>XDCR Process Setting via CLI</h3>
<div class="paragraph">
<p>To configure the number of XDCR processes for the node, use the <a href="#cli:cbcli/couchbase-cli-setting-xdcr.adoc" class="xref unresolved">setting-xdcr</a> command, with the <code>--max-processes</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">/opt/couchbase/bin/couchbase-cli setting-xdcr \
-c 10.143.192.101 \
-u Administrator \
-p password \
--max-processes 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">SUCCESS: Global XDCR settings updated</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="analytics-settings-via-cli"><a class="anchor" href="#analytics-settings-via-cli"></a>Analytics Settings via CLI</h3>
<div class="paragraph">
<p>To obtain the current Analytics replica settings by means of the CLI, use the <a href="#cli:cbcli/couchbase-cli-setting-analytics.adoc" class="xref unresolved">setting-analytics</a> command, with the <code>--get</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/couchbase-cli setting-analytics \
-c localhost \
-u Administrator \
-p password \
--get</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the current replica settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">numReplicas: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>To establish the number of replicas for Analytics Service data, use the <a href="#cli:cbcli/couchbase-cli-setting-analytics.adoc" class="xref unresolved">setting-analytics</a> command, with the <code>--set</code> and <code>--replicas</code> options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/couchbase-cli setting-analytics \
-c localhost \
-u Administrator \
-p password \
--set \
--replicas 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">SUCCESS: Analytics settings updated</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-general-settings-with-the-rest-api"><a class="anchor" href="#configure-general-settings-with-the-rest-api"></a>Configure General Settings with the REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Multiple REST API methods are provided to support configuration of general settings.
These are described below.</p>
</div>
<div class="sect2">
<h3 id="name-and-memory-settings-via-rest"><a class="anchor" href="#name-and-memory-settings-via-rest"></a>Name and Memory Settings via REST</h3>
<div class="paragraph">
<p>To establish name and memory settings, use the <code>/pools/default</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -v -X POST -u Administrator:password \
http://10.143.192.101:8091/pools/default \
-d clusterName=10.143.192.101 \
-d memoryQuota=256 \
-d indexMemoryQuota=256 \
-d ftsMemoryQuota=256 \
-d cbasMemoryQuota=1024 \
-d eventingMemoryQuota=512</code></pre>
</div>
</div>
<div class="paragraph">
<p>This establishes the cluster&#8217;s IP address as its name, and assigns memory-quotas to the Data, Index, Search, Analytics, and Eventing Services.</p>
</div>
<div class="paragraph">
<p>Note that when used with GET, <code>/pools/default</code> returns configuration-settings.
The output can be filtered, by means of a tool such as <a href="https://stedolan.github.io/jq/">jq</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -s -u Administrator:password \
http://10.143.192.101:8091/pools/default | jq '.ftsMemoryQuota'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, this returns the value of the key <code>ftsMemoryQuota</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">256</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="software-update-settings-via-rest"><a class="anchor" href="#software-update-settings-via-rest"></a>Software-Update Settings via REST</h3>
<div class="paragraph">
<p>Software update-notifications can be configured by means of the <code>/setting/stats</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -v -X POST -u Administrator:password \
http://10.143.192.101:8091/settings/stats \
-d sendStats=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>This establishes that software-update notifications should be send.
To prevent the sending of notifications, set the value of <code>sendStats</code> to <code>false</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="node-availability-settings-via-rest"><a class="anchor" href="#node-availability-settings-via-rest"></a>Node Availability Settings via REST</h3>
<div class="paragraph">
<p>To establish node availability settings, use the <code>/settings/autoFailover</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -v -X POST -u Administrator:password \
http://10.143.192.101:8091/settings/autoFailover \
-d enabled=true \
-d timeout=120 \
-d failoverOnDataDiskIssues[enabled]=false \
-d failoverOnDataDiskIssues[timePeriod]=120 \
-d maxCount=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>This enables auto-failover, with a timeout of 120 seconds, and a maximum failover-count of 2.
Additionally, failover is enabled in the event of suboptimal disk responsiveness, with a time-period of 120 seconds specified.</p>
</div>
<div class="paragraph">
<p>For more information on these options, see the descriptions provided above, for the <a href="#node-availability">UI</a>.</p>
</div>
<div class="paragraph">
<p>Additionally, the <code>/settings/autoReprovision</code> method can be used; to specify that if a node containing <em>active</em> Ephemeral buckets becomes unavailable, its replicas on the specified number of other nodes are promoted to active status as appropriate, to avoid data-loss.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -v -X POST -u Administrator:password \
http://10.143.192.101:8091/settings/autoReprovision \
-d enabled=true \
-d maxNodes=1</code></pre>
</div>
</div>
<div class="paragraph">
<p>This enables auto-reprovisioning, specifying 1 as the maximum number of nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="index-settings-via-rest"><a class="anchor" href="#index-settings-via-rest"></a>Index Settings via REST</h3>
<div class="paragraph">
<p>To establish index settings, use the <code>/settings/indexes</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/rest-api/examples/post-settings-indexes.sh">curl -v -X POST http://127.0.0.1:8091/settings/indexes \
-u Administrator:password \
-d indexerThreads=4 \
-d logLevel=verbose \
-d maxRollbackPoints=2 \
-d storageMode=plasma \
-d redistributeIndexes=false \
-d numReplica=0 \
-d enablePageBloomFilter=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>This establishes the storage mode for indexes as <code>plasma</code>.
It also establishes a <code>verbose</code> logging level, and a total of 4 index threads.
For detailed information on these and other settings, see the REST reference page for the method, at <a href="../../rest-api/post-settings-indexes.html" class="xref page">Set GSI Settings</a>.</p>
</div>
<div class="paragraph">
<p>If successful, the call returns a JSON object, which provides values for all current index settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/rest-api/examples/post-settings-indexes.jsonc">{
  "redistributeIndexes":false,
  "numReplica":0,
  "enablePageBloomFilter":false,
  "indexerThreads":4,
  "memorySnapshotInterval":200,
  "stableSnapshotInterval":5000,
  "maxRollbackPoints":2,
  "logLevel":"verbose",
  "storageMode":"plasma"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-settings-via-rest"><a class="anchor" href="#data-settings-via-rest"></a>Data Settings via REST</h3>
<div class="paragraph">
<p>To set the number of reader and writer threads for Couchbase Server, use the <code>POST /pools/default/settings/memcached/global</code> HTTP method and endpoint, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -v -X POST -u Administrator:password \
http://10.143.192.101:8091/pools/default/settings/memcached/global \
-d num_reader_threads=12 \
-d num_writer_threads=8</code></pre>
</div>
</div>
<div class="paragraph">
<p>This sets the number of <em>reader</em> threads to <code>12</code>, and the number of <em>writer</em> threads to <code>8</code>.
If successful, the call returns an object whose values confirm the settings that have been made:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"num_reader_threads":12,"num_writer_threads":8}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="../../learn/buckets-memory-and-storage/storage-settings.html#threading" class="xref page">Threading</a> for an overview of reader and writer threads.
Also see the REST API reference page, <a href="../../rest-api/rest-reader-writer-thread-config.html" class="xref page">Setting Thread Allocations</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="query-settings-via-rest"><a class="anchor" href="#query-settings-via-rest"></a>Query Settings via REST</h3>
<div class="paragraph">
<p>To set the directory for temporary query data, and establish its size-limit, use the <code>/settings/querySettings</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Unresolved include directive in modules/manage/pages/manage-settings/general-settings.adoc - include::rest-api:example$query-settings-post-settings.sh[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This specifies that the directory for temporary query data should be <code>/tmp</code>; and that the maximum size should be 2048 megabytes.</p>
</div>
<div class="paragraph">
<p>If successful, this call returns a JSON document featuring all the current query-related settings, including access-control:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">Unresolved include directive in modules/manage/pages/manage-settings/general-settings.adoc - include::rest-api:example$query-settings-post-settings.jsonc[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The document&#8217;s values indicate that the specified values for directory and size have been established; and that the current setting for access-control restricts access to all, with no exceptions.</p>
</div>
<div class="paragraph">
<p>To specify particular URLs as allowed and disallowed, use the <code>/settings/querySettings/curlWhitelist</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Unresolved include directive in modules/manage/pages/manage-settings/general-settings.adoc - include::rest-api:example$query-settings-post-access.sh[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>A JSON document is specified as the payload for the method.
The document&#8217;s values indicate that <code><a href="https://company1.com" class="bare">https://company1.com</a></code> is allowed, and <code><a href="https://company2.com" class="bare">https://company2.com</a></code> is disallowed.</p>
</div>
<div class="paragraph">
<p>If successful, the call returns a JSON document that confirms the modified settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">Unresolved include directive in modules/manage/pages/manage-settings/general-settings.adoc - include::rest-api:example$query-settings-post-access.jsonc[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>For additional information, refer to <a href="../../rest-api/rest-cluster-query-settings.html" class="xref page">Cluster Query Settings API</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="rebalance-settings-via-rest"><a class="anchor" href="#rebalance-settings-via-rest"></a>Rebalance Settings via REST</h3>
<div class="paragraph">
<p>By means of the REST API, both <em>rebalance retries</em> and <em>maximum concurrent moves per node</em> can be configured.</p>
</div>
<div class="sect3">
<h4 id="rebalance-retries-via-rest"><a class="anchor" href="#rebalance-retries-via-rest"></a>Rebalance Retries via REST</h4>
<div class="paragraph">
<p>To obtain the cluster&#8217;s current settings for <em>rebalance retries</em> by means of the REST API, use the <code>GET /settings/retryRebalance</code> HTTP method and URI, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -X GET -u Administrator:password \
http://10.143.192.101:8091/settings/retryRebalance</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"enabled":true,"afterTimePeriod":200,"maxAttempts":3}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This output shows that rebalance retry is enabled, with <code>200</code> seconds required to elapse before a retry is attempted, and a maximum of <code>3</code> retries possible.</p>
</div>
<div class="paragraph">
<p>To change the rebalance settings, use the <code>POST</code> method with the same URI, specifying appropriate values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -X POST -u Administrator:password \
http://10.143.192.101:8091/settings/retryRebalance \
-d enabled=false \
-d afterTimePeriod=100 \
-d maxAttempts=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"enabled":false,"afterTimePeriod":100,"maxAttempts":2}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This verifies that rebalance retry has been disabled, the required period between retries changed to <code>100</code> seconds, and the maximum number of retries changed to <code>2</code>.</p>
</div>
<div class="paragraph">
<p>For more information on getting and setting the rebalance retry status, see <a href="../../rest-api/rest-configure-rebalance-retry.html" class="xref page">Configure Rebalance Retries</a>, <a href="../../rest-api/rest-get-rebalance-retry.html" class="xref page">Get Rebalance-Retry Status</a>, and <a href="../../rest-api/rest-cancel-rebalance-retry.html" class="xref page">Cancel Rebalance Retries</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="maximum-concurrent-vbucket-moves-via-rest"><a class="anchor" href="#maximum-concurrent-vbucket-moves-via-rest"></a>Maximum Concurrent vBucket Moves via REST</h4>
<div class="paragraph">
<p>To inspect the current maximum number of concurrent vBucket moves permitted for every node, use the <code>GET /settings/rebalance</code> HTTP method and URI, with the <code>rebalanceMovesPerNode</code> parameter, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -v -X GET http://10.143.201.101:8091/settings/rebalance \
-u Administrator:password</pre>
</div>
</div>
<div class="paragraph">
<p>This returns an object, confirming the current setting as being <code>4</code> (which is the default value):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"rebalanceMovesPerNode":4}</pre>
</div>
</div>
<div class="paragraph">
<p>To <em>set</em> a new value for the parameter use the <code>POST</code> method with the same URI, and with the <code>rebalanceMovesPerNode</code> parameter.
Note that the minimum value is <code>1</code>, and the maximum <code>64</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -v -X POST http://10.143.201.101:8091/settings/rebalance \
-u Administrator:password \
-d rebalanceMovesPerNode=10</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the call returns an object confirming the new setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"rebalanceMovesPerNode":10}</pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see the REST reference page <a href="../../rest-api/rest-limit-rebalance-moves.html" class="xref page">Limiting Concurrent vBucket Moves</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xdcr-process-setting-via-rest"><a class="anchor" href="#xdcr-process-setting-via-rest"></a>XDCR Process Setting via REST</h3>
<div class="paragraph">
<p>To determine how many XDCR processes are configured per node, use the <code>GET /settings/replications</code> HTTP method and URI, as follows.
Note that this example pipes the output to the <a href="https://stedolan.github.io/jq/">jq</a> program, to facilitate readability.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -X GET -u Administrator:password \
http://10.143.192.101:8091/settings/replications | jq '.'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "checkpointInterval": 600,
  "compressionType": "Auto",
  "desiredLatency": 50,
  "docBatchSizeKb": 2048,
  "failureRestartInterval": 10,
  "filterBypassExpiry": false,
  "filterDeletion": false,
  "filterExpiration": false,
  "goGC": 100,
  "goMaxProcs": 4,
  "logLevel": "Info",
  "networkUsageLimit": 0,
  "optimisticReplicationThreshold": 256,
  "priority": "High",
  "sourceNozzlePerNode": 2,
  "statsInterval": 1000,
  "targetNozzlePerNode": 2,
  "workerBatchSize": 500
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configured number of threads is the value to <code>goMaxProcs</code>; which is currently <code>4.</code>
To change this value, use the <code>POST</code> method with the same URI, specifying the required number of processes as the value to the <code>--goMaxProcs</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -X POST -u Administrator:password \
http://10.143.192.101:8091/settings/replications \
-d goMaxProcs=5 | jq '.'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, this returns the following object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "checkpointInterval": 600,
  "compressionType": "Auto",
  "desiredLatency": 50,
  "docBatchSizeKb": 2048,
  "failureRestartInterval": 10,
  "filterBypassExpiry": false,
  "filterDeletion": false,
  "filterExpiration": false,
  "goGC": 100,
  "goMaxProcs": 5,
  "logLevel": "Info",
  "networkUsageLimit": 0,
  "optimisticReplicationThreshold": 256,
  "priority": "High",
  "sourceNozzlePerNode": 2,
  "statsInterval": 1000,
  "targetNozzlePerNode": 2,
  "workerBatchSize": 500
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This output indicates that the value of <code>goMaxProcs</code> has been appropriately incremented.</p>
</div>
<div class="paragraph">
<p>For more information, see the reference page <a href="../../rest-api/rest-xdcr-adv-settings.html" class="xref page">Managing Advanced XDCR Settings</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="analytics-settings-via-rest"><a class="anchor" href="#analytics-settings-via-rest"></a>Analytics Settings via REST</h3>
<div class="paragraph">
<p>To establish the number of replicas for Analytics Service data, use the <code>/settings/analytics</code> endpoint.
The <code>GET</code> method can be used to retrieve the current setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET -u Administrator:password \
http://localhost:8091/settings/analytics</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the call returns an object such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"numReplicas":1}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This indicates that the number of replicas currently configured for the Analytics Service is <code>1</code>.
To change this number to <code>2</code>, enter the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST -u Administrator:password \
http://localhost:8091/settings/analytics \
-d numReplicas=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the call returns an object confirming the newly established number of replicas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"numReplicas":2}</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
