<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Manage Logging | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="The &lt;em&gt;Logging&lt;/em&gt; facility allows a record to be maintained of important events that occur on Couchbase Server.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/manage/manage-logging/manage-logging.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/manage/pages/manage-logging/manage-logging.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Manage</li>
<li class="crumb"><a href="manage-logging.html">Manage Logging</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Manage Logging</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The <em>Logging</em> facility allows a record to be maintained of important events that occur on Couchbase Server.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging_overview"><a class="anchor" href="#logging_overview"></a>Logging Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Couchbase Logging facility records important events, and saves the details to log files, on disk.
Additionally, events of cluster-wide significance are displayed on the <strong>Logs</strong> screen, in Couchbase Web Console.
This may appear as follows:</p>
</div>
<div id="welcome" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/loggingScreenBasic.png" alt="loggingScreenBasic" width="720">
</div>
</div>
<div class="paragraph">
<p>By default, on Linux systems, log files are saved to <code>/opt/couchbase/var/lib/couchbase/logs</code>; on MacOS, to <code>/Users/username/Library/Application Support/Couchbase/var/lib/couchbase/logs</code>; and on Windows, to <code>C:\Program Files\Couchbase\Server\var\lib\couchbase\logs</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="collecting_information"><a class="anchor" href="#collecting_information"></a>Collecting Information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On each node within a Couchbase Server-cluster, logging is performed continuously.
<em>A subset</em> of the results can be reviewed in the Couchbase Web Console <strong>Logs</strong> screen; while <em>all</em> details are saved to the <code>logs</code> directory, as described above.
(Note that the  <code>logs</code> directory may include <code>audit.log</code>.
This is a special log file, used to manage cluster-security, and is handled separately from the other log files.
The information provided throughout the remainder of this page — on collecting, uploading, redacting, and more — <em>does not</em> apply to <code>audit.log</code>.
For information on <code>audit.log</code>, see <a href="../../learn/security/auditing.html" class="xref page">Auditing</a>.)</p>
</div>
<div class="paragraph">
<p>Additionally, <em>explicit logging</em> can be performed by the user.
This allows comprehensive and fully updated information to be generated as required.
The output includes everything currently on disk, together with additional data that is gathered in real time.
Explicit logging can either be performed for all nodes in the cluster, or for one or more individual nodes.
The results are saved as zip files: each zip file contains the log-data generated for an individual node.</p>
</div>
<div class="paragraph">
<p>Explicit logging can be performed by means of the Couchbase CLI utility <code>cbcollect_info</code>.
The documentation for this utility, provided
<a href="../../cli/cbcollect-info-tool.html" class="xref page">here</a>, includes a complete list of the log files that can be created, and a description of the contents of each.</p>
</div>
<div class="paragraph">
<p>Additionally, administrators with either the <strong>Full Admin</strong> or <strong>Cluster Admin</strong> role can perform explicit logging by means of Couchbase Web Console: on the <strong>Logs</strong> page, left-click on the <strong class="ui">Collect Information</strong> tab, located near the top.
(Note that for administrators without either of these roles, this tab does not appear.)</p>
</div>
<div id="collect_info" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/collectInfo.png" alt="collectInfo" width="248">
</div>
</div>
<div class="paragraph">
<p>This brings up the <strong>Collect Information</strong> screen:</p>
</div>
<div id="collect_info_screen" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/collectInformationScreen.png" alt="collectInformationScreen" width="720">
</div>
</div>
<div class="paragraph">
<p>This allows logs and diagnostic information to be collected either from all or from selected nodes within the cluster.
It also allows, in the <strong>Redact Logs</strong> panel, a log redaction-level to be specified (this is described in
<a href="#applying_redaction">Applying Redaction</a>, below).
The <strong>Specify custom temp directory</strong> checkbox can be checked to specify the absolute pathname of a directory into which data is temporarily saved, during the collection process.
The <strong>Specify custom destination directory</strong> can be checked to specify the absolute pathname of a directory into which the completed zip files are saved.</p>
</div>
<div class="paragraph">
<p>The <strong>Upload to Couchbase</strong> checkbox is described in
<a href="#uploading_log_files">Uploading Log Files</a>, below.</p>
</div>
<div class="paragraph">
<p>To start the collection-process, left-click on the <strong class="ui">Start Collecting</strong> button.
A notification is displayed, indicating that the collection-process is running.
A button is provided to allow the collection-process to be stopped, if this should be appropriate.
Whenever the collection-process completes for one of the nodes, a notification is displayed, and the collection-process continues, if necessary, for remaining nodes.
When the process has completed for all nodes, information is displayed as follows:</p>
</div>
<div id="collect_info_complete" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/collectInformationComplete.png" alt="collectInformationComplete" width="720">
</div>
</div>
<div class="paragraph">
<p>As this indicates, a set of log files has been created for each node in the cluster.
Each file is saved as a zip file in the stated temporary location.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="uploading_log_files"><a class="anchor" href="#uploading_log_files"></a>Uploading Log Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Log files can be uploaded to Couchbase, for inspection by Couchbase Support.</p>
</div>
<div class="paragraph">
<p>For information on performing upload at the command-prompt, see <a href="../../cli/cbcollect-info-tool.html" class="xref page">cbcollect_info</a>.
To upload by means of Couchbase Web Console, before starting the collection-process, check the <strong class="ui">Upload to Couchbase</strong> checkbox:</p>
</div>
<div id="upload_to_couchbase_checkbox" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/uploadToCouchbaseCheckbox.png" alt="uploadToCouchbaseCheckbox" width="150">
</div>
</div>
<div class="paragraph">
<p>The display changes to the following:</p>
</div>
<div id="upload_to_couchbase_dialog_basic" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/uploadToCouchbaseDialogBasic.png" alt="uploadToCouchbaseDialogBasic" width="520">
</div>
</div>
<div class="paragraph">
<p>The dialog now features an <strong>Upload to Host</strong> field, which contains the server-location to which the customer-data is uploaded.
Fields are also provided for <strong>Customer Name</strong> (required) and <strong>Ticket Number</strong> (optional).
The <strong>Upload Proxy</strong> field optionally takes the hostname of a remote system, which contains the directory specified by the pathname.
If the <strong>Bypass Reachability Checks</strong> checkbox is left unchecked (which is the default), an attempt is made to gather and upload the collected information without the upload specifications (that is, the upload host, customer name, and optionally, upload proxy) being pre-verified.
Otherwise, if the checkbox <em>is</em> checked, the upload specifications are submitted for verification <em>before</em> information is collected and attemptedly uploaded: in which case, if the upload specifications cannot be verified, the collection-operation does not proceed, and an error is flagged on the console.</p>
</div>
<div class="paragraph">
<p>When all required information has been entered, to start information-collection, left-click on the <strong>Start Collecting</strong> button.
When collection and upload have been successfully completed, the URL of the uploaded zip file is displayed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-a-cluster-summary"><a class="anchor" href="#getting-a-cluster-summary"></a>Getting a Cluster Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A summary of the cluster&#8217;s status can be acquired by means of the link at the lower right of the <strong>Collect Information</strong> panel:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/getClusterSummaryLink.png" alt="getClusterSummaryLink" width="260">
</div>
</div>
<div class="paragraph">
<p>This brings up the <strong>Cluster Summary Info</strong> dialog:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/clusterSummaryInfoDialog.png" alt="clusterSummaryInfoDialog" width="420">
</div>
</div>
<div class="paragraph">
<p>This displayed JSON document, which contains detailed status on the current configuration and status of the entire cluster, can be copied to the clipboard, by left-clicking on the <strong>Copy to Clipboard</strong> button, at the lower left.
This information can then be manually shared with Couchbase Support; either in addition to, or as an alternative to log-collection.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding_redaction"><a class="anchor" href="#understanding_redaction"></a>Understanding Redaction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Optionally, log files can be <em>redacted</em>.
This means that user-data, considered to be private, is removed.
Such data includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Key/value pairs in JSON documents</p>
</li>
<li>
<p>Usernames</p>
</li>
<li>
<p>Query-fields that reference key/value pairs and/or usernames</p>
</li>
<li>
<p>Names and email addresses retrieved during product registration</p>
</li>
<li>
<p>Extended attributes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This redaction of user-data is referred to as <em>partial</em> redaction.
(<em>Full</em> redaction, which will be available in a forthcoming version of Couchbase Server, additionally redacts <em>meta-data</em>.)</p>
</div>
<div class="paragraph">
<p>In each modified log file, hashed text (achieved with SHA1) is substituted for redacted text.
For example, the following log file fragment displays private data — a Couchbase username:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">0ms [I0] {2506} [INFO] (instance - L:421) Effective connection string:
couchbase://127.0.0.1?username=Administrator&amp;console_log_level=5&amp;;.
Bucket=default</code></pre>
</div>
</div>
<div class="paragraph">
<p>The redacted version of the log file might appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">0ms [I0] {2506} [INFO] (instance - L:421) Effective connection string:
&lt;UD&gt;e07a9ca6d84189c1d91dfefacb832a6491431e95&lt;/UD&gt;.
Bucket=&lt;UD&gt;e16d86f91f9fd0b110be28ad00e348664b435e9e&lt;/UD&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that redaction may eliminate some parameters containing non-private data, as well as all parameters containing private.</p>
</div>
<div class="paragraph">
<p>Note also that redaction of log files may have one or both of the following consequences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Logged issues will be found harder to diagnose, by both the user and Couchbase Support.</p>
</li>
<li>
<p>Log-collection is significantly more time-consumptive, since redaction is performed at collection-time.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applying_redaction"><a class="anchor" href="#applying_redaction"></a>Applying Redaction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redaction of log files saved on the cluster can be applied as required, when performing <em>explicit logging</em>, by means of either <code>cbcollect_info</code> or the <strong>Logs</strong> facility of Couchbase Web Console.</p>
</div>
<div class="paragraph">
<p>For information on performing explicit logging with redaction at the command-prompt, see
<a href="../../cli/cbcollect-info-tool.html" class="xref page">cbcollect_info</a>.</p>
</div>
<div class="paragraph">
<p>To perform explicit logging with redaction by means of Couchbase Web Console, before starting the collection-process, access the <strong>Redact Logs</strong> panel, on the <strong>Collect Information</strong> screen.
This features two radio-buttons, labeled <strong>None</strong> and <strong>Partial Redaction</strong>.
Make sure the <strong class="ui">Partial Redaction</strong> radio-button is selected.
Guidance on redaction is displayed below it:</p>
</div>
<div id="partial_redaction_selection" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-logging/partialRedactionSelection.png" alt="partialRedactionSelection" width="682">
</div>
</div>
<div class="paragraph">
<p>Left-click on the <strong>Start Collecting</strong> button.
A notification explains that the collection-process is now running.
When the process has completed, a further notification appears, specifying the location (local or remote) of each created zip file.
Note that, when redaction has been specified, two zip files are provided for each node: one file containing redacted data, the other unredacted data.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redacting-log-files-outside-the-cluster"><a class="anchor" href="#redacting-log-files-outside-the-cluster"></a>Redacting Log Files Outside the Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certain Couchbase technologies — such as <code>cbbackupmgr</code>, the SDK, connectors, and Mobile — create log files saved outside the Couchbase Cluster.
These can be redacted by means of the command-line tool <code>cblogredaction</code>.
Multiple log files can be specified simultaneously.
Each file must be specified as plain text.
Optionally, the salt to be used can be automatically generated.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cblogredaction /Users/username/testlog.log -g -o /Users/username -vv
2018/07/17T11:27:06 WARNING: Automatically generating salt. This will make it difficult to cross reference logs
2018/07/17T11:27:07 DEBUG: /Users/username/testlog.log - Starting redaction file size is 19034284 bytes
2018/07/17T11:27:07 DEBUG: /Users/username/testlog.log - Log redacted using salt: &lt;ud&gt;COeAtexHB69hGEf3&lt;/ud&gt;
2018/07/17T11:27:07 INFO: /Users/username/testlog.log - Finished redacting, 50373 lines processed, 740 tags redacted, 0 lines with unmatched tags</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see the corresponding man page, or run the command with the <code>--h</code> (help) option.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="log-file-locations"><a class="anchor" href="#log-file-locations"></a>Log File Locations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Server creates log files in the following locations.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Location</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/opt/couchbase/var/lib/couchbase/logs</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">C:\Program Files\Couchbase\Server\var\lib\couchbase\logs</em></p>
<p class="tableblock">Assumes default installation location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mac OS X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/Users/&lt;username&gt;/Library/Application Support/Couchbase/var/lib/couchbase/logs</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="log-file-listing"><a class="anchor" href="#log-file-listing"></a>Log File Listing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table lists the log files to be found on Couchbase Server.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 41.1764%;">
<col style="width: 58.8236%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File</th>
<th class="tableblock halign-left valign-top">Log Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>audit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security audit log for administrators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>babysitter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the babysitter process which is responsible for spawning all Couchbase Server processes and respawning them where necessary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup_service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log for Backup Service; containing entries at <code>debug</code>, <code>info</code>, <code>warn</code>, and <code>error</code> levels.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>couchdb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the <code>couchdb</code> subsystem which underlies map-reduce.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>crash-log.bin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to pass service crash reports from the babysitter to the <code>ns_server</code>.
For example, if the <code>ns_server</code> is available, any crash of the babysitter&#8217;s child is passed directly to the special crash logger service within the <code>ns_server</code>.
If the logger service is not attached to the babysiter, then the babysitter saves that crash report to the disk and the <code>ns_server</code> can later obtain and log it even if the babysitter is restarted.
This is not a log file in itself.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>debug</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug-level troubleshooting for the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error-level troubleshooting log for the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the eventing service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the full-text search service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>goxdcr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the <code>Cross Data Center Replication</code> (XDCR) component used in Couchbase Server versions after 4.0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http_access</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The admin access log records server requests (including administrator logins) to the REST API or Couchbase Web Console.
It is output in common log format and contains several important fields such as remote client IP, timestamp, GET/POST request and resource requested, HTTP status code, and so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http_access_internal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The admin access log records internal server requests (including administrator logins) to the REST API or Couchbase Web Console.
It is output in common log format and contains several important fields such as remote client IP, timestamp, GET/POST request and resource requested, HTTP status code, and so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the indexing and storage subsystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Info-level troubleshooting log for the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>json_rpc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log used by the cluster manager.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mapreduce_errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JavaScript and other view-processing errors are reported in this file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memcached</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information relating to the core memcached component, including DCP stream requests and slow operations.<br>
It is possible to adjust the logging for slow operations.
See <a href="#adjust-threshold-slow-op-logging">Adjusting Threshold for Logging Slow Operations</a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metakv</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the <code>metakv</code> store, a cluster-wide metadata store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ns_couchdb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains information related to starting up the <code>couchdb</code> subsystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>projector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the projector process which is responsible for sending appropriate mutations from Data nodes to Index nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log for the instance of <a href="https://prometheus.io" target="_blank" rel="noopener">Prometheus</a> that runs on the current node, supporting the gathering and management of Couchbase-Server <em>metrics</em> .
(See the <a href="../../metrics-reference/metrics-reference.html" class="xref page">Metrics Reference</a>, for more information.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rebalance</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains reports on rebalances that have occurred.
Up to the last <em>five</em> reports are maintained.
Each report is named in accordance with the time it was run: for example, <code>rebalance_report_2020-03-17T11:10:17Z.json</code>.
See the <a href="../../rebalance-reference/rebalance-reference.html" class="xref page">Rebalance Reference</a>, for detailed information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains progress and crash reports for the Erlang processes.
Due to the nature of Erlang, processes crash and restart upon an error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ssl_proxy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the ssl proxy spawned by the cluster manager.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains periodic statistic dumps from the cluster management component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>views</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the view engine, predominantly focusing on the changing of partition states.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xdcr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Troubleshooting log for the Cross Data Center Replication (<em>XDCR</em>) component used in Couchbase Server versions prior to 4.0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xdcr_errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error-level troubleshooting log for the XDCR component used in Couchbase Server versions prior to 4.0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xcdr_trace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trace-level troubleshooting log for the XDCR component used in Couchbase Server versions prior to 4.0.
Unless trace-level logging is explicitly turned on this log is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_access.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information on access attempts made to the REST/HTTP port of the Analytics Service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_cbas_debug.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debugging information, related to the <code>cbas</code> process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_dcpdebug.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCP-specific debugging information related to the Analytics Service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_dcp_failed_ingestion.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information on documents that have failed to be imported/ingested from the Data Service into the Analytics Service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_debug.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events logged by the Analytics Service at the DEBUG logging level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_error.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events logged by the Analytics Service at the ERROR logging level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_info.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events logged by the Analytics Service at the INFO logging level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_shutdown.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information concerning the shutting down of the Analytics Service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analytics_warn.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events logged by the Analytics Service at the WARN logging level.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="log-file-rotation"><a class="anchor" href="#log-file-rotation"></a>Log File Rotation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>memcached</code> log file is rotated when it has reached 10MB in size; twenty rotations being maintained &#8212; the current file, plus nineteen compressed rotations.
Other logs are automatically rotated after they have reached 40MB in size; ten rotations being maintained &#8212; the current file, plus nine compressed rotations.</p>
</div>
<div class="paragraph">
<p>To provide custom rotation-settings for each component, add the following to the <code>static_config</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{disk_sink_opts_disk_debug,
        [{rotation, [{size, 10485760},
        {num_files, 10}]}]}.</pre>
</div>
</div>
<div class="paragraph">
<p>This rotates the <code>debug.log</code> at 10MB, and keeps ten copies of the log: the current log and nine compressed logs.</p>
</div>
<div class="paragraph">
<p>Log rotation settings can be changed.
Note, however, that this is not advised; and that only the default log rotation settings are supported by Couchbase.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changing-log-file-locations"><a class="anchor" href="#changing-log-file-locations"></a>Changing Log File Locations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default log location on Linux systems is <em class="path">/opt/couchbase/var/lib/couchbase/logs</em>.
The location can be changed.
Note, however, that this is not advised; and that only the default log location is supported by Couchbase.</p>
</div>
<div class="paragraph">
<p>To change the location, proceed as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as <code>root</code> or <code>sudo</code> and navigate to the directory where Couchbase Server is installed.
For example: <code>/opt/couchbase/etc/couchbase/static_config</code>.</p>
</li>
<li>
<p>Edit the <em class="path">static_config</em> file: change the <code>error_logger_mf_dir</code> variable, specifying a different directory.
For example: <code>{error_logger_mf_dir, "/home/user/cb/opt/couchbase/var/lib/couchbase/logs"}</code></p>
</li>
<li>
<p>Stop and restart Couchbase Server. See <a href="../../install/startup-shutdown.html" class="xref page">Startup and Shutdown</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changing-log-file-levels"><a class="anchor" href="#changing-log-file-levels"></a>Changing Log File Levels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default logging level for all log files is <em>debug</em>, except for <code>couchdb</code>, which is set to <em>info</em>.
Logging levels can be changed.
Note, however, that this is not advised; and that only the default logging levels are supported by Couchbase.</p>
</div>
<div class="paragraph">
<p>Either <em>persistent</em> or <em>dynamic</em> changes can be made to logging levels.</p>
</div>
<div class="sect2">
<h3 id="persistent-changes"><a class="anchor" href="#persistent-changes"></a>Persistent Changes</h3>
<div class="paragraph">
<p><em>Persistent</em> means that changes continue to be implemented, should a Couchbase Server reboot occur.
To make a persistent change on Linux systems, proceed as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as <code>root</code> or <code>sudo</code>, and navigate to the directory where you installed Couchbase.
For example: <code>/opt/couchbase/etc/couchbase/static_config</code>.</p>
</li>
<li>
<p>Edit the <em class="path">static_config</em> file and change the desired log component.
(Parameters with the <code>loglevel_</code> prefix establish logging levels.)</p>
</li>
<li>
<p>Stop and restart Couchbase Server. See <a href="../../install/startup-shutdown.html" class="xref page">Startup and Shutdown</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-changes"><a class="anchor" href="#dynamic-changes"></a>Dynamic Changes</h3>
<div class="paragraph">
<p><em>Dynamic</em> means that if a Couchbase Server reboot occurs, the changed logging levels revert to the default.
To make a dynamic change, execute a <code class="cmd">curl POST</code> command, using the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST -u adminName:adminPassword HOST:PORT/diag/eval \
              -d ‘ale:set_loglevel(&lt;log_component&gt;,&lt;logging_level&gt;).’</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>log_component</code>: The default log level (except <code>couchdb</code>) is <code>debug</code>; for example <code>ns_server</code>.
The available loggers are <code>ns_server</code>, <code>couchdb</code>, <code>user</code>, <code>Menelaus</code>, <code>ns_doctor</code>, <code>stats</code>, <code>rebalance</code>, <code>cluster</code>, views, <code>mapreduce_errors</code> , xdcr and <code>error_logger</code>.</p>
</li>
<li>
<p><code>logging_level</code>: The available log levels are <code>debug</code>, <code>info</code>, <code>warn</code>, and <code>error</code>.</p>
<div class="listingblock">
<div class="content">
<pre>curl -X POST -u Administrator:password http://127.0.0.1:8091/diag/eval \
                -d 'ale:set_loglevel(ns_server,error).</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="collecting-logs-using-cli"><a class="anchor" href="#collecting-logs-using-cli"></a>Collecting Logs Using the CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To collect logs, use the CLI command
<a href="../../cli/cbcollect-info-tool.html" class="xref page">cbcollect_info</a>.</p>
</div>
<div class="paragraph">
<p>To start and stop log-collection, and to collect log-status, use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#cli:cbcli/couchbase-cli-collect-logs-start.adoc" class="xref unresolved">collect-logs-start</a></p>
</li>
<li>
<p><a href="#cli:cbcli/couchbase-cli-collect-logs-stop.adoc" class="xref unresolved">collect-logs-stop</a></p>
</li>
<li>
<p><a href="#cli:cbcli/couchbase-cli-collect-logs-status.adoc" class="xref unresolved">collect-logs-status</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="collecting-logs-using-rest"><a class="anchor" href="#collecting-logs-using-rest"></a>Collecting Logs Using the REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Logging REST API provides the endpoints for retrieving log and diagnostic information.</p>
</div>
<div class="paragraph">
<p>To retrieve log information use the <code>/diag</code> and <code>/sasl_logs</code>
<a href="../../rest-api/logs-rest-api.html" class="xref page">REST endpoints</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adjust-threshold-slow-op-logging"><a class="anchor" href="#adjust-threshold-slow-op-logging"></a>Adjusting Threshold for Logging Slow Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to examine and/or alter the logging threshold for slow-running operations.
This is done using the <code>mcctl</code> command that comes packaged with the Couchbase server installation.
The command only gets or sets information for the node it&#8217;s run on.</p>
</div>
<div class="sect2">
<h3 id="getting-threshold-details"><a class="anchor" href="#getting-threshold-details"></a>Getting Threshold Details</h3>
<div class="paragraph">
<p>The current settings are retrieved by using the <code>mcctl</code> cli to execute the <code>get sla</code> command:</p>
</div>
<div class="listingblock">
<div class="title">Getting threshold details</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/mcctl --host localhost -u Administrator -P password \
get sla</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"comment":"Current MCBP SLA configuration",
"version":1,
"default":{"slow":"500 ms"}},
"COMPACT_DB":{"slow":"1800 s"},
"DELETE_BUCKET":{"slow":"10 s"},
"SEQNO_PERSISTENCE":{"slow":"30 s"}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JSON message returned gives details of the operation being logged and the threshold time that will cause a timing message to be logged.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-threshold"><a class="anchor" href="#setting-the-threshold"></a>Setting the Threshold</h3>
<div class="paragraph">
<p>The <code>mcctl</code> command line interface is also used to set the thresholds for the memcahe operations:</p>
</div>
<div class="listingblock">
<div class="title">Set logging threshold example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/mcctl --host localhost -u Administrator -P password \
set sla '{"version":1, "DELETE_BUCKET":{"slow":"100 ms"}}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the threshold for the <code>DELETE_BUCKET</code> operation is being set to 100ms. If a bucket deletion operation takes longer than this, then an message will be logged.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As an added minor convenience, the time interval can also be specified without a space:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/mcctl --host localhost -u Administrator -P password \
set sla '{"version":1, "DELETE_BUCKET":{"slow":"<mark>100ms</mark>"}}'</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is also possible to set the threshold for all the op-codes in a single command by using the <code>default</code> code:</p>
</div>
<div class="listingblock">
<div class="title">Set all thresholds to 100 ms.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/mcctl --host localhost -u Administrator -P password \
set sla '{"version":1, "default":{"slow":"100 ms"}}'</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Time units in threshold settings</div>
<div class="paragraph">
<p>A number of different time units can be used when setting the thresholds:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<strong>ns</strong>
</td>
<td class="hdlist2">
<p>nanoseconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>us</strong>
</td>
<td class="hdlist2">
<p>microseconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>ms</strong>
</td>
<td class="hdlist2">
<p>milliseconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>s</strong>
</td>
<td class="hdlist2">
<p>seconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>m</strong>
</td>
<td class="hdlist2">
<p>minutes</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>h</strong>
</td>
<td class="hdlist2">
<p>hours</p>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Setting the <code>DELETE_BUCKET</code> threshold to 1 minute.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">/opt/couchbase/bin/mcctl --host localhost -u Administrator -P password \
set sla '{"version":1, "DELETE_BUCKET":{"slow":"1 m"}}'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Setting the threshold values is non-persistent: when the node is restarted, the thresholds are reset to their default values.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-threshold-defaults"><a class="anchor" href="#setting-threshold-defaults"></a>Setting Threshold Defaults</h3>
<div class="paragraph">
<p>The default values are loaded from the file: <code>/opt/couchbase/etc/couchbase/kv/opcode-attributes.json</code> when the node is started.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "comment": "Default configuration file. Do not edit, but override the settings in opcode-attributes.d/",
  "version": 1,
  "default": {
    "slow": "500 ms"
  },
  "compact_db": {
    "slow": "30 m"
  },
  "create_bucket": {
    "slow": "70 ms"
  },
  "select_bucket": {
    "slow": "10 ms"
  },
  "delete_bucket": {
    "slow": "10 s"
  },
  "seqno_persistence": {
    "slow": "30 s"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These values can be overriden by creating another file in the <code>/opt/couchbase/etc/couchbase/kv/opcode-attributes.d</code> directory.
The easiest way to do this is to copy the existing settings file into the directory, making sure that there isn&#8217;t an existing file in the directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /opt/couchbase/etc/couchbase/kv/

cp opcode-attributes.json opcode-attributes.d</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit <code>/opt/couchbase/etc/couchbase/kv/opcode-attributes.d/opcode-attributes.json</code> with the new settings.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These settings only apply to the node where the changes are made.
To change the threshold across the cluster, then all the configurations must be applied to each node.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
