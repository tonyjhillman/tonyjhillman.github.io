<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Server Group Awareness | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Individual server-nodes can be assigned to specific &lt;em&gt;groups&lt;/em&gt;, within a Couchbase Cluster.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/learn/clusters-and-availability/groups.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/learn/pages/clusters-and-availability/groups.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Learn</li>
<li class="crumb"><a href="clusters-and-availability.html">Clusters and Availability</a></li>
<li class="crumb"><a href="replication-architecture.html">Availability</a></li>
<li class="crumb"><a href="groups.html">Server Group Awareness</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Server Group Awareness</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Individual server-nodes can be assigned to specific <em>groups</em>, within a Couchbase Cluster.
This allows both  <em>active vBuckets</em> and GSI <em>indexes</em> to be maintained on groups different from those of their corresponding <em>replica vBuckets</em> and <em>index replicas</em>; so that if a group goes offline, and active vBuckets and indexes are thereby lost, replicas remain available on one or more other groups.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding-server-group-awareness"><a class="anchor" href="#understanding-server-group-awareness"></a>Understanding Server Group Awareness</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Server Group Awareness</em> provides enhanced availability.
Specifically, it protects a cluster from large-scale infrastructure failure, through the definition of <em>groups</em>.
Each group is created by an appropriately authorized administrator, and specified to contain a subset of the nodes within a Couchbase Cluster.
Following group-definition and rebalance, the active vBuckets for any defined bucket are located on one group, while the corresponding replicas are located on another group: indexes and <em>index replicas</em>, maintained by the Index Service, are distributed across groups in a similar way.</p>
</div>
<div class="paragraph">
<p>A server group can be automatically <em>failed over</em>: thus, if the entire group goes offline, and active vBuckets and indexes are thereby inaccessible, the replica vBuckets and replica indexes that remain available on another group can be automatically promoted to active status.
In 7.1+, this is achieved by setting the maximum count for auto-failover to a value equal to or greater than the number of nodes in the server group.
See <a href="automatic-failover.html" class="xref page">Automatic Failover</a>.</p>
</div>
<div class="paragraph">
<p>Groups should be defined in accordance with the physical distribution of cluster-nodes.
For example, a group should only include the nodes that are in a single <em>server rack</em>, or in the case of cloud deployments, a single <em>availability zone</em>.
Thus, if the server rack or availability zone becomes unavailable due to a power or network failure, all the nodes in the group can be automatically failed over, to allow continued access to the affected data.</p>
</div>
<div class="paragraph">
<p>Note the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Server Group Awareness is only available in Couchbase Server Enterprise Edition.</p>
</li>
<li>
<p>Server Group Awareness only applies to the Data and Index Services.</p>
</li>
<li>
<p>When a new Couchbase Server cluster is initialized, and no server groups are explicitly defined, the first node, and all subsequently added nodes, are automatically placed in a server group named Group 1.
Once additional server groups are created, a destination server group must be specified for every node that is subsequently added to the cluster.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For information on failover, see
<a href="../../manage/manage-nodes/fail-nodes-over.html" class="xref page">Failover and Rebalance</a>.
For information on vBuckets, see <a href="../buckets-memory-and-storage/buckets.html" class="xref page">Buckets</a>.
For information on the standard (non-Group-based) distribution of replica vBuckets across a cluster, see <a href="replication-architecture.html" class="xref page">Availability</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="server-groups-and-vbuckets"><a class="anchor" href="#server-groups-and-vbuckets"></a>Server Groups and vBuckets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The distribution of vBuckets across groups is exemplified below.
In each illustration, all servers are assumed to be running the Data Service.</p>
</div>
<div class="sect2">
<h3 id="vbucket-distribution-across-equal-groups"><a class="anchor" href="#vbucket-distribution-across-equal-groups"></a>Equal Groups</h3>
<div class="paragraph">
<p>The following illustration shows how vBuckets are distributed across two groups; each group containing four of its cluster&#8217;s eight nodes.</p>
</div>
<div id="groups_two_equal" class="imageblock text-left">
<div class="content">
<img src="../_images/clusters-and-availability/groups-two-equal.png" alt="groups two equal" width="720">
</div>
</div>
<div class="paragraph">
<p>Note that Group 2 contains all the replica vBuckets that correspond to active vBuckets on Group 1; while conversely, Group 1 contains all the replica vBuckets that correspond to active vBuckets on Group 2.</p>
</div>
</div>
<div class="sect2">
<h3 id="vbucket-distribution-across-unequal-groups"><a class="anchor" href="#vbucket-distribution-across-unequal-groups"></a>Unequal Groups</h3>
<div class="paragraph">
<p>A number of constraints come into play when allocating active and replica vBuckets across server groups:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<strong>rack-zone</strong>
</td>
<td class="hdlist2">
<p>all replicas of a given vBucket must reside in separate server groups.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>active balance</strong>
</td>
<td class="hdlist2">
<p>there should be approximately the same number of active vBuckets on each node in the cluster.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>replica balance</strong>
</td>
<td class="hdlist2">
<p>there should be approximately the same number of replica vBuckets on each node in the cluster.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Not all the constraints can be satisfied when the buckets are allocated across uneven groups.
In this scenario, the <code>active balance</code> and <code>rack-zone</code> constraints will take priority:
when the vBucket map is generated, we will ensure that there are approximately the same number of active vBuckets on each cluster and that replicas of a given vBucket must reside in separate groups.</p>
</div>
<div class="paragraph">
<p>The following illustration shows how vBuckets are distributed across two groups: Group 1 contains four nodes, while Group 2 contains five.</p>
</div>
<div id="groups_two_unequal" class="imageblock text-left">
<div class="content">
<img src="../_images/clusters-and-availability/groups-two-unequal-rack-zone-constraint.png" alt="groups two unequal rack zone constraint" width="720">
</div>
</div>
<div class="paragraph">
<p>Group 1 contains all the replica vBuckets that correspond to active vBuckets in Group 2.</p>
</div>
<div class="paragraph">
<p>Group 2 contains all the replica vBuckets that correspond to active vBuckets in Group 1.</p>
</div>
<div class="paragraph">
<p>However, in order to ensure that replicas of a VBucket must reside in a separate group, then we may have a situation where there are vBuckets from Server 9 replicated to Group 1, but there are no additional vBuckets in Group 1 to provide balance in Group 2.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Smaller server groups will carry more replica vBuckets, which means there is greater memory pressure on memcached so more fetches go to disk which means higher worst case GET latencies.</p>
</div>
<div class="paragraph">
<p>Additionally, more replicas mean more writes to disk and a greater compaction burden which will also affect latencies.</p>
</div>
<div class="paragraph">
<p>Customers will notice this as the smaller server groups will "perform" worse than the later server groups.
So for reasons of consistency of performance Couchbase strongly recommends that customers endeavor to maintain an equal number of nodes across server groups.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information on optimizing your cluster configuration, consult the <a href="../../install/sizing-general.html" class="xref page">Sizing Guidelines</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">IMPORTANT - Change in behavior from previous versions</div>
<div class="paragraph">
<p>If you have fewer server groups than the total number of data copies (where \(data\:copies = 1 + number\:of\:replicas\)), then the number of copies placed will be restricted to match the number of server groups.
Essentially, you may not get the number of replicas the cluster has been configured for if you have fewer server groups.</p>
</div>
<div class="exampleblock">
<div class="title">Example:</div>
<div class="content">
<div class="paragraph">
<p>If you have 2 server groups, and set <code>replicas = 2</code>, you will only have one replica for each vBucket.</p>
</div>
<div class="paragraph">
<p>But if you have 3 server groups you will have 2 replicas for each vBucket.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>This behavior is a change from pre-7.1 behavior where we did not reduce the number of data copies to match the number of server groups.</strong></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="node-failover-across-groups"><a class="anchor" href="#node-failover-across-groups"></a>Node-Failover Across Groups</h3>
<div class="paragraph">
<p>When an individual node within a group goes offline, rebalance provides a <em>best effort</em> redistribution of replica vBuckets.
This keeps all data available, but results in some data being no longer protected by the Groups mechanism.
This is shown by the following illustration, in which Server 2, in Group 1, has gone offline, and a rebalance and failover have occurred.</p>
</div>
<div id="groups_two_failover_one_node" class="imageblock text-left">
<div class="content">
<img src="../_images/clusters-and-availability/groups-two-failover-one-node.png" alt="groups two failover one node" width="720">
</div>
</div>
<div class="paragraph">
<p>With the active vBuckets on Server 2 no longer accessible, the replica vBuckets for Server 2 have been promoted to active status, on the servers of Group 2.
The data originally active on Server 2 is thereby kept available.
Note, however, that if Group 2 were now to go offline, the data originally active on Server 2 would be lost, since it now exists only on Group 2 servers.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="server-groups-and-indexes"><a class="anchor" href="#server-groups-and-indexes"></a>Server Groups and Indexes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Indexes and index replicas can only be located on nodes that run the Index Service.</p>
</div>
<div class="paragraph">
<p>As described in <a href="#learn:services-and-indexes/indexes/index-replication.adoc#index-replication" class="xref unresolved">Index Replication</a>, the Index Service allows index replicas to be defined in either of two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By establishing the number of replicas required, for a given index, without the actual node-locations of the replicas being specified.
This is itself accomplished in either of the following ways:</p>
<div class="ulist">
<ul>
<li>
<p>By providing, as the argument to the <code>WITH</code> clause, the <code>num_replica</code> key, with an accompanying integer that is the desired number of replicas.</p>
</li>
<li>
<p>By specifying the number of index-replicas to be created by the Index Service whenever <code>CREATE INDEX</code> is invoked.</p>
</li>
</ul>
</div>
</li>
<li>
<p>By establishing the number of replicas required, for a given index, with the actual node-locations for the index itself and each of its replicas being specified.
This is accomplished by providing, as the argument to the <code>WITH</code> clause, an array of nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of these different forms of replica-definition are provided in <a href="#learn:services-and-indexes/indexes/index-replication.adoc#index-replication" class="xref unresolved">Index Replication</a>.</p>
</div>
<div class="paragraph">
<p>If the node-locations for index and replicas <em>are</em> specified, by means of the <code>WITH</code> clause and node-array, this user-defined topology is duly followed in the locating of index and replicas across the cluster, and any server groups that may have been defined.
In this case, it is the administrator&#8217;s responsibility to ensure that optimal index-availability has been achieved, so as to handle possible instances of node or group failure.</p>
</div>
<div class="paragraph">
<p>If the node-locations for index and replicas are <em>not</em> specified, the node-locations are automatically provided by Couchbase Server, based on its own estimates of how to provide the highest index-availability.
Such distributions are exemplified as follows.</p>
</div>
<div class="sect2">
<h3 id="optimal-distribution"><a class="anchor" href="#optimal-distribution"></a>Optimal Distribution</h3>
<div class="paragraph">
<p>When the number of index replicas created for a given index is at least one less than the total number of groups for the cluster, and each group contains sufficient nodes running the Index Server, automatic distribution ensures that each index and index replica resides on its own group.
(Indexes and index replicas always exist each on their own Index Server node, with index-creation failing if there is an insufficiency of such nodes to accommodate the specified number of index replicas &#8212; see <a href="#learn:services-and-indexes/indexes/index-replication.adoc#index-replication" class="xref unresolved">Index Replication</a>.)</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/clusters-and-availability/groups-indexes-two-equal.png" alt="groups indexes two equal" width="720">
</div>
</div>
<div class="paragraph">
<p>Here, two groups have been defined.
Each group contains one Index Server node.
Two indexes have been defined, each with one index replica.
Therefore, automatic distribution has assigned both indexes to the Index Server node in group 1, and both index replicas to the Index Server node in group 2.
This ensures that, should either group become inaccessible, the surviving group continues to bear an instance of the Index Server, with both indexes thus available.</p>
</div>
<div class="paragraph">
<p>Note that an alternative outcome to the automatic distribution would have been for each index to be assigned to a different group, and each index replica to be assigned to the group on which its corresponding index did <em>not</em> reside.</p>
</div>
</div>
<div class="sect2">
<h3 id="best-effort-distribution"><a class="anchor" href="#best-effort-distribution"></a>Best-Effort Distribution</h3>
<div class="paragraph">
<p>When the number of index replicas created for a given index is not at least one less than the total number of groups for the cluster, but the cluster bears enough Index Server nodes to accommodate all defined indexes and index replicas, automatic distribution produces an outcome based on <em>best effort</em>.
For example:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/clusters-and-availability/groups-indexes-three-unequal-1.png" alt="groups indexes three unequal 1" width="720">
</div>
</div>
<div class="paragraph">
<p>Here, again, two groups have been defined.
Each group now contains two Index Server nodes.
Two indexes have been defined: one with two index replicas, the other with one.
Automatic distribution has assigned each index to its own node in Group 1; and has assigned, for each index, a corresponding index replica to its own node in Group 2.
However, since one index has <em>two</em> replicas defined, the second of these has been assigned to the second Index Server node in Group 1.
Consequently, an index and one of its replicas have both been assigned to the same group; and will both be lost, in the event of that group becoming inaccessible.</p>
</div>
<div class="paragraph">
<p>Note that an alternative outcome to the automatic distribution would have been for the second index replica to be assigned to Server 8, in Group 2.
Consequently, both the index replicas of one index would be assigned to the same group; and both would be lost, in the event of that group becoming inaccessible.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-multiple-groups"><a class="anchor" href="#adding-multiple-groups"></a>Adding Multiple Groups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When multiple groups are to be added to a cluster simultaneously, the additions should all be executed on a <em>single node</em> of the cluster: this simplifies the reconfiguration process, and so protects against error.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="group-failover-and-service-availability"><a class="anchor" href="#group-failover-and-service-availability"></a>Group Failover and Service Availability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When groups are defined to correspond to racks or availability zones, all services required for data access &#8212; such as the Index Service and the Search Service &#8212; should be deployed so as to ensure their own continued availability, during the outage of a rack or zone.</p>
</div>
<div class="paragraph">
<p>For example, given a cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Whose Data Service deployment supports two Server Groups, each corresponding to one of two racks</p>
</li>
<li>
<p>Whose data must be continuously accessed by the Index and Search Services</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At a minimum, one instance of the Index Service and one instance of the Search Service should be deployed on each rack.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-groups-and-enabling-group-failover"><a class="anchor" href="#defining-groups-and-enabling-group-failover"></a>Defining Groups and Enabling Failover of All a Group&#8217;s Nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To define and manage groups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With Couchbase Web Console, see <a href="../../manage/manage-groups/manage-groups.html" class="xref page">Manage Groups</a>.</p>
</li>
<li>
<p>With CLI, see <a href="#cli:cbcli/couchbase-cli-group-manage.adoc" class="xref unresolved">group-manage</a>.</p>
</li>
<li>
<p>With the REST API, see <a href="../../rest-api/rest-rza.html" class="xref page">Server Groups API</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable the failover of all nodes in a group:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With Couchbase Web Console, see the information provided for the <strong>General</strong> settings panel, in <a href="../../manage/manage-settings/general-settings.html#node-availability" class="xref page">Node Availability</a>.</p>
</li>
<li>
<p>With CLI, see <a href="#cli:cbcli/couchbase-cli-setting-autofailover.adoc" class="xref unresolved">setting-autofailover</a>.</p>
</li>
<li>
<p>With the REST API, see <a href="../../rest-api/rest-cluster-autofailover-enable.html" class="xref page">Enabling and Disabling Auto-Failover</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that in 7.1+, <em>automatic failover</em> can fail over more than three nodes concurrently: this has permitted the removal of pre-7.1 interfaces that were specific to triggering <em>auto-failover for server groups</em>.
Consequently, in order to ensure successful auto-failover of a server group, the maximum count for auto-failover must be established by the administrator as a value equal to or greater than the number of nodes in the server group.</p>
</div>
<div class="paragraph">
<p>Note that the pre-7.1 interfaces for triggering auto-failover for server groups have been <em>removed</em> from 7.1: therefore, programs that attempt to use the pre-7.1 interfaces with 7.1+ will <em>fail</em>.</p>
</div>
<div class="paragraph">
<p>See <a href="automatic-failover.html" class="xref page">Automatic Failover</a>.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: { inlineMath: [["\\(", "\\)"]], displayMath: [["\\[", "\\]"]], ignoreClass: "nostem|nolatexmath" },
  asciimath2jax: { delimiters: [["\\$", "\\$"]], ignoreClass: "nostem|noasciimath" },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
