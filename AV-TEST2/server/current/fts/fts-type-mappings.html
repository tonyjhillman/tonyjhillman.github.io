<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Specifying Type Mappings | Couchbase Docs</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/fts/fts-type-mappings.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/fts/pages/fts-type-mappings.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb"><a href="fts-introduction.html">Search</a></li>
<li class="crumb"><a href="fts-creating-indexes.html">Create Search Indexes</a></li>
<li class="crumb"><a href="fts-configure-index-options.html">Configure Index Options</a></li>
<li class="crumb"><a href="fts-type-mappings.html">Type Mappings</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Specifying Type Mappings</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Whereas a <em>type identifier</em> tells the index how to determine the position in each document of the characters that specify the document&#8217;s type, a <em>type mapping</em> specifies the characters themselves.
</blockquote>
</div>
<div class="paragraph">
<p>If <strong>Doc ID up to separator</strong> is used as a type identifier, and the underscore is specified as the separator-character, a type mapping of <em>hotel</em> ensures that <code>hotel_10123</code>, rather than <code>airline_10</code>, is indexed.</p>
</div>
<div class="paragraph">
<p>When the <strong class="ui">Add Index</strong>, <strong class="ui">Edit Index</strong>, or <strong class="ui">Clone Index</strong> screen is accessed, the <strong class="ui">Type Mappings</strong> panel can be opened.</p>
</div>
<div class="paragraph">
<p>The default setting is displayed:</p>
</div>
<div id="fts_type_mappings_ui_closed" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-closed.png" alt="fts type mappings ui closed" width="750">
</div>
</div>
<div class="paragraph">
<p>Left-click on the <strong>+ Add Type Mapping</strong> button.
The display now appears as follows:</p>
</div>
<div id="fts_type_mappings_ui_add" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-add.png" alt="fts type mappings ui add" width="750">
</div>
</div>
<div class="paragraph">
<p>The display indicates that a single type mapping is currently defined, which is <code>default</code>.</p>
</div>
<div class="paragraph">
<p>This is a special type mapping created by every index automatically: it is applied to each document whose type <em>either</em> does not match a user-specified type mapping, <em>or</em> has no recognized type attribute.
Therefore, if the default mapping is left enabled, all documents are included in the index, regardless of whether the user actively specifies type mappings.</p>
</div>
<div class="paragraph">
<p>To ensure that only documents corresponding to the user&#8217;s specified type mappings are included in the index, the default type mapping must be disabled (see below for an example).</p>
</div>
<div class="paragraph">
<p>Each type mapping is listed as either <strong>dynamic</strong>, meaning that all fields are considered available for indexing, or <strong>only index specified fields</strong>, meaning that only fields specified by the user are indexed.</p>
</div>
<div class="paragraph">
<p>Therefore, specifying the default index with dynamic mapping creates a large index whose response times may be relatively slow; and is, as such, an option potentially unsuitable for the most production deployments.</p>
</div>
<div class="paragraph">
<p>For information on how values are data-typed when dynamic mapping is specified, see the section below, <a href="#document-fields-and-data-types">Document Fields and Data Types</a>.</p>
</div>
<div class="paragraph">
<p>To specify a type mapping, type an appropriate string (for example, <code>hotel</code>) into the interactive text field.
Note the <strong class="ui">only index specified fields</strong> checkbox: if this is checked, only user-specified fields from the document are included in the index.
(For an example, see <a href="fts-type-mapping-specifying-fields.html" class="xref page">Specifying Fields</a>, below.)</p>
</div>
<div class="paragraph">
<p>Optionally, an <em>analyzer</em> can be specified for the type mapping: for all queries that do indeed support the use of an analyzer, the specified analyzer will be applied, rather than the default analyzer (which is itself specified in the <strong>Advanced</strong> pane, as described below, in <a href="fts-creating-index-specifying-advanced-settings.html" class="xref page">Specifying Advanced Settings</a>).</p>
</div>
<div class="paragraph">
<p>A list of available analyzers can be accessed and selected from, by means of the pull-down menu to the right of the interactive text-field:</p>
</div>
<div id="fts_type_mappings_ui_analyzers_menu" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-analyzers-menu.png" alt="fts type mappings ui analyzers menu" width="620">
</div>
</div>
<div class="paragraph">
<p>The default value, <code>inherit</code>, means that the type mapping inherits the default analyzer.
Note that custom analyzers can be created and stored for the index that is being defined using the <strong class="ui">Analyzers</strong> panel, described below in <a href="fts-index-analyzers.html#Creating-Analyzers" class="xref page">Creating Analyzers</a>.
On creation, all custom analyzers are available for association with a type mapping, and so appear in the pull-down menu shown above.</p>
</div>
<div class="paragraph">
<p>Additional information on analyzers can also be found on the page <a href="fts-index-analyzers.html#Understanding-Analyzers" class="xref page">Understanding Analyzers</a>.</p>
</div>
<div class="paragraph">
<p>The <strong class="ui">Type Mappings</strong> panel now appears as follows:</p>
</div>
<div id="fts_type_mappings_ui_addition_both_checked" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-addition-both-checked.png" alt="fts type mappings ui addition both checked" width="750">
</div>
</div>
<div class="paragraph">
<p>Note that the checkbox to the left of each of the two specified type mappings, <code>hotel</code> and <code>default</code>, is checked.</p>
</div>
<div class="paragraph">
<p>Because <code>default</code> is checked, <em>all</em> documents in the bucket (not merely those that correspond to the <code>hotel</code> type mapping) will be included in the index.
To ensure that only <code>hotel</code> documents are included, <em>uncheck</em> the checkbox for <code>default</code>.
The panel now appears as follows:</p>
</div>
<div id="fts_type_mappings_ui_addition_default_unchecked" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-addition-default-unchecked.png" alt="fts type mappings ui addition default unchecked" width="750">
</div>
</div>
<div class="paragraph">
<p>Note also that should you wish to ensure that all documents in the bucket are included in the index <em>except</em> those that correspond to the <code>hotel</code> type mapping, <em>uncheck</em> the checkbox for <code>hotel</code>, and <em>check</em> the <code>default</code> checkbox:</p>
</div>
<div id="fts_type_mappings_ui_addition_default_checked" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-addition-default-checked.png" alt="fts type mappings ui addition default checked" width="750">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specifying-type-mapping-for-collection"><a class="anchor" href="#specifying-type-mapping-for-collection"></a>Specifying Type Mapping for Collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Type Mapping will allow you to search for documents from the selected scope, selected collections from the scope, and for a specific document type from the selected scope and collections.</p>
</div>
<div class="paragraph">
<p>For using non-default scope/collections, please refer: <a href="fts-creating-index-from-UI.html#using-non-default-scope-collections" class="xref page">Using Non-Default Scope/Collections</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Left click on the <strong>+ Add Type Mapping</strong> button. The display now appears as follows:</p>
</li>
</ul>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mapping-for-collection.png" alt="fts type mapping for collection" width="700">
</div>
</div>
<div class="paragraph">
<p>In the Type Mappings, you can add mapping of a <strong>single collection</strong> or <strong>multiple collections</strong>. To specify the collection, click the Collection drop-down list and select the required collection.</p>
</div>
<div class="paragraph">
<p>The <strong>Collection</strong> field displays the selected collection along with the selected scope. For example, inventory.airport or inventory.hotel.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click ok to add the collection to the index. Continue the same process to add other collections to the index.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In Type Mappings, you can add multiple collections to the index. However, you can either select only one collection to create a single collection index or select multiple collections to create an index with multiple collections.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Type Mappings panel appears as follows:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-mapping-with-single-collection"><a class="anchor" href="#type-mapping-with-single-collection"></a>Type Mapping with Single Collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With a single collection index, you can search documents only from a single collection specified in the Type Mappings.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-single-collection.png" alt="fts type mappings single collection" width="750">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-mapping-with-multiple-collections"><a class="anchor" href="#type-mapping-with-multiple-collections"></a>Type Mapping with Multiple Collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With multiple collections index, you can search documents across multiple collections (within a single scope) specified in the Type Mappings.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-multiple-collections.png" alt="fts type mappings multiple collections" width="750">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-mapping-with-specific-document-type"><a class="anchor" href="#type-mapping-with-specific-document-type"></a>Type Mapping with Specific Document Type</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With a specific document type, you can search documents of a specific type from a single collection or multiple collections. Every document in Couchbase includes the type field that represents the type of the document. For example, the type “airport” represents the documents related to airport information.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/fts-type-mapping-with-specific-document-type.png" alt="fts type mapping with specific document type"></span></p>
</div>
<div class="paragraph">
<p>If you want to search for a specific document type from a single collection or multiple collections, you can manually specify the document type after the collection in the Collection field. For example, inventory.airline.airport or inventory.route.airport.</p>
</div>
<div class="paragraph">
<p>Now, when you search for the airport document type, the index will display all documents from a single collection or multiple collections where the type field is the airport.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/fts-display-type-field.png" alt="fts display type field" width="750"></span></p>
</div>
<div class="paragraph">
<p>You can click the document link and verify the document type.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-type-with-single-collections"><a class="anchor" href="#document-type-with-single-collections"></a>Document Type with single collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every document in Couchbase includes the type field that represents the type of the document. For example, type “airport” represents the documents related to airport information.</p>
</div>
<div class="paragraph">
<p>If you want to search for a specific document type from a single collection, you can manually specify the document type after the collection in the Collection field.</p>
</div>
<div class="paragraph">
<p>For example, inventory.airline.airport or inventory.route.airport</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/fts-type-mapping-specific-document-type-single-collection.png" alt="fts type mapping specific document type single collection" width="750"></span></p>
</div>
<div class="paragraph">
<p>Now, when you search for the airport document type, the index will display all documents from a single collection where the type field is airport.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-type-with-multiple-collections"><a class="anchor" href="#document-type-with-multiple-collections"></a>Document Type with multiple collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every document in Couchbase includes the type field that represents the type of the document. For example, type “airport” represents the documents related to airport information.</p>
</div>
<div class="paragraph">
<p>If you want to search for a specific document type from the multiple collections, you can manually specify the document type after the collection in the Collection field.</p>
</div>
<div class="paragraph">
<p>For example, inventory.airline.airport or inventory.route.airport</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/fts-type-mapping-specific-document-type-multiple-collections.png" alt="fts type mapping specific document type multiple collections" width="750"></span></p>
</div>
<div class="paragraph">
<p>Now, when you search for the airport document type, the index will display all documents from the multiple collections where the type field is airport.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-fields-and-data-types"><a class="anchor" href="#document-fields-and-data-types"></a>Document-Fields and Data-Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During index creation, for each document-field for which the data-type has not been explicitly specified (which is to say, <strong>text</strong>, <strong>number</strong>, <strong>datetime</strong>, <strong>boolean</strong>, <strong>disabled</strong>, <strong>geopoint</strong>, or <strong>geoshape</strong>), the field-value is examined, and the best-possible determination made, as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type of JSON value</th>
<th class="tableblock halign-left valign-top">Indexed as...</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing a date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String (not containing a date)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geopoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <a href="fts-supported-queries-geopoint-spatial.html#recognizing_target_data" class="xref page">legacy lat/lon pair</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geoshape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <a href="fts-supported-queries-geojson-spatial.html#supported-geojson-data-types" class="xref page">GeoJSON shape</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The indexer attempts to parse String date-values as dates, and indexes them as such if the operation succeeds. However, on query-execution, Full Text Search expects dates to be in the format specified by <a href="https://www.ietf.org/rfc/rfc3339.txt" target="_blank" rel="noopener">RFC-3339</a>, which is a specific profile of ISO-8601.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The String values such as <code>7</code> or <code>true</code> remains as Strings and did not index as numbers or Booleans respectively.</p>
</div>
<div class="paragraph">
<p>The number-type is modeled as a 64-bit floating-point value internally.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exclude-fields-from-dynamic-fts-index"><a class="anchor" href="#exclude-fields-from-dynamic-fts-index"></a>Excluding child field/ child mapping from a dynamic FTS index</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to index everything except a child field or a child mapping, you add that child mapping and child field and turn off the child mapping and the <strong>Index</strong> option, respectively.</p>
</div>
<div class="paragraph">
<p>Perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the index, add a type mapping and set it to dynamic.</p>
</li>
<li>
<p>In the type mapping, add a child field.</p>
</li>
<li>
<p>For the fields, uncheck the <strong>Index</strong> option from its settings.</p>
</li>
<li>
<p>For the mapping, uncheck the corresponding dynamic type mapping check box to disable it.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specifying-fields-for-type-mapping"><a class="anchor" href="#specifying-fields-for-type-mapping"></a>Specifying fields for Type Mapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Full Text Index can be defined not only to include (or exclude) documents of a certain type but also to include (or exclude) specified fields within each of the typed documents.</p>
</div>
<div class="paragraph">
<p>To specify one or more fields, hover with the mouse cursor over a row in the Type Mappings panel that contains an enabled type mapping. Buttons labeled <strong>edit</strong> and <strong>+</strong> appear:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-fields-buttons.png" alt="fts type mappings ui fields buttons" width="700">
</div>
</div>
<div class="paragraph">
<p>Left-clicking on the <strong>edit</strong> button displays the following interface:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-edit.png" alt="fts type mappings ui edit" width="700">
</div>
</div>
<div class="paragraph">
<p>This allows the mapping to be deleted or associated with a different analyzer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
FTS Indexing does not work for fields having a dot (. or period) in the field name. Users must avoid adding dot (. or period) in the field name. Like using <code>field.name</code> or <code>country.name</code> is not supported. For example, <code>{ "database.name": "couchbase"}</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the <strong>only index specified fields</strong> checkbox is checked, only fields specified by the user are included in the index.</p>
</div>
<div class="paragraph">
<p>Left-clicking on the <strong>+</strong> button displays a pop-up that features two options:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-field-options.png" alt="fts type mappings ui field options" width="700">
</div>
</div>
<div class="paragraph">
<p>These options are described in the following sections.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="fts-type-mappings-add-child-mappings.html" class="xref page">Add Child Mapping</a></p>
</li>
<li>
<p><a href="fts-type-mappings-add-child-field.html" class="xref page">Add Child Field</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inserting-a-child-mapping"><a class="anchor" href="#inserting-a-child-mapping"></a>Add Child Mapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The option <strong class="ui">insert child mapping</strong> specifies a document-field whose value is a JSON object.
Selecting this option displays the following:</p>
</div>
<div id="fts_type_mappings_child_mapping_dialog" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-mapping-dialog.png" alt="fts type mappings child mapping dialog" width="700">
</div>
</div>
<div class="paragraph">
<p>The following interactive field and checkbox are displayed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong class="ui">{}</strong>: The name of a field whose value is a JSON object.
Note that an analyzer for the field is specified by means of the pull-down menu.</p>
</li>
<li>
<p><strong class="ui">only index specified fields</strong>: When checked, only fields explicitly specified are added to the index.
Note that the JSON object specified as the value for <strong class="ui">{}</strong> has multiple fields of its own.
Checking this box ensures that all or a subset of these can be selected for indexing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When completed, this panel might look as follows (note that <code>reviews</code> is a field within the <code>hotel</code>-type documents of the <code>travel-sample</code> bucket whose value is a JSON object):</p>
</div>
<div id="fts_type_mappings_child_mapping_dialog_complete" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-mapping-dialog-complete.png" alt="fts type mappings child mapping dialog complete" width="700">
</div>
</div>
<div class="paragraph">
<p>Save by left-clicking <strong>OK</strong>.
The field is now displayed as part of the <code>hotel</code> type mapping.
Note that by hovering over the <code>reviews</code> row with the mouse, the <strong class="ui">Edit</strong> and <strong class="ui">&#43;</strong> buttons are revealed: the <strong class="ui">&#43;</strong> button is present because <code>reviews</code> is an object that contains child-fields; which can now themselves be individually indexed.
Left-click on this, and a child-field, such as <code>content</code>, can be specified:</p>
</div>
<div id="fts_type_mappings_child_mapping_add_field" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-mapping-add-field.png" alt="fts type mappings child mapping add field" width="700">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-child-field"><a class="anchor" href="#add-child-field"></a>Add Child Field</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The option <strong class="ui">insert child field</strong> allows a field to be individually included for (or excluded from) indexing, provided that it contains a single value or an array rather than a JSON object.
Selecting this option displays the following:</p>
</div>
<div id="fts_type_mappings_child_field_dialog" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-dialog.png" alt="fts type mappings child field dialog" width="700">
</div>
</div>
<div class="paragraph">
<p>The interactive fields and checkboxes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Field Name</strong></p>
</li>
<li>
<p><strong>Field Type</strong></p>
</li>
<li>
<p><strong>Field Searchable As</strong></p>
</li>
<li>
<p><strong>Analyzer</strong></p>
</li>
<li>
<p><strong>Index</strong></p>
</li>
<li>
<p><strong>Store</strong></p>
</li>
<li>
<p><strong>Include term vectors</strong></p>
</li>
<li>
<p><strong>Include in _all field</strong></p>
</li>
<li>
<p><strong>DocValues</strong></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="field-name"><a class="anchor" href="#field-name"></a>Field Name</h3>
<div class="paragraph">
<p>The name of any field within the document that contains a single value or an array, rather than a JSON object.</p>
</div>
<div class="sect3">
<h4 id="example"><a class="anchor" href="#example"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-field-name.png" alt="fts type mappings child field field name" width="750">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="field-type"><a class="anchor" href="#field-type"></a>Field Type</h3>
<div class="paragraph">
<p>The <em>data-type</em> of the value of the field.
This can be <code>text</code>, <code>number</code>, <code>datetime</code>, <code>boolean</code>, <code>disabled</code>, or <code>geopoint</code>; and can be selected from the field&#8217;s pull-down menu, as follows:</p>
</div>
<div id="fts_type_mappings_ui_select_data_type" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-ui-select-data-type.png" alt="fts type mappings ui select data type" width="750">
</div>
</div>
<div class="sect3">
<h4 id="example-2"><a class="anchor" href="#example-2"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-type.png" alt="fts type mappings child field type" width="750">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="field-searchable-as"><a class="anchor" href="#field-searchable-as"></a>Field Searchable As</h3>
<div class="paragraph">
<p>Typically identical to the <strong class="ui">field</strong> (and dynamically supplied during text-input of the <strong class="ui">field</strong>-value).
This can be modified, to indicate an alternative field-name, whose associated value thereby becomes included in the indexed content, rather than that associated with the field-name specified in <strong>field</strong>.</p>
</div>
<div class="sect3">
<h4 id="example-3"><a class="anchor" href="#example-3"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-field-searchable-as.png" alt="fts type mappings child field field searchable as" width="750">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="field-analyzer"><a class="anchor" href="#field-analyzer"></a>Field Analyzer</h3>
<div class="paragraph">
<p>An analyzer optionally to be used for the field.
The list of available analyzers can be displayed by means of the field&#8217;s pull-down menu, and can be  selected from.</p>
</div>
<div class="sect3">
<h4 id="example-4"><a class="anchor" href="#example-4"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-analysers.png" alt="fts type mappings child field analysers" width="750">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="index"><a class="anchor" href="#index"></a>Index</h3>
<div class="paragraph">
<p>When checked, the field is indexed; when unchecked, the field is not indexed.
This may be used, therefore, to explicitly remove an already-defined field from the index.</p>
</div>
<div class="sect3">
<h4 id="example-5"><a class="anchor" href="#example-5"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-index.png" alt="fts type mappings child field index" width="750">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When this checkbox is checked, the resulting index will proportionately increase in size.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="store"><a class="anchor" href="#store"></a>Store</h3>
<div class="paragraph">
<p>When the child field <code>store</code> option is checked, the original field content is included in the FTS index, enabling the retrieval of stored field values during a search operation.</p>
</div>
<div class="paragraph">
<p>When unchecked, the original field content is not included in the FTS index. Storing the field within the index is necessary to support highlighting, which also needs "term vectors” for the field to be indexed.</p>
</div>
<div class="sect3">
<h4 id="example-6"><a class="anchor" href="#example-6"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-store.png" alt="fts type mappings child field store" width="700">
</div>
</div>
<div class="paragraph">
<p>Ideally, enabling this <code>Child Field Store</code> option has a sizing aspect to the index definition. This option also permits highlighting of search texts in the returned results, so that matched expressions can be easily seen. However, enabling this option also results in larger indexes and slightly longer indexing times.
The field content will show up in queries (when the index has the store option checked) only when requested. There is a ‘fields’ section in the query for it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
"query": {...},
"fields": ["store_field_name"]
}
Setting "fields" to ["*"] will include the contents of all stored fields in the index.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
"store" - writes a copy of the field content into the index. When this checkbox is checked, the resulting index will proportionately increase in size.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="include-term-vectors"><a class="anchor" href="#include-term-vectors"></a>Include term vectors</h3>
<div class="paragraph">
<p>When checked, term vectors are included.
When unchecked, term vectors are not included.</p>
</div>
<div class="paragraph">
<p>Term vectors are the locations of terms in a particular field.
Certain kinds of functionality (such as highlighting, and phrase search) require term vectors.
Inclusion of term vectors results in larger indexes and correspondingly slower index build-times.</p>
</div>
<div class="sect3">
<h4 id="example-7"><a class="anchor" href="#example-7"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-termvectors.png" alt="fts type mappings child field termvectors" width="750">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
"include term vectors" indexes the array positions (locations) of the terms within the field (needed for phrase searching and highlighting). When this checkbox is checked, the resulting index will proportionately increase in size.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="include-in_all-field"><a class="anchor" href="#include-in_all-field"></a>Include in_all field:</h3>
<div class="paragraph">
<p>When checked, the field is included in the definition of <strong class="ui">_all</strong>, which is the field specified by default in the <strong class="ui">Advanced</strong> panel.
When unchecked, the field is not included.</p>
</div>
<div class="paragraph">
<p>Inclusion means when <em>query strings</em> are used to specify searches, the text in the current field is searchable without the field name requiring a prefix.
For Example, a search on description:modern can be accomplished simply by specifying the word ‘modern’. This is applicable for all query types and not just limited to query string query type.</p>
</div>
<div class="sect3">
<h4 id="example-8"><a class="anchor" href="#example-8"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-include-in-all.png" alt="fts type mappings child field include in all" width="750">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
"include in _all" will write a copy of the tokens generated for a particular field to the "_all" composite field. When this checkbox is checked, the resulting index will proportionately increase in size.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Enabling this option results in larger indexes, so disable this option to always use field scoped queries in the search requests.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docvalues"><a class="anchor" href="#docvalues"></a>DocValues</h3>
<div class="paragraph">
<p>To include the value for each instance of the field in the index, the docvalues checkbox must be checked. This is essential for <a href="fts-search-response-facets.html" class="xref page">Facets</a>.</p>
</div>
<div class="paragraph">
<p>For sorting of search results based on field values: see <a href="fts-sorting.html" class="xref page">Sorting Query Results</a>.</p>
</div>
<div class="paragraph">
<p>By default, this checkbox is selected. If it is <em>unchecked</em>, the values are <em>not</em> added to the index; and in consequence, neither Search Facets nor value-based result-sorting is supported.</p>
</div>
<div class="sect3">
<h4 id="example-9"><a class="anchor" href="#example-9"></a>Example</h4>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-docvalues.png" alt="fts type mappings child field docvalues" width="750">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When this checkbox is checked, the resulting index will increase proportionately in size.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The dialog, when completed, might look as follows:</p>
</div>
<div id="fts_type-mappings_child_field_dialog_complete" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-dialog-complete.png" alt="fts type mappings child field dialog complete" width="700">
</div>
</div>
<div class="paragraph">
<p>Left-click on <strong class="ui">OK</strong>.
The field is saved, and its principal attributes displayed on a new row:</p>
</div>
<div id="fts_type-mappings_child_field_saved" class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mappings-child-field-saved.png" alt="fts type mappings child field saved" width="700">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you hover the mouse over this row, an <strong>Edit</strong> button appears, where you can make updates to the definition.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="docid-with-regexp-in-type-mappings"><a class="anchor" href="#docid-with-regexp-in-type-mappings"></a>DocID with regexp in Type Mappings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>“Doc ID with regexp” is another way the search service allows the user to extract “type identifiers” for indexing.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set up a valid regular expression within docid_regexp. Remember this will be applied on the document IDs.</p>
</li>
<li>
<p>Choose a type mapping name that is considered a match for the regexp.</p>
</li>
<li>
<p>The type mapping name CANNOT be a regexp.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, while working with the <code>travel-sample</code> bucket,  set up docid_regexp to <code>air[a-z]{4}</code> and use the following type mappings.
* airline
* airport</p>
</div>
<div class="paragraph">
<p>Below is a full index definition using it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "airline-airport-index",
  "type": "fulltext-index",
  "params": {
    "doc_config": {
      "docid_prefix_delim": "",
      "docid_regexp": "air[a-z]{4}",
      "mode": "docid_regexp",
      "type_field": "type"
    },
    "mapping": {
      "default_analyzer": "standard",
      "default_datetime_parser": "dateTimeOptional",
      "default_field": "_all",
      "default_mapping": {
        "dynamic": true,
        "enabled": false
      },
      "default_type": "_default",
      "docvalues_dynamic": false,
      "index_dynamic": true,
      "store_dynamic": false,
      "type_field": "_type",
      "types": {
        "airline": {
          "dynamic": true,
          "enabled": true
        },
        "airport": {
          "dynamic": true,
          "enabled": true
        }
      }
    },
    "store": {
      "indexType": "scorch",
      "segmentVersion": 15
    }
  },
  "sourceType": "gocbcore",
  "sourceName": "travel-sample",
  "sourceParams": {},
  "planParams": {
    "indexPartitions": 1
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So setting this as the index definition would index all attributes of documents with “airline” or "airport" in its document IDs.</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="_images/fts-type-mapping-regexp-with-docid.png" alt="fts type mapping regexp with docid" width="550">
</div>
</div>
<div class="paragraph">
<p>Note: The golang regexp support is based on
<a href="#https://github.com/google/re2/wiki/Syntax">Access the github link</a></p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
