<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Nodes | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="A Couchbase-Server &lt;em&gt;cluster&lt;/em&gt; consists of one or more &lt;em&gt;nodes&lt;/em&gt;, each of which is a system running an instance of Couchbase Server.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/learn/clusters-and-availability/nodes.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/learn/pages/clusters-and-availability/nodes.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Learn</li>
<li class="crumb"><a href="clusters-and-availability.html">Clusters and Availability</a></li>
<li class="crumb"><a href="nodes.html">Nodes</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Nodes</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
A Couchbase-Server <em>cluster</em> consists of one or more <em>nodes</em>, each of which is a system running an instance of Couchbase Server.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nodes-and-their-creation"><a class="anchor" href="#nodes-and-their-creation"></a>Nodes and their Creation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Couchbase Server <em>node</em> is a physical or virtual machine that hosts a single instance of Couchbase Server.
The establishment of the server on the node entails four stages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Installed</em>. Couchbase Server has been fully installed on the node, but not yet started.</p>
</li>
<li>
<p><em>Started</em>. Couchbase Server has been started.
Set-up can now be performed, using Couchbase Web Console, the CLI, or the REST API.</p>
</li>
<li>
<p><em>Initialized</em>. Optionally, up to four custom paths have been specified on the current node, respectively corresponding to the locations at which data for the Data, Index, Analytics, and Eventing Services are to be saved.
Note that if this stage is skipped, and initialization therefore not explicitly performed, path-setting may occur during subsequent provisioning.</p>
</li>
<li>
<p><em>Provisioned</em>. The username and password for the Full Administrator must have been specified.
Additionally, services, service memory-quotas, and buckets may have been specified.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When any variant of stage 4 has been achieved, the node is considered to be provisioned, and thereby, to be a cluster of one server; and re-initialization is not permitted.</p>
</div>
<div class="paragraph">
<p>Note that running multiple instances of Couchbase Server on a single node is not supported.</p>
</div>
<div class="sect2">
<h3 id="paths-for-data-indexes-and-analytics"><a class="anchor" href="#paths-for-data-indexes-and-analytics"></a>Paths for Data, Indexes, Analytics, and Eventing</h3>
<div class="paragraph">
<p>The full, default path for each supported platform is shown in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Default paths for data-files</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Default directory</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/opt/couchbase/var/lib/couchbase/data</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">C:\Program Files\couchbase\server\var\lib\couchbase\data</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mac OS X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">~/Library/Application Support/Couchbase/var/lib/couchbase/data</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that once it has been specified, the data-file path location should not be used to store any data other than that allocated by Couchbase Server; since all such additional data will be deleted.</p>
</div>
<div class="paragraph">
<p>The data-file path cannot be spontaneously changed on a node that is active within a cluster: therefore, you should apply the correct, permanent data-file path at initialization, prior to provisioning.
If a new path is required for a node that has already been provisioned, the node must be reinitialized; which means that all results of prior provisioning are erased.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clusters"><a class="anchor" href="#clusters"></a>Clusters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Couchbase <em>cluster</em> consists of one or more systems, each running Couchbase Server.
An existing cluster can be incremented with additional nodes.</p>
</div>
<div class="paragraph">
<p>Note that Couchbase has modified the license restrictions to its Community Edition package for Couchbase Server Version 7.0 and higher.
In consequence, the size of an individual cluster running Community Edition is restricted to <em>five</em> nodes.
See <a href="https://blog.couchbase.com/couchbase-modifies-license-free-community-edition-package/" target="_blank" rel="noopener">Couchbase Modifies License of Free Community Edition Package</a>, for further information on the new restrictions; and see <a href="../../manage/manage-nodes/node-management-overview.html#node-management-and-community-edition" class="xref page">Node Management and Community Edition</a>, for information on how this affects the experience of Community-Edition administrators.</p>
</div>
<div class="paragraph">
<p>Incrementing a cluster with additional nodes can be accomplished in either of the following ways:</p>
</div>
<div id="node-addition" class="ulist">
<ul>
<li>
<p>The routine for <em>adding</em> a new node to the existing cluster is executed on the existing cluster.</p>
<div class="paragraph">
<p>An instance of Couchbase Server must have been installed on the available node, and must be at stage 2, 3, or 4: that is, must itself be started and uninitialized; or started and initialized; or started, initialized, and provisioned (which means, itself a cluster of one node).
Adding the available node means that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any custom paths already established on the available node are kept unchanged on the available node.
This allows each individual node within a cluster to maintain disk-space for data, index, analytics, and eventing in its own, node-specific location.
If the node is being added by means of Couchbase Web Console, the paths can be modified further, or reverted to the defaults, as part of the addition process.</p>
</li>
<li>
<p>If the node is at stage 4, all the results of its prior provisioning are deleted.
This includes services, memory-quotas, buckets, bucket-data, and Full Administrator username and password.</p>
</li>
<li>
<p>The services and memory-quotas that are currently the default for the cluster can be optionally assigned to the node that is being added.
However, an error occurs if the node does not have sufficient memory.
Services and memory-quotas for the node can be configured to be other than the default.
Alternatively, the default itself can be changed, provided that it does not require more of a given resource than is available on every node currently in the cluster.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="node-joining" class="ulist">
<ul>
<li>
<p>The routine for <em>joining</em> an existing cluster is executed on the new node.</p>
<div class="paragraph">
<p>The available node must be at stage 2 or 3: that is, it must have been started, and may have had its data, index, analytics, and eventing paths configured.
However, it cannot have been provisioned in any way: if the routine for joining is executed on a provisioned node, an error is flagged, and the operation fails.</p>
</div>
<div class="paragraph">
<p>Note that services can nevertheless be assigned to the new node during the join operation itself.
The
memory quota for each service defaults to the setting for the existing cluster.
An error occurs if the new node does not have sufficient memory.</p>
</div>
<div class="paragraph">
<p>If Couchbase Web Console is used to perform the join, the data, index, analytics, and eventing paths can be modified as part of the join operations.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once a cluster has been created, any of the IP addresses of the cluster-nodes can be used to access data and services.
Therefore, provided that one node in the cluster is running the Data Service, the IP address of another node - one that is not running the Data Service - can be specified, in order to access the Data Service: the Cluster Manager ensures that all requests are appropriately routed across the cluster.</p>
</div>
<div class="sect3">
<h4 id="restricting-the-addition-and-joining-of-nodes"><a class="anchor" href="#restricting-the-addition-and-joining-of-nodes"></a>Restricting the Addition and Joining of Nodes</h4>
<div class="paragraph">
<p>To ensure cluster-security, in Couchbase Server Version 7.1.1+, restrictions can be placed on addition and joining, based on the establishment of <em>node-naming conventions</em>.
Only nodes whose names correspond to at least one of the stipulated conventions can be added or joined.
For information, see <a href="../../rest-api/rest-specify-node-addition-conventions.html" class="xref page">Restrict Node-Addition</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="adding-multiple-nodes"><a class="anchor" href="#adding-multiple-nodes"></a>Adding Multiple Nodes</h3>
<div class="paragraph">
<p>When the routine for <em>adding</em> nodes is used to increment a cluster with multiple nodes simultaneously, the additions should all be executed on a <em>single node</em> of the cluster: this simplifies the reconfiguration process, and so protects against error.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rebalance-and-fail-over"><a class="anchor" href="#rebalance-and-fail-over"></a>Rebalance, Removal, Failover, and Recovery</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Rebalance</em> is a process of re-distributing data, indexes, event processing, and query processing among available nodes.
This process should be run whenever a node is added to or removed from an existing cluster as part of a scheduled or pre-planned maintenance activity.
It can also be run after a node has been taken out of the cluster by means of <em>failover</em>, described below.
Rebalance takes place while the cluster is running and servicing requests: clients continue to read and write to existing structures, while the data is being moved between Data Service nodes.
Once data-movement has completed, the updated distribution is communicated to all applications and other relevant consumers.
See <a href="rebalance.html" class="xref page">Rebalance</a>, for more information.</p>
</div>
<div class="paragraph">
<p>Node <em>removal</em> allows a node to be taken out of a cluster in a highly controlled fashion, using <em>rebalance</em> to redistribute data, indexes, event processing, and query processing among remaining nodes.
It is to be used only when are nodes in the cluster are responsive.
It can be used on any node.
See <a href="removal.html" class="xref page">Removal</a>, for more information.</p>
</div>
<div class="paragraph">
<p><em>Failover</em> is the process by which a cluster-node can be removed; either <em>proactively</em>, to support required maintenance, or <em>reactively</em>, in the event of an outage.
Two types of failover are supported, which are <em>graceful</em> (for Data Service nodes only) and <em>hard</em> (for nodes of any kind).
Both types can be applied manually when needed.
<em>Hard</em> can also be applied automatically, by means of prior configuration: in which case it becomes known as <em>automatic</em> failover.
See <a href="failover.html" class="xref page">Failover</a>, for more information.</p>
</div>
<div class="paragraph">
<p><em>Recovery</em> allows a previously failed-over node to be added back into its original cluster, by means of the <em>rebalance</em> operation.
<em>Full</em> recovery involves removing all pre-existing data from, and assigning new data to, the node that is being recovered.
<em>Delta</em> recovery maintains and resynchronizes a node’s pre-existing data.
See <a href="recovery.html" class="xref page">Recovery</a>, for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="node-quantity"><a class="anchor" href="#node-quantity"></a>Node Quantity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For production purposes, clusters of less than three nodes are not recommended.
For information, see <a href="../../install/deployment-considerations-lt-3nodes.html" class="xref page">About Deploying Clusters with Less than Three Nodes</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="naming-clusters-and-nodes"><a class="anchor" href="#naming-clusters-and-nodes"></a>Naming Clusters and Nodes</h2>
<div class="sectionbody">
<div id="hostnames" class="paragraph">
<p>Clusters and the individual nodes they contain must be <em>named</em>.
Names can always be specified when a cluster is first created, and when nodes are added to it.
In some cases, names can be modified subsequently.
All associated conventions and constraints are described below.</p>
</div>
<div class="sect2">
<h3 id="naming-when-creating-a-single-node-cluster"><a class="anchor" href="#naming-when-creating-a-single-node-cluster"></a>Naming when Creating a Single-Node Cluster</h3>
<div class="paragraph">
<p>When a cluster is first created, it is necessarily a single-node cluster.
The new cluster requires <em>two</em> names:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>cluster</em> name.
Once defined, this provides a convenient, verbal reference, which will never be used in programmatic or networked access.
The name can be of any length, can make use of any symbols (for example: <code>%</code>, <code>$</code>, <code>!</code>, <code>#</code>), and can include spaces.
The name can be changed at any time during the life of the cluster, irrespective of the cluster’s configuration.</p>
</li>
<li>
<p>A <em>node</em> name.
This will be used in programmatic and networked access: indeed, all the other nodes in the cluster will access this node by means of this name; which must be one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>The IP address of the underlying host.
This can be of either the IPv4 or IPv6 family.</p>
</li>
<li>
<p>A fully qualified hostname that corresponds, in the appropriate network maps, to the IP address of the underlying host.</p>
</li>
<li>
<p>The <em>loopback address</em>, <code>127.0.0.1</code>.
This is the default.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whichever kind of node name is specified for the single-node cluster, if calls are made to the cluster by means of the Couchbase CLI or the REST API, those made from the underlying host can use the loopback address, the IP address of the underlying host, or the hostname of the underlying host, if one has been assigned.
Calls made from other hosts on the network must use either the IP address or the hostname.
In all cases, the appropriate port number must also be specified, following the name, separated by a colon.</p>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="specifying-the-cluster-name"><a class="anchor" href="#specifying-the-cluster-name"></a>Specifying the Cluster Name</h4>
<div class="paragraph">
<p>The <em>cluster name</em> can be specified by means of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Couchbase Web Console</em>: either during the configuration of the single-node cluster, by means of the <strong>New Cluster</strong> dialog, as described in <a href="../../manage/manage-nodes/create-cluster.html" class="xref page">Create a Cluster</a>; or subsequent to cluster-creation, by means of the <a href="../../manage/manage-settings/general-settings.html" class="xref page">General</a> Settings screen.</p>
</li>
<li>
<p><em>The Couchbase CLI</em>: either during configuration, by means of the command <a href="#cli:cbcli/couchbase-cli-cluster-init.adoc" class="xref unresolved">cluster-init</a>; or subsequently, by means of the command <a href="#cli:cbcli/couchbase-cli-setting-cluster.adoc" class="xref unresolved">setting-cluster</a>.</p>
</li>
<li>
<p><em>The Couchbase REST API</em>: either during configuration or subsequently.
See <a href="../../rest-api/rest-intro.html" class="xref page">Creating a New Cluster</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="specifying-the-node-name"><a class="anchor" href="#specifying-the-node-name"></a>Specifying the Node Name</h4>
<div class="paragraph">
<p>The <em>node name</em> can be specified for a single-node cluster by means of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Couchbase Web Console</em>: during configuration, by means of the <strong>Configure</strong> screen, as described in <a href="../../manage/manage-nodes/create-cluster.html" class="xref page">Create a Cluster</a>.
No subsequent, direct change to the node-name can be made by means of Couchbase Web Console: although the default loopback address can be indirectly changed, through node-addition; as described below.</p>
</li>
<li>
<p><em>The Couchbase CLI</em>: during configuration or subsequently (provided that the cluster is still a single-node cluster), by means of the <code>--node-init-hostname</code> parameter to the command <a href="#cli:cbcli/couchbase-cli-node-init.adoc" class="xref unresolved">node-init</a>.
See <a href="#node-renaming">Node-Renaming</a>, below.</p>
</li>
<li>
<p><em>The Couchbase REST API</em>: either during configuration or subsequently (provided that the cluster is still a single-node cluster).
See both <a href="../../rest-api/rest-intro.html" class="xref page">Creating a New Cluster</a> and <a href="#node-renaming">Node-Renaming</a>, immediately below.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="node-renaming"><a class="anchor" href="#node-renaming"></a>Node Renaming</h3>
<div class="paragraph">
<p>Node-renaming is permitted only for single-node clusters.
A node-name cannot be changed after the node has become a member of a multi-node cluster.
Therefore, if it becomes necessary to change the name of such a node, the node must be removed from the cluster; and then re-added to the cluster, following its name-change.</p>
</div>
</div>
<div class="sect2">
<h3 id="node-naming-when-creating-a-multi-node-cluster"><a class="anchor" href="#node-naming-when-creating-a-multi-node-cluster"></a>Node-Naming when Creating a Multi-Node Cluster</h3>
<div class="paragraph">
<p>When an already provisioned node is to be added to an existing, single-node cluster, the new node must be referenced by means of either the IP address or the hostname of the underlying host.
Once added, the new node is named in accordance with that reference.
For information on node-addition by means of the UI, the CLI, and the REST API, see <a href="../../manage/manage-nodes/add-node-and-rebalance.html" class="xref page">Add a Node and Rebalance</a>.</p>
</div>
<div class="paragraph">
<p>When a new node, prior to its provisioning, is to be joined to the existing, single-node cluster, it must reference the single-node cluster by means of either the IP address or the hostname of the single-node cluster’s underlying host.
The new node gets automatically named with the IP address of its own underlying host.
For information on joining a cluster, see <a href="../../manage/manage-nodes/join-cluster-and-rebalance.html" class="xref page">Join a Cluster and Rebalance</a>.</p>
</div>
<div class="paragraph">
<p>When a new node is either added or joined to an existing, single-node cluster, and the original node was named with the default, loopback address, the original node is automatically renamed with the IP address of its underlying host.
(Specifically, the original node opens a connection to the new node, determines the interface it is using for the source port, and adopts the name that corresponds to that interface.)
This name-change persists even in the event that the addition of the second node, when initiated by means of Couchbase Web Console, is subsequently cancelled prior to the required, concluding rebalance.</p>
</div>
</div>
<div class="sect2">
<h3 id="node-naming-with-hostnames"><a class="anchor" href="#node-naming-with-hostnames"></a>Node-Naming with Hostnames</h3>
<div class="paragraph">
<p>In consequence of the procedures and constraints described above, should it be necessary to ensure that each node in a cluster is named with the hostname (rather than the IP address) of its underlying host:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The original node should be named with the hostname of its underlying host while still a single-node cluster: this being the only time that the hostname can be specified as its name.</p>
</li>
<li>
<p>Nodes should never be joined to the cluster: they should only be added; with the hostname of their underlying host being used as their reference.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="restarting-nodes"><a class="anchor" href="#restarting-nodes"></a>Restarting Nodes</h3>
<div class="paragraph">
<p>If a node is restarted, Couchbase Server continues to use the specified hostname.
Note, however, that if the node is failed over or removed, Couchbase Server will no longer use the specified hostname: therefore, in such circumstances, the node must be reconfigured, and the hostname re-specified.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="node-certificates"><a class="anchor" href="#node-certificates"></a>Node Certificates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As described in <a href="../security/certificates.html" class="xref page">Certificates</a>, Couchbase Server can be protected by means of x.509 certificates; ensuring that only approved users, applications, machines, and endpoints have access to system resources; and that clients can verify the identity of Couchbase Server.</p>
</div>
<div class="paragraph">
<p>Certificate deployment for a cluster requires that the chain certificate <em>chain.pem</em> and the private node key <em>pkey.key</em> be placed in an administrator-created <em>inbox</em> folder, for each cluster-node.
It subsequently requires that the root certificate for the cluster be uploaded, and then activated by means of reloading, for each node.
If an attempt is made to incorporate a new node into the certificate-protected cluster without the new node itself already having been certificate-protected in this way, the attempt fails.</p>
</div>
<div class="paragraph">
<p>Therefore, a new node should be appropriately certificate-protected, before any attempt is made to incorporate it into a certificate-protected cluster.
See <a href="../security/certificates.html" class="xref page">Certificates</a> for an overview of certificates in the context of Couchbase Server.
For information on configuring server certificates, see <a href="../../manage/manage-security/configure-server-certificates.html" class="xref page">Configure Server Certificates</a>; and in particular, the section <a href="../../manage/manage-security/configure-server-certificates.html#adding-new-nodes" class="xref page">Adding New Nodes</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="node-to-node-encryption"><a class="anchor" href="#node-to-node-encryption"></a>Node-to-Node Encryption</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Server supports <em>node-to-node encryption</em>, whereby network traffic between the individual nodes of a cluster is encrypted, in order to optimize cluster-internal security.
For an overview, see <a href="node-to-node-encryption.html" class="xref page">Node-to-Node Encryption</a>.
For practical steps towards set-up, see <a href="../../manage/manage-nodes/apply-node-to-node-encryption.html" class="xref page">Manage Node-to-Node Encryption</a>.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
