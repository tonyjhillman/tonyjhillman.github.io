<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Manage Server Groups | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Nodes can be assigned to server &lt;em&gt;groups&lt;/em&gt;, in order to protect a cluster from large-scale infrastructure failure.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/manage/manage-groups/manage-groups.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/manage/pages/manage-groups/manage-groups.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Manage</li>
<li class="crumb"><a href="manage-groups.html">Manage Server Groups</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Manage Server Groups</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Nodes can be assigned to server <em>groups</em>, in order to protect a cluster from large-scale infrastructure failure.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-and-maintaining-server-groups"><a class="anchor" href="#creating-and-maintaining-server-groups"></a>Creating and Maintaining Server Groups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Server <em>groups</em> can be administrator-defined to contain a number of the nodes within a Couchbase Cluster, and thereby protect the cluster against large-scale infrastructure failure.
An explanation of <em>Server Group Awareness</em>, and the effect it has on the distribution of vBucket replicas throughout a cluster, is provided in
<a href="../../learn/clusters-and-availability/groups.html" class="xref page">Server Group Awareness</a>.</p>
</div>
<div class="paragraph">
<p>Server groups and the Server Group Awareness feature are only available in
Couchbase Server Enterprise Edition.</p>
</div>
<div class="paragraph">
<p>Note that when you initialize a new Couchbase Server cluster, the first node is automatically placed in a server group named Group 1.
Once you create additional server groups, the <strong class="ui">Assign Group</strong> field becomes available when adding new server nodes to the cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples-on-this-page"><a class="anchor" href="#examples-on-this-page"></a>Examples on This Page</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The examples in the subsections below show how to create and manage groups, using the <a href="#manage-groups-with-the-ui">UI</a>, the <a href="#manage-groups-with-the-cli">CLI</a>, and the <a href="#manage-groups-with-the-rest-api">REST API</a> respectively.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manage-groups-with-the-ui"><a class="anchor" href="#manage-groups-with-the-ui"></a>Manage Groups with the UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To manage groups, left-click on the <strong>Servers</strong> tab, in the left-hand navigation bar.
This brings up the <strong>Servers</strong> screen.
Now left-click on the <strong>Groups</strong> tab, at the upper right:</p>
</div>
<div id="groups_tab" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsTab.png" alt="groupsTab" width="72">
</div>
</div>
<div class="paragraph">
<p>This brings up the <strong>Server Groups</strong> screen, which might initially appear as follows:</p>
</div>
<div id="groups_server_groups_screen" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsServerGroupsScreen.png" alt="groupsServerGroupsScreen" width="820">
</div>
</div>
<div class="paragraph">
<p>This display indicates that the cluster currently contains three servers.
Note that the list of servers is headed by the name <strong>Group 1</strong>: this is because by default, Couchbase Server puts each new server into a group with this name.
To change the name, left-click on the <strong>edit name</strong> tab, adjacent to the name:</p>
</div>
<div id="groups_edit_group_name_tab" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsEditGroupNameTab.png" alt="groupsEditGroupNameTab" width="140">
</div>
</div>
<div class="paragraph">
<p>This brings up the <strong>Edit Group Name</strong> dialog:</p>
</div>
<div id="groups_edit_group_name_dialog" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsEditGroupNameDialog.png" alt="groupsEditGroupNameDialog" width="260">
</div>
</div>
<div class="paragraph">
<p>If you wish to change the group name, edit it within the interactive text-field, and then left-click on the <strong>Rename Group</strong> button.</p>
</div>
<div class="sect2">
<h3 id="add-a-group-with-the-ui"><a class="anchor" href="#add-a-group-with-the-ui"></a>Add a Group, with the UI</h3>
<div class="paragraph">
<p>To add a new group, proceed as follows:</p>
</div>
<div id="server-grp" class="olist arabic">
<ol class="arabic">
<li>
<p>Left-click on the <strong>Add Group</strong> tab, which is located at the upper right of the <strong>Server Groups</strong> screen:</p>
<div id="groups_add_group_tab" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsAddGroupTab.png" alt="groupsAddGroupTab" width="120">
</div>
</div>
<div class="paragraph">
<p>This brings up the <strong>Add New Group</strong> dialog:</p>
</div>
<div id="groups_add_group_dialog" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsAddGroupDialog.png" alt="groupsAddGroupDialog" width="260">
</div>
</div>
</li>
<li>
<p>Access the interactive text-field of the <strong>Add Group</strong> dialog, and enter an appropriate name for the new group.
Then, left-click on the <strong>Add Group</strong> button, to the lower right of the dialog.
The new group is added, the dialog disappears, and the <strong>Server Groups</strong> screen is now displayed as follows:</p>
<div id="groups_server_groups_new_group_added" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsServerGroupsNewGroupAdded.png" alt="groupsServerGroupsNewGroupAdded" width="820">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the information is entered successfully, a new group is added in the <strong class="ui">Server Groups</strong> page.</p>
</div>
</div>
<div class="sect2">
<h3 id="move-a-server-between-groups-with-the-ui"><a class="anchor" href="#move-a-server-between-groups-with-the-ui"></a>Move a Server Between Groups, with the UI</h3>
<div class="paragraph">
<p>Proceed as follows:</p>
</div>
<div id="move-server-grp" class="olist arabic">
<ol class="arabic">
<li>
<p>On the <strong>Server Groups</strong> screen, access the <strong>move to</strong> tab at the right-hand side of the row for the server you wish to move.
A pop-up menu appears, listing the available groups to which the server can be moved.</p>
<div id="groups_access_move_server_tab" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsAccessMoveServerTab.png" alt="groupsAccessMoveServerTab" width="740">
</div>
</div>
<div class="paragraph">
<p>In this case, there is only one available group to which the server can be moved, which is Group 2.
Left-click, to select this group.
A <strong>pending move</strong> notification now appears.</p>
</div>
<div id="groups_pending_move_notification" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsPendingMoveNotification.png" alt="groupsPendingMoveNotification" width="740">
</div>
</div>
<div class="paragraph">
<p>Note that left-clicking on the <code>Cancel move</code> tab, at the right-hand side of the row, cancels the move; leaving the server in its current group.</p>
</div>
</li>
<li>
<p>Toward the upper right of the <strong>Server Groups</strong> screen a <strong>Reset</strong> tab and an <strong>Apply Changes</strong> button have become available.
If you left-click on the <strong>Reset</strong> tab, the pending move is cancelled, and the selected server remains in its current group.
Left-click on the <strong>Apply Changes</strong> button to complete the move.</p>
<div id="groups_reset_and_apply_changes_buttons" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsResetAndApplyChangesButtons.png" alt="groupsResetAndApplyChangesButtons" width="220">
</div>
</div>
<div class="paragraph">
<p>A notification now appears at the lower left:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsRebalanceRequiredWarning.png" alt="groupsRebalanceRequiredWarning" width="340">
</div>
</div>
<div class="paragraph">
<p>This indicates a rebalance should now be performed, on the <strong>Servers</strong> screen.</p>
</div>
</li>
<li>
<p>Return to the <strong>Servers</strong> screen.
The screen now appears as follows, showing the respective groups of the servers, and continuing to show to rebalance notification:</p>
<div id="groups_rebalance_following_move" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsRebalanceFollowingMove.png" alt="groupsRebalanceFollowingMove" width="820">
</div>
</div>
<div class="paragraph">
<p>Left-click on the <strong>Rebalance</strong> button, to start the rebalance.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="delete-a-group-with-the-ui"><a class="anchor" href="#delete-a-group-with-the-ui"></a>Delete a Group, with the UI</h3>
<div class="paragraph">
<p>To delete a group, first remove all nodes from the group — either by moving them to other groups, or by removing them entirely from the cluster.
Then, delete the group.
To delete a group by removing servers, proceed as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the <strong>Servers</strong> screen, and left-click on the row for each server you need to remove, in order to delete their group.
This expands the row-display.
The <strong>Remove</strong> button appears at the lower right:</p>
<div id="groups_screen_with_open_group" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsScreenWithOpenGroup.png" alt="groupsScreenWithOpenGroup" width="820">
</div>
</div>
</li>
<li>
<p>Left-click on the <strong>Remove</strong> button, to remove the server.
A confirmation notification appears:</p>
<div id="groups_confirm_server_removal_notice" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsConfirmServerRemovalNotice.png" alt="groupsConfirmServerRemovalNotice" width="340">
</div>
</div>
<div class="paragraph">
<p>Left-click on the <strong>Remove Server</strong> button, to confirm.</p>
</div>
<div class="paragraph">
<p>A <strong>REMOVAL pending rebalance</strong> notification now appears on the row.
A <strong>Cancel Remove</strong> button is also provided, to allow cancellation:</p>
</div>
<div id="groups_removal_pending_notification" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsRemovalPendingNotification.png" alt="groupsRemovalPendingNotification" width="740">
</div>
</div>
</li>
<li>
<p>Left-click on the <strong>Rebalance</strong> button to perform a rebalance, and thereby complete the server-removal process:</p>
<div id="groups_rebalance_button" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsRebalanceButton.png" alt="groupsRebalanceButton" width="100">
</div>
</div>
<div class="paragraph">
<p>At the conclusion of the rebalance, the server has been removed.</p>
</div>
<div id="groups_following_server_removal" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsFollowingServerRemoval.png" alt="groupsFollowingServerRemoval" width="740">
</div>
</div>
<div class="paragraph">
<p>Perform server-removal in this way for every server in the group to be deleted, until the group contains no servers.</p>
</div>
</li>
<li>
<p>Access the <strong>Server Groups</strong> screen, by left-clicking the <strong>Groups</strong> button, located at the upper right of the <strong>Servers</strong> screen.
The group that now contains no servers is represented by a row that displays a notification:</p>
<div id="groups_empty_group" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsEmptyGroup.png" alt="groupsEmptyGroup" width="740">
</div>
</div>
</li>
<li>
<p>Left-click on the <strong>delete group</strong> tab:</p>
<div id="groups_delete_group" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsDeleteGroup.png" alt="groupsDeleteGroup" width="100">
</div>
</div>
<div class="paragraph">
<p>A confirmation dialog now appears:</p>
</div>
<div id="groups_delete_group_confirmation" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsDeleteGroupConfirmation.png" alt="groupsDeleteGroupConfirmation" width="260">
</div>
</div>
<div class="paragraph">
<p>Left-click on the <strong>Delete Group</strong> button.
The group is deleted, and now longer appears as a row on the <strong>Server Groups</strong> screen.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="assign-a-group-when-adding-a-server-with-the-ui"><a class="anchor" href="#assign-a-group-when-adding-a-server-with-the-ui"></a>Assign a Group when Adding a Server, with the UI</h3>
<div class="paragraph">
<p>When a server is added to a cluster, if more than one group exists, the server can be assigned to a specific group.
The <strong>Add Server Dialog</strong> appears as follows:</p>
</div>
<div id="groups_select_from_add_server_dialog" class="imageblock text-left">
<div class="content">
<img src="../_images/manage-groups/groupsSelectFromAddServerDialog.png" alt="groupsSelectFromAddServerDialog" width="340">
</div>
</div>
<div class="paragraph">
<p>Select one of the existing groups from the controls that are located at the right of the <strong>Assign Group</strong> field.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manage-groups-with-the-cli"><a class="anchor" href="#manage-groups-with-the-cli"></a>Manage Groups with the CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The CLI <code>group-manage</code> command can be used to manage groups.
The following subsections give examples.
See also the full command reference, at <a href="#cli:cbcli/couchbase-cli-group-manage.adoc" class="xref unresolved">group-manage</a>.</p>
</div>
<div class="sect2">
<h3 id="get-group-information-with-the-cli"><a class="anchor" href="#get-group-information-with-the-cli"></a>Get Group Information, with the CLI</h3>
<div class="paragraph">
<p>To return a list containing the cluster&#8217;s currently defined groups, and the nodes assigned to each, enter the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>couchbase-cli group-manage -c 10.143.190.101:8091 \
-u Administrator \
-p password \
--list</pre>
</div>
</div>
<div class="paragraph">
<p>The output shows each group, and the nodes within it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Group 1
 server: 10.143.190.101:8091
 server: 10.143.190.102:8091
 server: 10.143.190.103:8091</pre>
</div>
</div>
<div class="paragraph">
<p>This confirms that a single group, <code>Group 1</code>, exists; and has three nodes assigned to it.</p>
</div>
</div>
<div class="sect2">
<h3 id="add-a-group-with-the-cli"><a class="anchor" href="#add-a-group-with-the-cli"></a>Add a Group, with The CLI</h3>
<div class="paragraph">
<p>To add a new, empty group, named <code>Group 2</code>, enter the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>couchbase-cli group-manage -c 10.143.190.101:8091 \
-u Administrator \
-p password \
--create \
--group-name 'Group 2'</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, this produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SUCCESS: Server group created</pre>
</div>
</div>
<div class="paragraph">
<p>The node-to-group assignment can now be checked again, by means of the <code>--list</code> flag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>couchbase-cli group-manage -c 10.143.190.101:8091 \
-u Administrator \
-p password \
--list</pre>
</div>
</div>
<div class="paragraph">
<p>This now returns the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Group 1
 server: 10.143.190.101:8091
 server: 10.143.190.102:8091
 server: 10.143.190.103:8091
Group 2</pre>
</div>
</div>
<div class="paragraph">
<p>This confirms that <code>Group 2</code> has been created, and is currently empty.</p>
</div>
</div>
<div class="sect2">
<h3 id="assign-a-group-when-adding-a-server-with-the-cli"><a class="anchor" href="#assign-a-group-when-adding-a-server-with-the-cli"></a>Assign a Group when Adding a Server, with the CLI</h3>
<div class="paragraph">
<p>New nodes are added to a cluster by means of the <code>server-add</code> command.
Full details are provided in <a href="#cli:cbcli/couchbase-cli-server-add.adoc" class="xref unresolved">server-add</a>.
The command optionally takes a <code>--group-name</code> parameter, which allows the name of an existing server group to be specified: the new node is added to this group.</p>
</div>
<div class="paragraph">
<p>To add an <em>already provisioned</em> node, enter the following, specifying the administrator username and password of the new, provisioned node.
Note that adding a provisioned node removes all former provisioning, and reprovisions the node according to what is specified during addition.
Note also that if the node is <em>unprovisioned</em>, no username or password for the node is required.
See <a href="../../learn/clusters-and-availability/nodes.html" class="xref page">Nodes</a>, for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>couchbase-cli server-add -c 10.143.190.101:8091 \
--username Administrator \
--password password \
--server-add 10.143.190.104:8091 \
--server-add-username Administrator \
--server-add-password password \
--group-name 'Group 2' \
--services data,index,query</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--services</code> flag has thus been used to specify which services are assigned to the new node: here, the Data, Index, and Query Services.</p>
</div>
<div class="paragraph">
<p>If successful, the command returns the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SUCCESS: Server added</pre>
</div>
</div>
<div class="paragraph">
<p>The node-to-group assignment can now be checked again.
This provides the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Group 1
 server: 10.143.190.101:8091
 server: 10.143.190.102:8091
 server: 10.143.190.103:8091
Group 2
 server: 10.143.190.104:8091</pre>
</div>
</div>
<div class="paragraph">
<p>This confirms that <code>10.143.190.104</code> has been added to <code>Group 2</code>.
A rebalance should now be performed, to integrate the new node and distribute data appropriately across the cluster.
See <a href="#cli:cbcli/couchbase-cli-rebalance.adoc" class="xref unresolved">Rebalance</a>, for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="move-a-server-between-groups-with-the-CLi"><a class="anchor" href="#move-a-server-between-groups-with-the-CLi"></a>Move a Server Between Groups, with The CLI</h3>
<div class="paragraph">
<p>To move a node from one group to another, specify the origin and the destination groups, and the node to be moved, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>couchbase-cli group-manage -c 10.143.190.101:8091 \
-u Administrator \
-p password \
--move-servers 10.143.190.104 \
--from-group 'Group 2' \
--to-group 'Group 1'</pre>
</div>
</div>
<div class="paragraph">
<p>Success returns the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SUCCESS: Servers moved between groups</pre>
</div>
</div>
<div class="paragraph">
<p>The node-to-group assignment can now be checked again.
This provides the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Group 1
 server: 10.143.190.101:8091
 server: 10.143.190.102:8091
 server: 10.143.190.103:8091
 server: 10.143.190.104:8091
Group 2</pre>
</div>
</div>
<div class="paragraph">
<p>This confirms that <code>10.143.190.104</code> has been moved into <code>Group 1</code>, and <code>Group 2</code> is consequently empty.</p>
</div>
</div>
<div class="sect2">
<h3 id="delete-a-group-with-the-cli"><a class="anchor" href="#delete-a-group-with-the-cli"></a>Delete a Group, with the CLI</h3>
<div class="paragraph">
<p>To delete an empty group, enter the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>couchbase-cli group-manage -c 10.143.190.101:8091 \
-u Administrator \
-p password \
--delete \
--group-name 'Group 2'</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, the command returns the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SUCCESS: Server group deleted</pre>
</div>
</div>
<div class="paragraph">
<p>The node-to-group assignment can now be checked again.
This provides the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Group 1
 server: 10.143.190.101:8091
 server: 10.143.190.102:8091
 server: 10.143.190.103:8091
 server: 10.143.190.104:8091</pre>
</div>
</div>
<div class="paragraph">
<p>This confirms that <code>Group 2</code> has been deleted.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manage-groups-with-the-rest-api"><a class="anchor" href="#manage-groups-with-the-rest-api"></a>Manage Groups with the REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The REST API can be used to gather information on existing groups, and to manage groups.
The following subsections give examples of the methods and URI that can be used.
Note that all are described in greater detail in the section <a href="../../rest-api/rest-rza.html" class="xref page">Server Groups API</a>.</p>
</div>
<div class="sect2">
<h3 id="get-group-information-with-the-rest-api"><a class="anchor" href="#get-group-information-with-the-rest-api"></a>Get Group Information, with the REST API</h3>
<div class="paragraph">
<p>Group information can be retrieved with the <code>GET /pools/default/serverGroups</code> HTTP method and URI.
The following example returns information on groups within the cluster <code>10.143.190.101</code>.
Note that the output is piped to <code>jq</code>, to enhance readability.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u Administrator:password -v -X GET \
http://10.143.190.101:8091/pools/default/serverGroups | jq</pre>
</div>
</div>
<div class="paragraph">
<p>If successful, <code>200 OK</code> is given; and an object is returned that contains information on each group.
For the full output, and an explanation of the information provided, see <a href="../../rest-api/rest-servergroup-get.html" class="xref page">Getting Group Information</a>.</p>
</div>
<div class="paragraph">
<p>For general management purposes, the output contains the following, both of which are used in examples further below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>URI path and revision integer</em> for the overall group-configuration.
This must be specified when the configuration is to be changed.</p>
</li>
<li>
<p>The group&#8217;s <em>URI path and UUID string</em>.
The allows the individual group to be referenced, when nodes are to be moved between groups, or are to be added.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="add-a-group-with-the-rest-api"><a class="anchor" href="#add-a-group-with-the-rest-api"></a>Add a Group, with the REST API</h3>
<div class="paragraph">
<p>Server groups are created with the <code>POST /pools/default/serverGroups</code> HTTP method and URI.
See <a href="../../rest-api/rest-servergroup-post-create.html" class="xref page">Creating Groups</a> for full details.</p>
</div>
<div class="paragraph">
<p>The following example creates a new, empty group on <code>10.143.190.101</code>; named <code>Group 3</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST -u myAdmin:myPassword \
http://10.143.190.101:8091/pools/default/serverGroups \
-d 'name="Group 3"'</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="move-a-server-between-groups-with-the-rest-api"><a class="anchor" href="#move-a-server-between-groups-with-the-rest-api"></a>Move a Server Between Groups, with the REST API</h3>
<div class="paragraph">
<p>Server group membership is changed by means of the <code>PUT /pools/default/serverGroups</code> HTTP method and URI.
For full details, see <a href="../../rest-api/rest-servergroup-put-membership.html" class="xref page">Updating Group Membership</a></p>
</div>
<div class="paragraph">
<p>The following example specifies a new group-membership configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -d@groupChangeDefinition.json -X PUT \
http://Administrator:password http://10.143.190.101:8091/pools/default/serverGroups?rev=112632175</pre>
</div>
</div>
<div class="paragraph">
<p>The URI path is terminated with the <em>revision integer</em> that specifies the current, overall group-configuration.
This integer can be obtained by the procedure referred to above, in <a href="#get-group-information-with-the-rest-api">Get Group Information, with  the REST API</a>.</p>
</div>
<div class="paragraph">
<p>The specified file, <code>groupChangeDefinition.json</code>, provides the new configuration for group membership.
For an example, see <a href="../../rest-api/rest-servergroup-put-membership.html#configuration-statement" class="xref page">Node-to-Group Assignment</a>.
Note that the content of this file can also be directly specified on the command-line, if required.</p>
</div>
<div class="paragraph">
<p>Success gives <code>200 OK</code>, and returns an empty array.</p>
</div>
</div>
<div class="sect2">
<h3 id="delete-a-group-with-the-rest-api"><a class="anchor" href="#delete-a-group-with-the-rest-api"></a>Delete a Group, with the REST API</h3>
<div class="paragraph">
<p>Server groups can be deleted with the <code>DELETE /pools/default/serverGroups/&lt;:uuid&gt;</code> HTTP method and URI.
The group must be empty, for the request to succeed.
For full details, see <a href="../../rest-api/rest-servergroup-delete.html" class="xref page">Deleting Groups</a>.</p>
</div>
<div class="paragraph">
<p>The procedure described in <a href="../../rest-api/rest-servergroup-get.html" class="xref page">Getting Server Group Information</a> should be used to determine the <code>uuid</code> of the group to be deleted; and to ascertain the group&#8217;s emptiness.
The following request deletes the group, which is specified by means of the <code>uuid</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X DELETE -u Administrator:password \
http://10.143.190.101:8091/pools/default/serverGroups/\
dfbed23035cc57eac0f4e72ce0c8667a</pre>
</div>
</div>
<div class="paragraph">
<p>Success gives <code>200 OK</code>, and returns an empty object.</p>
</div>
</div>
<div class="sect2">
<h3 id="assign-a-group-when-adding-a-server-with-the-rest-api"><a class="anchor" href="#assign-a-group-when-adding-a-server-with-the-rest-api"></a>Assign a Group when Adding a Server, with the REST API</h3>
<div class="paragraph">
<p>A node can be added to the cluster and simultaneously added to an existing server group with the <code>POST /pools/default/serverGroups/&lt;:uuid&gt;/addNode</code> HTTP method and URI
Optionally, services can be added to the node.
Following addition, rebalance is required.
For full details, see <a href="../../rest-api/rest-servergroup-post-add.html" class="xref page">Adding Nodes to Groups</a>.</p>
</div>
<div class="paragraph">
<p>The following example assumes that the cluster has two groups,
<code>Group 1</code> and <code>Group 2</code>.
The <code>uuid</code> for <code>Group 2</code> has been returned as <code>246b5de857e100dbfd8b6dee0406420a</code>, by the procedure described in <a href="../../rest-api/rest-servergroup-get.html" class="xref page">Getting Server Group Information</a>.
The following request therefore adds a new node, <code>10.143.190.104</code> to the cluster, and assigns it to <code>Group 2</code>.
The Data and Index Services are deployed to the new node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST -d hostname=10.143.190.104:8091 \
-d services=kv%2Cindex \
-d user=Administrator -d password=password \
-u Administrator:password \
http://10.143.190.101:8091/pools/default/serverGroups/\
3b66b3c3177f44a3ffa6771ffeb31f36/addNode</pre>
</div>
</div>
<div class="paragraph">
<p>Success gives <code>200 OK</code>, and returns an object signifying that the nodes specified for addition has been duly added to the cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"otpNode":"ns_1@10.143.190.104"}</pre>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
