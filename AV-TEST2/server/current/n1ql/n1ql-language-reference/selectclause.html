<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>SELECT Clause | Couchbase Docs</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="The SELECT clause determines the result set.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/n1ql/n1ql-language-reference/selectclause.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/pages/n1ql-language-reference/selectclause.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb"><a href="../query.html">Query</a></li>
<li class="crumb"><a href="index.html">SQL++ Language Reference</a></li>
<li class="crumb">Statements</li>
<li class="crumb"><a href="selectintro.html">SELECT</a></li>
<li class="crumb"><a href="selectclause.html">SELECT Clause</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">SELECT Clause</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<style type="text/css">
  /* DOC-10177 */
  .hdlist table tr td.hdlist1,
  .hdlist table tr td.hdlist2 {
    padding: 1.5rem 0 0;
  }

  /* Compact horizontal definition lists */
  .hdlist.compact,
  .hdlist.compact {
    padding-top: 1rem;
  }
  .hdlist.compact table tr td.hdlist1,
  .hdlist.compact table tr td.hdlist2 {
    padding: 0.5rem 0 0;
  }

  /* Descriptions in horizontal description lists should have left padding */
  .hdlist table tr td.hdlist2,
  .hdlist.compact table tr td.hdlist2 {
    padding-left: 1rem;
  }

  /* Paragraphs in horizontal description lists should not have left margin */
  .hdlist table .hdlist1 + .hdlist2 p {
    margin-left: 0; !important
  }

  /* Horizontal definitions should match style of vertical definitions */
  td.hdlist1 {
    font-weight: 600;
  }
</style>
<div class="quoteblock abstract">
<blockquote>
The <code>SELECT</code> clause determines the result set.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_Purpose"><a class="anchor" href="#section_Purpose"></a>Purpose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a <code>SELECT</code> statement, the <code>SELECT</code> clause determines the projection (result set).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_Prerequisites"><a class="anchor" href="#section_Prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For you to select data from a document or keyspace, you must have the <code class="param">query_select</code> privilege on the document or keyspace.
For more details about user roles, see
<a href="../../learn/security/authorization-overview.html" class="xref page">Authorization</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_Syntax"><a class="anchor" href="#section_Syntax"></a>Syntax</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L51">select-clause ::= 'SELECT' hint-comment? projection</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/select-clause.png" alt="Syntax diagram">
</div>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
hint-comment
</td>
<td class="hdlist2">
<p><a href="#hint-comment">Optimizer Hints</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
projection
</td>
<td class="hdlist2">
<p><a href="#sec_Arguments">Projection</a> <span class="icon"><i class="fa fa-caret-down"></i></span></p>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="hint-comment"><a class="anchor" href="#hint-comment"></a>Optimizer Hints</h3>
<div class="paragraph">
<p>In Couchbase Server 7.1 and later, you can supply hints to the optimizer within a specially-formatted hint comment.
For further details, refer to <a href="optimizer-hints.html" class="xref page">Optimizer Hints</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sec_Arguments"><a class="anchor" href="#sec_Arguments"></a>Projection</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L57-L58">projection ::= ( 'ALL' | 'DISTINCT' )? ( result-expr ( ',' result-expr )* |
               ( 'RAW' | 'ELEMENT' | 'VALUE' ) expr ( 'AS'? alias )? )</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/projection.png" alt="Syntax diagram">
</div>
</div>
<div class="paragraph">
<p>The projection consists of an optional <code>ALL</code> or <code>DISTINCT</code> <a href="#all-distinct">quantifier</a>, followed by one of the following alternatives:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One or more <a href="#result-expr">result expressions</a>, separated by commas.</p>
</li>
<li>
<p>A single <a href="#raw-element-value">raw expression</a>, including a <a href="#field-expr">select expression</a> and an optional <a href="#alias">alias</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="all-distinct"><a class="anchor" href="#all-distinct"></a>ALL / DISTINCT</h4>
<div class="paragraph">
<p>(Optional; default is ALL.)</p>
</div>
<div class="paragraph">
<p>SELECT ALL retrieves all of the data specified and will result in all of the specified columns, including all duplicates.</p>
</div>
<div class="paragraph">
<p>SELECT DISTINCT removes duplicate result objects from the query&#8217;s result set.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The DISTINCT clause is not blocking in nature, since it streams the input and produces the output in parallel, while consuming less memory.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In general, <code>SELECT ALL</code> results in more returned documents than <code>SELECT DISTINCT</code> due to <code class="code">DISTINCT</code>'s extra step of removing duplicates.
Since <code>DISTINCT</code> is purely run in memory, it executes quickly, making the overhead of removing duplicates more noticeable as your recordset gets larger.
Refer to <a href="#ex-all-distinct">Example 4</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="result-expr"><a class="anchor" href="#result-expr"></a>Result Expression</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L62">result-expr ::= ( path '.' )? '*' | expr ( 'AS'? alias )?</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/result-expr.png" alt="Syntax diagram">
</div>
</div>
<div id="path" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L66">path ::= identifier ( '[' expr ']' )* ( '.' identifier ( '[' expr ']' )* )*</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/path.png" alt="Syntax diagram">
</div>
</div>
<div class="paragraph">
<p>The result expression may contain one of the following alternatives:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="#keyspace-name">star expression</a>, preceded by an optional path.</p>
</li>
<li>
<p>A <a href="#field-expression">select expression</a>, including an optional <a href="#alias">alias</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="raw-element-value"><a class="anchor" href="#raw-element-value"></a>RAW / ELEMENT / VALUE</h4>
<div class="paragraph">
<p>(Optional; RAW and ELEMENT and VALUE are synonyms.)</p>
</div>
<div class="paragraph">
<p>When you specify one or more <a href="#result-expr">result expressions</a> in the query projection, each result is wrapped in an object, and an implicit or explicit <a href="#alias">alias</a> is given for each result expression.
This extra layer might not be desirable, since it requires extra output parsing.</p>
</div>
<div class="paragraph">
<p>SELECT RAW reduces the amount of data returned by eliminating the field attribute.
The RAW qualifier specifies that the expression that follows should not be wrapped in an object, and the alias for that expression should be suppressed, as shown in <a href="#ex-raw-expr">Example 6</a> and <a href="#ex-raw-field">Example 7</a>.</p>
</div>
<div class="paragraph">
<p>The RAW qualifier only enables you to specify a single <a href="#field-expression">select expression</a>.
You cannot use the RAW qualifier with a <a href="#keyspace-name">star expression</a> or with multiple select expressions.</p>
</div>
</div>
<div class="sect3">
<h4 id="keyspace-name"><a class="anchor" href="#keyspace-name"></a>Star Expression (*)</h4>
<div class="paragraph">
<p>The star expression <code>*</code> enables you to select <em>all</em> the fields from the source specified by the <a href="from.html" class="xref page">FROM clause</a>.</p>
</div>
<div class="paragraph">
<p>The star expression may be preceded by a <a href="nestedops.html" class="xref page">path</a>, to select all the nested fields from within an array.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Omitting the keyspace name before a star expression adds the keyspace name to the result set; whereas if you include the keyspace name before a star expression, the keyspace name will not appear in the result set.
Refer to <a href="#ex-star">Example 10</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="field-expression"><a class="anchor" href="#field-expression"></a>Select Expression</h4>
<div class="paragraph">
<p>The select expression is any expression that evaluates to a field to be included in the query&#8217;s result set.
At its simplest, this may be the name of a field in the data source, such as <code>id</code>, <code>airline</code>, or <code>stops</code>.
Refer to <a href="#ex-field">Example 1</a>.</p>
</div>
<div class="paragraph">
<p>The select expression may include a <a href="nestedops.html" class="xref page">path</a>, to select a nested field from within an array, such as <code>schedule[0].day</code>.
Refer to <a href="#ex-path">Example 2</a>.</p>
</div>
<div class="paragraph">
<p>If no field name is specified, the select expression allows you to perform calculations, such as <code>SELECT 10+20 AS Total;</code> or any other SQL++ expression.
For details with examples, see <a href="index.html#N1QL_Expressions" class="xref page">SQL++ Expressions</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="alias"><a class="anchor" href="#alias"></a>AS Alias</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ebnf hljs" data-lang="ebnf" data-source-url="file:///Users/tony.hillman/Documents/71docs/docs-server/modules/n1ql/partials/grammar/dql.ebnf#L44">alias ::= identifier</code></pre>
</div>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="../_images/n1ql-language-reference/alias.png" alt="Syntax diagram">
</div>
</div>
<div class="paragraph">
<p>A temporary name of a keyspace name or field name to make names more readable or unique.
Refer to <a href="#ex-alias">Example 3</a>.</p>
</div>
<div class="paragraph">
<p>
If you do not explicitly give a field an alias, it is given an <em>implicit alias</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a field, the implicit alias is the same as the name of the field in the input.</p>
</li>
<li>
<p>For a nested path, the implicit alias is defined as the last component in the path.</p>
</li>
<li>
<p>For any expression which does not refer to a field, the implicit alias is a dollar sign followed by a number, based on the position of the expression in the projection; for example, <code>$1</code>, <code>$2</code>, and so on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An implicit or explicit alias is returned in the result set, unless you suppress it using the <a href="#raw-element-value">RAW keyword</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec_BestPractices"><a class="anchor" href="#sec_BestPractices"></a>Best Practices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When possible, explicitly list all fields you want in your result set instead of using a star expression <code>*</code> to select all fields, since the <code>*</code> requires an extra trip over your network&#8201;&#8212;&#8201;one to get the list of field names and one to select the fields.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec_Examples"><a class="anchor" href="#sec_Examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/n1ql/pages/n1ql-language-reference/selectclause.adoc - include::ROOT:partial$query-context.adoc[]</p>
</div>
<div id="ex-field" class="exampleblock">
<div class="title">Example 1. Select fields by name</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT id, airline, stops FROM route LIMIT 1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airline": "AF",
    "id": 10000,
    "stops": 0
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex-path" class="exampleblock">
<div class="title">Example 2. Select field with path</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT schedule[0].day FROM route;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "day": 0
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex-alias" class="exampleblock">
<div class="title">Example 3. Select field with explicit alias</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT schedule[0].day AS Weekday FROM route LIMIT 1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Weekday": 0
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex-all-distinct" class="exampleblock">
<div class="title">Example 4. SELECT ALL and SELECT DISTINCT</div>
<div class="content">
<div class="paragraph">
<p>Note that the queries in this example may take some time to run.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="q1" class="listingblock">
<div class="title">Query 1</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT ALL city FROM landmark;</code></pre>
</div>
</div>
<div class="paragraph">
<p>slightly slower</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div id="q2" class="listingblock">
<div class="title">Query 2</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT DISTINCT city FROM landmark;</code></pre>
</div>
</div>
<div class="paragraph">
<p>slightly faster</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When used on a field such as <code>city</code>, which contains non-unique values, <code>SELECT DISTINCT</code> reduces the recordset to a small fraction of its original size; and while removing so many of the documents takes time, projecting the remaining small fraction is actually slightly faster than the overhead of removing duplicates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div id="q3" class="listingblock">
<div class="title">Query 3</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT ALL META().id FROM landmark;</code></pre>
</div>
</div>
<div class="paragraph">
<p>much faster</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div id="q4" class="listingblock">
<div class="title">Query 4</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT DISTINCT META().id FROM landmark;</code></pre>
</div>
</div>
<div class="paragraph">
<p>much slower</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On the other extreme, when used on a field such as <code>META().id</code> which contains only unique values, <code>SELECT DISTINCT</code> does not reduce the recordset at all, and the overhead of looking for duplicates is wasted effort.
In this case, <code>SELECT DISTINCT</code> takes about twice as long to execute as <code>SELECT ALL</code>.</p>
</div>
</div>
</div>
<div id="ex-distinct-plan" class="exampleblock">
<div class="title">Example 5. Query plan using the <code>DISTINCT</code> operator</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">EXPLAIN SELECT DISTINCT city FROM landmark;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "PrimaryScan3",
          "bucket": "travel-sample",
          "index": "def_inventory_landmark_primary",
          "index_projection": {
            "primary_key": true
          },
          "keyspace": "landmark",
          "namespace": "default",
          "scope": "inventory",
          "using": "gsi"
        },
        {
          "#operator": "Fetch",
          "bucket": "travel-sample",
          "keyspace": "landmark",
          "namespace": "default",
          "scope": "inventory"
        },
        {
          "#operator": "Parallel",
          "~child": {
            "#operator": "Sequence",
            "~children": [
              {
                "#operator": "InitialProject",
                "distinct": true,
                "result_terms": [
                  {
                    "expr": "(`landmark`.`city`)"
                  }
                ]
              },
              {
                "#operator": "Distinct" <i class="conum" data-value="1"></i><b>(1)</b>
              }
            ]
          }
        },
        {
          "#operator": "Distinct" <i class="conum" data-value="1"></i><b>(1)</b>
        }
      ]
    },
    "text": "SELECT DISTINCT city FROM landmark;"
  }
]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Lines using the <code>DISTINCT</code> operator</td>
</tr>
</table>
</div>
</div>
</div>
<div id="ex-raw-expr" class="exampleblock">
<div class="title">Example 6. SELECT and SELECT RAW with a simple expression</div>
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT {"a":1, "b":2};</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT RAW {"a":1, "b":2};</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "$1": { <i class="conum" data-value="1"></i><b>(1)</b>
      "a": 1,
      "b": 2
    }
  }
]</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  { <i class="conum" data-value="2"></i><b>(2)</b>
    "a": 1,
    "b": 2
  }
]</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Added implicit alias</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>No implicit alias</td>
</tr>
</table>
</div>
</div>
</div>
<div id="ex-raw-field" class="exampleblock">
<div class="title">Example 7. SELECT, SELECT RAW, and SELECT DISTINCT RAW with a field</div>
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT city
FROM airport
ORDER BY city LIMIT 5;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT RAW city
FROM airport
ORDER BY city LIMIT 5;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT DISTINCT RAW city
FROM airport
ORDER BY city LIMIT 5;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "city": "Abbeville"
  },
  {
    "city": "Aberdeen"
  },
  {
    "city": "Aberdeen"
  },
  {
    "city": "Aberdeen"
  },
  {
    "city": "Abilene"
  }
]</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  "Abbeville",
  "Aberdeen",
  "Aberdeen",
  "Aberdeen",
  "Abilene"
]</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  "Abbeville",
  "Aberdeen",
  "Abilene",
  "Adak Island",
  "Addison"
]</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ex1" class="exampleblock">
<div class="title">Example 8. Select all the fields of 1 document from the <code>airline</code> keyspace</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT * FROM airline LIMIT 1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "airline": {
      "callsign": "MILE-AIR",
      "country": "United States",
      "iata": "Q5",
      "icao": "MLA",
      "id": 10,
      "name": "40-Mile Air",
      "type": "airline"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex2" class="exampleblock">
<div class="title">Example 9. Select all the fields of 1 document from the <code>landmark</code> keyspace</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT * FROM landmark LIMIT 1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "landmark": {
      "activity": "see",
      "address": "Prince Arthur Road, ME4 4UG",
      "alt": null,
      "city": "Gillingham",
      "content": "Adult - £6.99 for an Adult ticket that allows you to come back for further visits within a year (children's and concessionary tickets also available). Museum on military engineering and the history of the British Empire. A quite extensive collection that takes about half a day to see. Of most interest to fans of British and military history or civil engineering. The outside collection of tank mounted bridges etc can be seen for free. There is also an extensive series of themed special event weekends, admission to which is included in the cost of the annual ticket.",
      "country": "United Kingdom",
      "directions": null,
      "email": null,
      "geo": {
        "accuracy": "RANGE_INTERPOLATED",
        "lat": 51.39184,
        "lon": 0.53616
      },
      "hours": "Tues - Fri 9.00am to 5.00pm, Sat - Sun 11.30am - 5.00pm",
      "id": 10019,
      "image": null,
      "name": "Royal Engineers Museum",
      "phone": "+44 1634 822839",
      "price": null,
      "state": null,
      "title": "Gillingham (Kent)",
      "tollfree": null,
      "type": "landmark",
      "url": "http://www.remuseum.org.uk"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex-star" class="exampleblock">
<div class="title">Example 10. Star expressions and select expressions with path</div>
<div class="content">
<div id="q3" class="listingblock">
<div class="title">Query A</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT * FROM hotel LIMIT 5;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "hotel": { <i class="conum" data-value="1"></i><b>(1)</b>
      "address": "Capstone Road, ME7 3JE",
      "alias": null,
      "checkin": null,
// ...
    }
  }
]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As the star expression does not include the keyspace name, the results are wrapped in an extra object, and the keyspace name is added to each result.</td>
</tr>
</table>
</div>
<div id="q4" class="listingblock">
<div class="title">Query B</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT hotel.* FROM hotel LIMIT 5;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  { <i class="conum" data-value="1"></i><b>(1)</b>
    "address": "Capstone Road, ME7 3JE",
    "alias": null,
    "checkin": null,
// ...
  }
]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As the star expression includes the keyspace name, the keyspace name is not added to the results.</td>
</tr>
</table>
</div>
<div id="q5" class="listingblock">
<div class="title">Query C</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT meta().id, email, city, phone, hotel.reviews[0].ratings
FROM hotel LIMIT 5;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  { <i class="conum" data-value="1"></i><b>(1)</b>
    "city": "Medway",
    "email": null,
    "id": "hotel_10025",
    "phone": "+44 870 770 5964",
    "ratings": {
      "Cleanliness": 5,
      "Location": 4,
      "Overall": 4,
      "Rooms": 3,
      "Service": 5,
      "Value": 4
    }
  },
// ...
]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>With a select expression, you may optionally include the keyspace name; in either case, the keyspace name is not added to the results.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec_RelatedLinks"><a class="anchor" href="#sec_RelatedLinks"></a>Related Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="from.html" class="xref page">FROM clause</a></p>
</li>
<li>
<p><a href="hints.html" class="xref page">USE clause</a></p>
</li>
<li>
<p><a href="let.html" class="xref page">LET Clause</a></p>
</li>
<li>
<p><a href="where.html" class="xref page">WHERE Clause</a></p>
</li>
<li>
<p><a href="groupby.html" class="xref page">GROUP BY Clause</a></p>
</li>
<li>
<p><a href="union.html" class="xref page">UNION, INTERSECT, and EXCEPT Clause</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
